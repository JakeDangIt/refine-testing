var Ma=Object.create;var yr=Object.defineProperty;var Ia=Object.getOwnPropertyDescriptor;var wa=Object.getOwnPropertyNames;var Sa=Object.getPrototypeOf,Aa=Object.prototype.hasOwnProperty;var Fa=(e,t)=>{for(var r in t)yr(e,r,{get:t[r],enumerable:!0})},dn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wa(t))!Aa.call(e,o)&&o!==r&&yr(e,o,{get:()=>t[o],enumerable:!(n=Ia(t,o))||n.enumerable});return e};var Q=(e,t,r)=>(r=e!=null?Ma(Sa(e)):{},dn(t||!e||!e.__esModule?yr(r,"default",{value:e,enumerable:!0}):r,e)),Qa=e=>dn(yr({},"__esModule",{value:!0}),e);var oi={};Fa(oi,{AccessControlContext:()=>Xe,AuthPage:()=>ua,Authenticated:()=>Pa,CanAccess:()=>Ca,ErrorComponent:()=>oa,GitHubBanner:()=>ba,LayoutWrapper:()=>Ra,LoginPage:()=>br,ReadyPage:()=>to,Refine:()=>Ta,ResourceContext:()=>Ze,RouteChangeHandler:()=>ro,TranslationContext:()=>Ae,UndoableQueue:()=>No,WelcomePage:()=>ca,createTreeView:()=>Mo,file2Base64:()=>Sn,generateDefaultDocumentTitle:()=>Qo,getDefaultFilter:()=>wn,getDefaultSortOrder:()=>In,getNextPageParam:()=>Zt,getPreviousPageParam:()=>Yt,handleUseParams:()=>vo,importCSVMapper:()=>Nt,legacyResourceTransform:()=>Jt,matchResourceFromRoute:()=>hr,parseTableParams:()=>Ht,parseTableParamsFromQuery:()=>En,pickNotDeprecated:()=>M,routeGenerator:()=>jt,setInitialFilters:()=>Gt,setInitialSorters:()=>Wt,stringifyTableParams:()=>Ot,unionFilters:()=>pt,unionSorters:()=>$t,useActiveAuthProvider:()=>K,useApiUrl:()=>Xn,useAuthenticated:()=>hn,useBack:()=>Jr,useBreadcrumb:()=>Ya,useCan:()=>Jo,useCanWithoutCache:()=>za,useCancelNotification:()=>Ne,useCheckError:()=>bn,useCreate:()=>Ut,useCreateMany:()=>Qr,useCustom:()=>es,useCustomMutation:()=>rs,useDataProvider:()=>X,useDelete:()=>jn,useDeleteMany:()=>Jn,useExport:()=>Ha,useForgotPassword:()=>Rr,useForm:()=>Oa,useGetIdentity:()=>gr,useGetLocale:()=>Es,useGetToPath:()=>It,useGo:()=>pe,useHandleNotification:()=>ne,useImport:()=>Ga,useInfiniteList:()=>ss,useInvalidate:()=>Se,useIsAuthenticated:()=>Vt,useIsExistAuthentication:()=>xr,useLink:()=>nt,useList:()=>vt,useLiveMode:()=>Ko,useLoadingOvertime:()=>j,useLog:()=>we,useLogList:()=>Za,useLogin:()=>ht,useLogout:()=>kt,useMany:()=>Mr,useMenu:()=>ra,useMeta:()=>z,useModal:()=>Wa,useMutationMode:()=>Be,useNavigation:()=>ce,useNotification:()=>he,useOnError:()=>re,useOne:()=>Dt,useParse:()=>$r,useParsed:()=>le,usePermissions:()=>gn,usePublish:()=>Ie,useRedirectionAfterSubmission:()=>jo,useRefineContext:()=>ie,useRegister:()=>Tr,useResource:()=>V,useResourceSubscription:()=>_e,useResourceWithRoute:()=>Wo,useRouterContext:()=>te,useRouterType:()=>_,useSelect:()=>_a,useSetLocale:()=>Ls,useShow:()=>$a,useSubscription:()=>Na,useSyncWithLocation:()=>Ur,useTable:()=>ja,useTitle:()=>$n,useToPath:()=>ks,useTranslate:()=>N,useUpdate:()=>Ar,useUpdateMany:()=>Yn,useUpdatePassword:()=>Pr,useUserFriendlyName:()=>lt,useWarnAboutChange:()=>bt,userFriendlyResourceName:()=>Kt});module.exports=Qa(oi);var Ge=Q(require("react"));var ct=Q(require("react"));var ln=ct.default.createContext({}),mn=({children:e,isProvided:t,...r})=>{let{replace:n}=ce(),o=async p=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},a=async p=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},s=async p=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},u=async p=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,p)),Promise.resolve()}catch(l){return l!=null&&l.redirectPath&&n(l.redirectPath),Promise.reject(l)}};return ct.default.createElement(ln.Provider,{value:{...r,login:o,logout:s,checkAuth:u,register:a,isProvided:t}},e)},fn=ct.default.createContext({}),yn=({children:e,isProvided:t,...r})=>{let n=async d=>{var l;try{return await((l=r.login)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",c),Promise.reject(c)}},o=async d=>{var l;try{return await((l=r.register)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",c),Promise.reject(c)}},a=async d=>{var l;try{return await((l=r.logout)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",c),Promise.reject(c)}},s=async d=>{var l;try{let c=await((l=r.check)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",c),Promise.reject(c)}},u=async d=>{var l;try{let c=await((l=r.forgotPassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",c),Promise.reject(c)}},p=async d=>{var l;try{let c=await((l=r.updatePassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",c),Promise.reject(c)}};return ct.default.createElement(fn.Provider,{value:{...r,login:n,logout:a,check:s,register:o,forgotPassword:u,updatePassword:p,isProvided:t}},e)},ae=()=>ct.default.useContext(ln),de=()=>ct.default.useContext(fn);var ao=require("@tanstack/react-query");function gn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=ae(),{getPermissions:n}=de(),o=(0,ao.useQuery)(["usePermissions"],n??(()=>Promise.resolve(void 0)),{enabled:!e&&!!n,...e?{}:t}),a=(0,ao.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve(void 0)),{enabled:e&&!!r,...e?t:{}});return e?a:o}var io=require("@tanstack/react-query");function gr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=ae(),{getIdentity:n}=de(),o=(0,io.useQuery)(["getUserIdentity"],n??(()=>Promise.resolve({})),{enabled:!e&&!!n,retry:!1,...e===!0?{}:t}),a=(0,io.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve({})),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:o}var co=require("@tanstack/react-query");var Tn=require("@tanstack/react-query"),Ct=()=>{let e=(0,Tn.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function kt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),n=_(),o=pe(),{push:a}=ce(),{open:s,close:u}=he(),{logout:p}=ae(),{logout:d}=de(),l=(0,co.useMutation)(["useLogout"],d,{onSuccess:async(m,P)=>{let{success:x,error:C,redirectTo:v}=m,{redirectPath:g}=P??{},U=g??v;x&&(u==null||u("useLogout-error")),(C||!x)&&(s==null||s(uo(C))),await r(),U!==!1&&(n==="legacy"?a(U??"/login"):U&&o({to:U}))},onError:m=>{s==null||s(uo(m))},...e===!0?{}:t}),c=(0,co.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],p,{onSuccess:async(m,P)=>{let x=(P==null?void 0:P.redirectPath)??m;if(await r(),x!==!1){if(x){n==="legacy"?a(x):o({to:x});return}n==="legacy"?a("/login"):o({to:"/login"})}},onError:m=>{s==null||s(uo(m))},...e?t:{}});return e?c:l}var uo=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});var Rn=Q(require("react")),lo=require("@tanstack/react-query"),Pn=Q(require("qs"));function ht({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),n=_(),o=pe(),{replace:a}=ce(),s=le(),{useLocation:u}=te(),{search:p}=u(),{close:d,open:l}=he(),{login:c}=ae(),{login:m}=de(),P=Rn.default.useMemo(()=>{var v;return n==="legacy"?Pn.default.parse(p,{ignoreQueryPrefix:!0}).to:(v=s.params)==null?void 0:v.to},[n,s.params,p]),x=(0,lo.useMutation)(["useLogin"],m,{onSuccess:async({success:v,redirectTo:g,error:U})=>{v&&(d==null||d("login-error")),(U||!v)&&(l==null||l(po(U))),await r(),P&&v?n==="legacy"?a(P):o({to:P,type:"replace"}):g?n==="legacy"?a(g):o({to:g,type:"replace"}):n==="legacy"&&a("/")},onError:v=>{l==null||l(po(v))},...e===!0?{}:t}),C=(0,lo.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],c,{onSuccess:async v=>{await r(),P&&a(P),v!==!1&&!P&&(typeof v=="string"?n==="legacy"?a(v):o({to:v,type:"replace"}):n==="legacy"?a("/"):o({to:"/",type:"replace"})),d==null||d("login-error")},onError:v=>{l==null||l(po(v))},...e?t:{}});return e?C:x}var po=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});var fo=require("@tanstack/react-query");function Tr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Ct(),n=_(),o=pe(),{replace:a}=ce(),{register:s}=ae(),{register:u}=de(),{close:p,open:d}=he(),l=(0,fo.useMutation)(["useRegister"],u,{onSuccess:async({success:m,redirectTo:P,error:x})=>{m&&(p==null||p("register-error")),(x||!m)&&(d==null||d(mo(x))),await r(),P?n==="legacy"?a(P):o({to:P,type:"replace"}):n==="legacy"&&a("/")},onError:m=>{d==null||d(mo(m))},...e===!0?{}:t}),c=(0,fo.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],s,{onSuccess:async m=>{await r(),m!==!1&&(m?n==="legacy"?a(m):o({to:m,type:"replace"}):n==="legacy"?a("/"):o({to:"/",type:"replace"}),p==null||p("register-error"))},onError:m=>{d==null||d(mo(m))},...e?t:{}});return e?c:l}var mo=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});var go=require("@tanstack/react-query");function Rr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=_(),n=pe(),{replace:o}=ce(),{forgotPassword:a}=ae(),{forgotPassword:s}=de(),{close:u,open:p}=he(),d=(0,go.useMutation)(["useForgotPassword"],s,{onSuccess:({success:c,redirectTo:m,error:P})=>{c&&(u==null||u("forgot-password-error")),(P||!c)&&(p==null||p(yo(P))),m&&(r==="legacy"?o(m):n({to:m,type:"replace"}))},onError:c=>{p==null||p(yo(c))},...e===!0?{}:t}),l=(0,go.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:c=>{c!==!1&&c&&(r==="legacy"?o(c):n({to:c,type:"replace"})),u==null||u("forgot-password-error")},onError:c=>{p==null||p(yo(c))},...e?t:{}});return e?l:d}var yo=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});var xn=Q(require("react")),Ro=require("@tanstack/react-query"),Cn=Q(require("qs"));function Pr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=_(),n=pe(),{replace:o}=ce(),{updatePassword:a}=ae(),{updatePassword:s}=de(),{close:u,open:p}=he(),d=le(),{useLocation:l}=te(),{search:c}=l(),m=xn.default.useMemo(()=>r==="legacy"?Cn.default.parse(c,{ignoreQueryPrefix:!0})??{}:d.params??{},[c,d,r]),P=(0,Ro.useMutation)(["useUpdatePassword"],async C=>s==null?void 0:s({...m,...C}),{onSuccess:({success:C,redirectTo:v,error:g})=>{C&&(u==null||u("update-password-error")),(g||!C)&&(p==null||p(To(g))),v&&(r==="legacy"?o(v):n({to:v,type:"replace"}))},onError:C=>{p==null||p(To(C))},...e===!0?{}:t}),x=(0,Ro.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async C=>a==null?void 0:a({...m,...C}),{onSuccess:C=>{C!==!1&&C&&(r==="legacy"?o(C):n({to:C,type:"replace"})),u==null||u("update-password-error")},onError:C=>{p==null||p(To(C))},...e?t:{}});return e?x:P}var To=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});var Po=require("@tanstack/react-query");function Vt({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=ae(),{check:n}=de(),o=(0,Po.useQuery)(["useAuthenticated",t],async()=>await(n==null?void 0:n(t))??{},{retry:!1,enabled:!e}),a=(0,Po.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>await(r==null?void 0:r(t))??{},{retry:!1,enabled:e});return e?a:o}var hn=Vt;var xo=require("@tanstack/react-query");function re({v3LegacyAuthProviderCompatible:e=!1}={}){let t=_(),r=pe(),{replace:n}=ce(),{checkError:o}=ae(),{onError:a}=de(),{mutate:s}=kt({v3LegacyAuthProviderCompatible:!!e}),{mutate:u}=kt({v3LegacyAuthProviderCompatible:!!e}),p=(0,xo.useMutation)(["useCheckError"],a,{onSuccess:({logout:l,redirectTo:c})=>{if(l){u({redirectPath:c});return}if(c){t==="legacy"?n(c):r({to:c,type:"replace"});return}}}),d=(0,xo.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],o,{onError:l=>{s({redirectPath:l})}});return e?d:p}var bn=re;var xr=()=>{let{isProvided:e}=ae(),{isProvided:t}=de();return!!(t||e)};var Wn=require("@tanstack/react-query");var Bt=e=>e/1e3;var vn=Q(require("lodash/zip")),Dn=Q(require("lodash/fromPairs")),Nt=(e,t=r=>r)=>{let[r,...n]=e;return n.map(o=>(0,Dn.default)((0,vn.default)(r,o))).map((o,a,s)=>t.call(void 0,o,a,s))};var bo=Q(require("pluralize"));var Cr=Q(require("qs")),Co=Q(require("lodash/unionWith")),ho=Q(require("lodash/differenceWith")),Ln=Q(require("warn-once"));var Ht=e=>{let{current:t,pageSize:r,sorter:n,sorters:o,filters:a}=Cr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:M(o,n)??[],parsedFilters:a??[]}},En=e=>{let t=Cr.default.stringify(e);return Ht(`/${t}`)},Ot=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:n,sorters:o,filters:a,...s}=e;return Cr.default.stringify({...s,...r||{},sorters:M(o,n),filters:a},t)},Un=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Mn=(e,t)=>e.field==t.field,pt=(e,t,r=[])=>(t.filter(o=>(o.operator==="or"||o.operator==="and")&&!o.key).length>1&&(0,Ln.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Co.default)(e,t,r,Un).filter(o=>o.value!==void 0&&o.value!==null&&(o.operator!=="or"||o.operator==="or"&&o.value.length!==0)&&(o.operator!=="and"||o.operator==="and"&&o.value.length!==0))),$t=(e,t)=>(0,Co.default)(e,t,Mn).filter(r=>r.order!==void 0&&r.order!==null),Gt=(e,t)=>[...(0,ho.default)(t,e,Un),...e],Wt=(e,t)=>[...(0,ho.default)(t,e,Mn),...e],In=(e,t)=>{if(!t)return;let r=t.find(n=>n.field===e);if(r)return r.order},wn=(e,t,r="eq")=>{let n=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:a,field:s}=o;return s===e&&a===r}});if(n)return n.value||[]};var Sn=e=>new Promise((t,r)=>{let n=new FileReader,o=()=>{n.result&&(n.removeEventListener("load",o,!1),t(n.result))};n.addEventListener("load",o,!1),n.readAsDataURL(e.originFileObj),n.onerror=a=>(n.removeEventListener("load",o,!1),r(a))});var Kt=(e="",t)=>{let r=zt(e);return t==="singular"?bo.default.singular(r):bo.default.plural(r)};var vo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var M=(...e)=>e.find(t=>typeof t<"u");var oe=(e,t,r,n)=>{let o=t||"default",a={all:[o],resourceAll:[o,e||""],list:s=>[...a.resourceAll,"list",{...s,...M(r,n)||{}}],many:s=>[...a.resourceAll,"getMany",s&&s.map(String),{...M(r,n)||{}}].filter(u=>u!==void 0),detail:s=>[...a.resourceAll,"detail",s==null?void 0:s.toString(),{...M(r,n)||{}}],logList:s=>["logList",e,s,n].filter(u=>u!==void 0)};return a};var Do=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var dt=e=>e.startsWith(":");var Oe=e=>e.split("/").filter(r=>r!=="");var Lo=(e,t)=>{let r=Oe(e),n=Oe(t);return r.length===n.length};var xe=e=>e.replace(/^\/|\/$/g,"");var Eo=(e,t)=>{let r=xe(e),n=xe(t);if(!Lo(r,n))return!1;let o=Oe(r);return Oe(n).every((s,u)=>dt(s)||s===o[u])};var Uo=(e,t,r)=>{let n=xe(r||""),o=`${n}${n?"/":""}${e}`;return t==="list"?o=`${o}`:t==="create"?o=`${o}/create`:t==="edit"?o=`${o}/edit/:id`:t==="show"?o=`${o}/show/:id`:t==="clone"&&(o=`${o}/clone/:id`),`/${o.replace(/^\//,"")}`};var Me=(e,t)=>{var o,a;let r=M((o=e.meta)==null?void 0:o.parent,(a=e.options)==null?void 0:a.parent,e.parentName);return r?t.find(s=>(s.identifier??s.name)===r)??{name:r}:void 0};var _t=(e,t,r)=>{let n=[],o=Me(e,t);for(;o;)n.push(o),o=Me(o,t);if(n.length!==0)return`/${n.reverse().map(a=>{var u;let s=r?((u=a.options)==null?void 0:u.route)??a.name:a.name;return xe(s)}).join("/")}`};var Te=(e,t,r)=>{let n=[],o=["list","show","edit","create","clone"],a=_t(e,t,r);return o.forEach(s=>{var d,l;let u=r&&s==="clone"?e.create:e[s],p;typeof u=="function"||r?p=Uo(r?((d=e.meta)==null?void 0:d.route)??((l=e.options)==null?void 0:l.route)??e.name:e.name,s,r?a:void 0):typeof u=="string"?p=u:typeof u=="object"&&(p=u.path),p&&n.push({action:s,resource:e,route:`/${p.replace(/^\//,"")}`})}),n};var An=e=>{var o;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(a=>({...a,splitted:Oe(xe(a.route))})),r=((o=t[0])==null?void 0:o.splitted.length)??0,n=[...t];for(let a=0;a<r;a++){let s=n.filter(u=>!dt(u.splitted[a]));if(s.length!==0){if(s.length===1){n=s;break}n=s}}return n[0]};var hr=(e,t)=>{let n=t.flatMap(a=>Te(a,t)).filter(a=>Eo(e,a.route)),o=An(n);return{found:!!o,resource:o==null?void 0:o.resource,action:o==null?void 0:o.action,matchedRoute:o==null?void 0:o.route}};var jt=(e,t)=>{var o;let r,n=_t(e,t,!0);if(n){let a=M(e.meta,e.options);r=`${n}/${(a==null?void 0:a.route)??e.name}`}else r=((o=e.options)==null?void 0:o.route)??e.name;return`/${r.replace(/^\//,"")}`};var Mo=e=>{var s;let t=[],r={},n={},o,a;for(let u=0;u<e.length;u++){o=e[u];let p=o.route??((s=M(o==null?void 0:o.meta,o.options))==null?void 0:s.route)??"";r[p]=o,r[p].children=[],n[o.name]=o,n[o.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(a=r[u],a.parentName&&n[a.parentName]?n[a.parentName].children.push(a):t.push(a));return t};var zt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var So=Q(require("react")),wo=Q(require("pluralize"));var Fn=Q(require("react")),Io=({children:e})=>Fn.default.createElement("div",null,e);var Ee={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3},textTransformers:{humanize:zt,plural:wo.default.plural,singular:wo.default.singular}},be=So.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Io,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ee}),Qn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:n,undoableTimeout:o,children:a,DashboardPage:s,Title:u,Layout:p=Io,Header:d,Sider:l,Footer:c,OffLayoutArea:m,LoginPage:P=br,catchAll:x,liveMode:C="off",onLiveEvent:v,options:g})=>So.default.createElement(be.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:n,Title:u,undoableTimeout:o,Layout:p,Header:d,Sider:l,Footer:c,OffLayoutArea:m,DashboardPage:s,LoginPage:P,catchAll:x,liveMode:C,onLiveEvent:v,options:g}},a);var Ao=({options:e,disableTelemetry:t,liveMode:r,mutationMode:n,reactQueryClientConfig:o,reactQueryDevtoolConfig:a,syncWithLocation:s,undoableTimeout:u,warnWhenUnsavedChanges:p}={})=>{var m,P,x,C,v,g,U,S;let d={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??n??Ee.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??u??Ee.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??s??Ee.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??p??Ee.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??Ee.liveMode,redirect:{afterCreate:((m=e==null?void 0:e.redirect)==null?void 0:m.afterCreate)??Ee.redirect.afterCreate,afterClone:((P=e==null?void 0:e.redirect)==null?void 0:P.afterClone)??Ee.redirect.afterClone,afterEdit:((x=e==null?void 0:e.redirect)==null?void 0:x.afterEdit)??Ee.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??Ee.overtime,textTransformers:{humanize:((C=e==null?void 0:e.textTransformers)==null?void 0:C.humanize)??Ee.textTransformers.humanize,plural:((v=e==null?void 0:e.textTransformers)==null?void 0:v.plural)??Ee.textTransformers.plural,singular:((g=e==null?void 0:e.textTransformers)==null?void 0:g.singular)??Ee.textTransformers.singular}},l=(e==null?void 0:e.disableTelemetry)??t??!1,c={clientConfig:((U=e==null?void 0:e.reactQuery)==null?void 0:U.clientConfig)??o??{},devtoolConfig:((S=e==null?void 0:e.reactQuery)==null?void 0:S.devtoolConfig)??a??{}};return{optionsWithDefaults:d,disableTelemetryWithDefault:l,reactQueryWithDefaults:c}};var Fo=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var vr=async(e,t,r)=>{let n=[];for(let[o,a]of e.entries())try{let s=await a();n.push(t(s,o))}catch(s){n.push(r(s,o))}return n};var me=(e,t=[],r=!1)=>{if(!e)return;if(r){let o=t.find(s=>xe(s.route??"")===xe(e));return o||t.find(s=>s.name===e)}let n=t.find(o=>o.identifier===e);return n||(n=t.find(o=>o.name===e)),n};var H=(e,t,r)=>{if(t)return t;let n=me(e,r),o=M(n==null?void 0:n.meta,n==null?void 0:n.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"};var ze=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var Zt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let n=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/o);return n<a?Number(n)+1:void 0},Yt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let n=(t==null?void 0:t.current)||1;return n===1?void 0:n-1};var Jt=e=>{let t=[];return e.forEach(r=>{var n,o;t.push({...r,label:((n=r.meta)==null?void 0:n.label)??((o=r.options)==null?void 0:o.label),route:jt(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var kn=e=>Oe(xe(e)).flatMap(r=>dt(r)?[r.slice(1)]:[]);var Vn=(e,t={})=>e.reduce((r,n)=>{let o=t[n];return typeof o<"u"&&(r[n]=o),r},{});var Ce=(e,t={},r={},n={})=>{let o=kn(e),a=Vn(o,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...n});return e.replace(/:([^\/]+)/g,(s,u)=>{let p=a[u];return typeof p<"u"?`${p}`:s})};var K=()=>{let e=ae(),t=de();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var Xt=({hasPagination:e,pagination:t,configPagination:r}={})=>{let n=e===!1?"off":"server",o=(t==null?void 0:t.mode)??n,a=M(t==null?void 0:t.current,r==null?void 0:r.current)??1,s=M(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:a,pageSize:s,mode:o}};var Dr=require("react"),Lr=e=>{let[t,r]=(0,Dr.useState)(!1);return(0,Dr.useEffect)(()=>{let n=window.matchMedia(e);n.matches!==t&&r(n.matches);let o=()=>r(n.matches);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[t,e]),t};var Er=(e,t,r,n)=>{let o=n?e(t,n,r):e(t,r),a=r??t;return o===t||typeof o>"u"?a:o};function Qo(e,t,r,n,o){var m;let a={create:"Create new ",clone:`#${n??""} Clone `,edit:`#${n??""} Edit `,show:`#${n??""} Show `,list:""},s=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),u=(t==null?void 0:t.label)??((m=t==null?void 0:t.meta)==null?void 0:m.label)??Kt(s,r==="list"?"plural":"singular"),p=o??u,d=Er(e,"documentTitle.default","refine"),l=Er(e,"documentTitle.suffix"," | refine"),c=d;return r&&s&&(c=Er(e,`documentTitle.${s}.${r}`,`${a[r]??""}${p}${l}`,{id:n})),c}var Bn=require("react");var Be=()=>{let{mutationMode:e,undoableTimeout:t}=(0,Bn.useContext)(be);return{mutationMode:e,undoableTimeout:t}};var Vo=require("react");var qt=Q(require("react")),ko=qt.default.createContext({}),Nn=({children:e})=>{let[t,r]=(0,qt.useState)(!1);return qt.default.createElement(ko.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var bt=()=>{let{warnWhenUnsavedChanges:e}=(0,Vo.useContext)(be),{warnWhen:t,setWarnWhen:r}=(0,Vo.useContext)(ko);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}};var Hn=require("react");var Ur=()=>{let{syncWithLocation:e}=(0,Hn.useContext)(be);return{syncWithLocation:e}};var On=require("react");var $n=()=>{let{Title:e}=(0,On.useContext)(be);return e};var Gn=require("react");var ie=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:n,Sider:o,Title:a,hasDashboard:s,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:m,catchAll:P,options:x}=(0,Gn.useContext)(be);return{Footer:e,Header:t,Layout:r,OffLayoutArea:n,Sider:o,Title:a,hasDashboard:s,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:m,catchAll:P,options:x}};var lt=()=>{let{options:{textTransformers:e}}=ie();return(r="",n)=>{let o=e.humanize(r);return n==="singular"?e.singular(o):e.plural(o)}};var er=require("react");var j=({isLoading:e,interval:t,onInterval:r})=>{let[n,o]=(0,er.useState)(void 0),{options:a}=ie(),{overtime:s}=a,u=t??s.interval,p=r??(s==null?void 0:s.onInterval);return(0,er.useEffect)(()=>{let d;return e&&(d=setInterval(()=>{o(l=>l===void 0?u:l+u)},u)),()=>{clearInterval(d),o(void 0)}},[e,u]),(0,er.useEffect)(()=>{p&&n&&p(n)},[n]),{elapsedTime:n}};var vt=({resource:e,config:t,filters:r,hasPagination:n,pagination:o,sorters:a,queryOptions:s,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:m,liveParams:P,dataProviderName:x,overtimeOptions:C})=>{let{resources:v,resource:g,identifier:U}=V(e),S=X(),h=N(),i=K(),{mutate:f}=re({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)}),R=ne(),b=z(),T=H(U,x,v),y=M(d,l),D=M(r,t==null?void 0:t.filters),L=M(a,t==null?void 0:t.sort),A=M(n,t==null?void 0:t.hasPagination),w=Xt({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:A}),E=w.mode==="server",I=b({resource:g,meta:y}),F={meta:I,metaData:I,filters:D,hasPagination:E,pagination:w,sorters:L,config:{...t,sort:L}},B=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,$=oe(U,T,y),{getList:W}=S(T);_e({resource:U,types:["*"],params:{meta:I,metaData:I,pagination:w,hasPagination:E,sort:L,sorters:L,filters:D,subscriptionType:"useList",...P},channel:`resources/${g==null?void 0:g.name}`,enabled:B,liveMode:c,onLiveEvent:m});let q=(0,Wn.useQuery)($.list({filters:D,hasPagination:E,...E&&{pagination:w},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:G,signal:O})=>W({resource:(g==null?void 0:g.name)??"",pagination:w,hasPagination:E,filters:D,sort:L,sorters:L,meta:{...I,queryContext:{queryKey:k,pageParam:G,signal:O}},metaData:{...I,queryContext:{queryKey:k,pageParam:G,signal:O}}}),{...s,enabled:typeof(s==null?void 0:s.enabled)<"u"?s==null?void 0:s.enabled:!!(g!=null&&g.name),select:k=>{var Re;let G=k,{current:O,mode:J,pageSize:ue}=w;return J==="client"&&(G={...G,data:G.data.slice((O-1)*ue,O*ue),total:G.total}),s!=null&&s.select?(Re=s==null?void 0:s.select)==null?void 0:Re.call(s,G):G},onSuccess:k=>{var O;(O=s==null?void 0:s.onSuccess)==null||O.call(s,k);let G=typeof u=="function"?u(k,F,U):u;R(G)},onError:k=>{var O;f(k),(O=s==null?void 0:s.onError)==null||O.call(s,k);let G=typeof p=="function"?p(k,F,U):p;R(G,{key:`${U}-useList-notification`,message:h("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}}),{elapsedTime:Y}=j({isLoading:q.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{...q,overtime:{elapsedTime:Y}}};var Kn=require("@tanstack/react-query");var Dt=({resource:e,id:t,queryOptions:r,successNotification:n,errorNotification:o,meta:a,metaData:s,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l,overtimeOptions:c})=>{let{resources:m,resource:P,identifier:x}=V(e),C=X(),v=N(),g=K(),{mutate:U}=re({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),S=ne(),h=z(),i=M(a,s),f=H(x,l,m),R=oe(x,f,i),{getOne:b}=C(f),T=h({resource:P,meta:i});_e({resource:x,types:["*"],channel:`resources/${P==null?void 0:P.name}`,params:{ids:t?[t]:[],id:t,meta:T,metaData:T,subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(P==null?void 0:P.name)<"u"&&typeof t<"u",liveMode:u,onLiveEvent:p});let y=(0,Kn.useQuery)(R.detail(t),({queryKey:L,pageParam:A,signal:w})=>b({resource:(P==null?void 0:P.name)??"",id:t,meta:{...T,queryContext:{queryKey:L,pageParam:A,signal:w}},metaData:{...T,queryContext:{queryKey:L,pageParam:A,signal:w}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:L=>{var w;(w=r==null?void 0:r.onSuccess)==null||w.call(r,L);let A=typeof n=="function"?n(L,{id:t,...T},x):n;S(A)},onError:L=>{var w;U(L),(w=r==null?void 0:r.onError)==null||w.call(r,L);let A=typeof o=="function"?o(L,{id:t,...T},x):o;S(A,{key:`${t}-${x}-getOne-notification`,message:v("notifications.error",{statusCode:L.statusCode},`Error (status code: ${L.statusCode})`),description:L.message,type:"error"})}}),{elapsedTime:D}=j({isLoading:y.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...y,overtime:{elapsedTime:D}}};var zn=require("@tanstack/react-query");var Mr=({resource:e,ids:t,queryOptions:r,successNotification:n,errorNotification:o,meta:a,metaData:s,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l,overtimeOptions:c})=>{let{resources:m,resource:P,identifier:x}=V(e),C=X(),v=N(),g=K(),{mutate:U}=re({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),S=ne(),h=z(),i=M(a,s),f=H(x,l,m),R=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,b=oe(x,f,i),{getMany:T,getOne:y}=C(f),D=h({resource:P,meta:i});_e({resource:x,types:["*"],params:{ids:t,meta:D,metaData:D,subscriptionType:"useMany",...d},channel:`resources/${P.name}`,enabled:R,liveMode:u,onLiveEvent:p});let L=(0,zn.useQuery)(b.many(t),({queryKey:w,pageParam:E,signal:I})=>T?T({resource:P==null?void 0:P.name,ids:t,meta:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}},metaData:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}}}):ze(t.map(F=>y({resource:P==null?void 0:P.name,id:F,meta:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}},metaData:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}}}))),{...r,onSuccess:w=>{var I;(I=r==null?void 0:r.onSuccess)==null||I.call(r,w);let E=typeof n=="function"?n(w,t,x):n;S(E)},onError:w=>{var I;U(w),(I=r==null?void 0:r.onError)==null||I.call(r,w);let E=typeof o=="function"?o(w,t,x):o;S(E,{key:`${t[0]}-${x}-getMany-notification`,message:v("notifications.error",{statusCode:w.statusCode},`Error (status code: ${w.statusCode})`),description:w.message,type:"error"})}}),{elapsedTime:A}=j({isLoading:L.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...L,overtime:{elapsedTime:A}}};var Sr=require("@tanstack/react-query");var Lt=Q(require("react")),Ir=Q(require("lodash/isEqual"));var wr=Lt.default.createContext({notifications:[],notificationDispatch:()=>!1}),ka=[],Va=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(n=>!((0,Ir.default)(n.id,t.payload.id)&&n.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(n=>!((0,Ir.default)(n.id,t.payload.id)&&n.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(n=>(0,Ir.default)(n.id,t.payload.id)&&n.resource==t.payload.resource?{...n,seconds:t.payload.seconds-1e3}:n);default:return e}},Bo=({children:e})=>{let[t,r]=(0,Lt.useReducer)(Va,ka),n={notifications:t,notificationDispatch:r};return Lt.default.createElement(wr.Provider,{value:n},e,typeof window<"u"&&t.map(o=>Lt.default.createElement(No,{key:`${o.id}-${o.resource}-queue`,notification:o})))};var Ar=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:n}=V(),o=(0,Sr.useQueryClient)(),a=X(),{mutationMode:s,undoableTimeout:u}=Be(),p=N(),d=K(),{mutate:l}=re({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),c=Ie(),{log:m}=we(),{notificationDispatch:P}=Ne(),x=ne(),C=Se(),v=z(),{options:{textTransformers:g}}=ie(),U=(0,Sr.useMutation)(({id:h,values:i,resource:f,mutationMode:R,undoableTimeout:b,onCancel:T,meta:y,metaData:D,dataProviderName:L})=>{let{resource:A,identifier:w}=n(f),E=v({resource:A,meta:M(y,D)}),I=R??s,F=b??u;return I!=="undoable"?a(H(w,L,r)).update({resource:A.name,id:h,variables:i,meta:E,metaData:E}):new Promise(($,W)=>{let q=()=>{a(H(w,L,r)).update({resource:A.name,id:h,variables:i,meta:E,metaData:E}).then(k=>$(k)).catch(k=>W(k))},Y=()=>{W({message:"mutationCancelled"})};T&&T(Y),P({type:"ADD",payload:{id:h,resource:w,cancelMutation:Y,doMutation:q,seconds:F,isSilent:!!T}})})},{onMutate:async({resource:h,id:i,mutationMode:f,values:R,dataProviderName:b,meta:T,metaData:y})=>{let{identifier:D}=n(h),L=M(T,y),A=oe(D,H(D,b,r),L),w=o.getQueriesData(A.resourceAll),E=f??s;return await o.cancelQueries(A.resourceAll,void 0,{silent:!0}),E!=="pessimistic"&&(o.setQueriesData(A.list(),I=>{if(!I)return null;let F=I.data.map(B=>{var $;return(($=B.id)==null?void 0:$.toString())===(i==null?void 0:i.toString())?{id:i,...B,...R}:B});return{...I,data:F}}),o.setQueriesData(A.many(),I=>{if(!I)return null;let F=I.data.map(B=>{var $;return(($=B.id)==null?void 0:$.toString())===(i==null?void 0:i.toString())&&(B={id:i,...B,...R}),B});return{...I,data:F}}),o.setQueriesData(A.detail(i),I=>I?{...I,data:{...I.data,...R}}:null)),{previousQueries:w,queryKey:A}},onSettled:(h,i,{id:f,resource:R,dataProviderName:b,invalidates:T=["list","many","detail"]})=>{let{identifier:y}=n(R);C({resource:y,dataProviderName:H(y,b,r),invalidates:T,id:f}),P({type:"REMOVE",payload:{id:f,resource:y}})},onSuccess:(h,{id:i,resource:f,successNotification:R,dataProviderName:b,values:T,meta:y,metaData:D},L)=>{var Y;let{resource:A,identifier:w}=n(f),E=g.singular(w),I=typeof R=="function"?R(h,{id:i,values:T},w):R;x(I,{key:`${i}-${w}-notification`,description:p("notifications.success","Successful"),message:p("notifications.editSuccess",{resource:p(`${w}.${w}`,E)},`Successfully updated ${E}`),type:"success"}),c==null||c({channel:`resources/${A.name}`,type:"updated",payload:{ids:(Y=h.data)!=null&&Y.id?[h.data.id]:void 0},date:new Date});let F;if(L){let k=o.getQueryData(L.queryKey.detail(i));F=Object.keys(T||{}).reduce((G,O)=>{var J;return G[O]=(J=k==null?void 0:k.data)==null?void 0:J[O],G},{})}let{fields:B,operation:$,variables:W,...q}=M(y,D)||{};m==null||m.mutate({action:"update",resource:A.name,data:T,previousData:F,meta:{id:i,dataProviderName:H(w,b,r),...q}})},onError:(h,{id:i,resource:f,errorNotification:R,values:b},T)=>{let{identifier:y}=n(f);if(T)for(let D of T.previousQueries)o.setQueryData(D[0],D[1]);if(h.message!=="mutationCancelled"){l==null||l(h);let D=g.singular(y),L=typeof R=="function"?R(h,{id:i,values:b},y):R;x(L,{key:`${i}-${y}-notification`,message:p("notifications.editError",{resource:p(`${y}.${y}`,D),statusCode:h.statusCode},`Error when updating ${D} (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=j({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};var _n=require("@tanstack/react-query");var Ut=({mutationOptions:e,overtimeOptions:t}={})=>{let r=K(),{mutate:n}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=X(),a=Se(),{resources:s,select:u}=V(),p=N(),d=Ie(),{log:l}=we(),c=ne(),m=z(),{options:{textTransformers:P}}=ie(),x=(0,_n.useMutation)(({resource:v,values:g,meta:U,metaData:S,dataProviderName:h})=>{let{resource:i,identifier:f}=u(v),R=m({resource:i,meta:M(U,S)});return o(H(f,h,s)).create({resource:i.name,variables:g,meta:R,metaData:R})},{onSuccess:(v,{resource:g,successNotification:U,dataProviderName:S,invalidates:h=["list","many"],values:i,meta:f,metaData:R})=>{var F,B;let{resource:b,identifier:T}=u(g),y=P.singular(T),D=typeof U=="function"?U(v,i,T):U;c(D,{key:`create-${T}-notification`,message:p("notifications.createSuccess",{resource:p(`${T}.${T}`,y)},`Successfully created ${y}`),description:p("notifications.success","Success"),type:"success"}),a({resource:T,dataProviderName:H(T,S,s),invalidates:h}),d==null||d({channel:`resources/${b.name}`,type:"created",payload:{ids:(F=v==null?void 0:v.data)!=null&&F.id?[v.data.id]:void 0},date:new Date});let L=m({resource:b,meta:M(f,R)}),{fields:A,operation:w,variables:E,...I}=L||{};l==null||l.mutate({action:"create",resource:b.name,data:i,meta:{dataProviderName:H(T,S,s),id:((B=v==null?void 0:v.data)==null?void 0:B.id)??void 0,...I}})},onError:(v,{resource:g,errorNotification:U,values:S})=>{n(v);let{identifier:h}=u(g),i=P.singular(h),f=typeof U=="function"?U(v,S,h):U;c(f,{key:`create-${h}-notification`,description:v.message,message:p("notifications.createError",{resource:p(`${h}.${h}`,i),statusCode:v.statusCode},`There was an error creating ${i} (status code: ${v.statusCode})`),type:"error"})},...e}),{elapsedTime:C}=j({isLoading:x.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...x,overtime:{elapsedTime:C}}};var Fr=require("@tanstack/react-query");var jn=({mutationOptions:e,overtimeOptions:t}={})=>{let r=K(),{mutate:n}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=X(),{resources:a,select:s}=V(),u=(0,Fr.useQueryClient)(),{mutationMode:p,undoableTimeout:d}=Be(),{notificationDispatch:l}=Ne(),c=N(),m=Ie(),{log:P}=we(),x=ne(),C=Se(),v=z(),{options:{textTransformers:g}}=ie(),U=(0,Fr.useMutation)(({id:h,mutationMode:i,undoableTimeout:f,resource:R,onCancel:b,meta:T,metaData:y,dataProviderName:D,values:L})=>{let{resource:A,identifier:w}=s(R),E=v({resource:A,meta:M(T,y)}),I=i??p,F=f??d;return I!=="undoable"?o(H(w,D,a)).deleteOne({resource:A.name,id:h,meta:E,metaData:E,variables:L}):new Promise(($,W)=>{let q=()=>{o(H(w,D,a)).deleteOne({resource:A.name,id:h,meta:E,metaData:E,variables:L}).then(k=>$(k)).catch(k=>W(k))},Y=()=>{W({message:"mutationCancelled"})};b&&b(Y),l({type:"ADD",payload:{id:h,resource:w,cancelMutation:Y,doMutation:q,seconds:F,isSilent:!!b}})})},{onMutate:async({id:h,resource:i,mutationMode:f,dataProviderName:R,meta:b,metaData:T})=>{let{identifier:y}=s(i),D=M(b,T),L=oe(y,H(y,R,a),D),A=f??p;await u.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=u.getQueriesData(L.resourceAll);return A!=="pessimistic"&&(u.setQueriesData(L.list(),E=>E?{data:E.data.filter(F=>{var B;return((B=F.id)==null?void 0:B.toString())!==h.toString()}),total:E.total-1}:null),u.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.filter(F=>{var B;return((B=F.id)==null?void 0:B.toString())!==(h==null?void 0:h.toString())});return{...E,data:I}})),{previousQueries:w,queryKey:L}},onSettled:(h,i,{id:f,resource:R,dataProviderName:b,invalidates:T=["list","many"]})=>{let{identifier:y}=s(R);C({resource:y,dataProviderName:H(y,b,a),invalidates:T}),l({type:"REMOVE",payload:{id:f,resource:y}})},onSuccess:(h,{id:i,resource:f,successNotification:R,dataProviderName:b,meta:T,metaData:y},D)=>{let{resource:L,identifier:A}=s(f),w=g.singular(A);u.removeQueries(D==null?void 0:D.queryKey.detail(i));let E=typeof R=="function"?R(h,i,A):R;x(E,{key:`${i}-${A}-notification`,description:c("notifications.success","Success"),message:c("notifications.deleteSuccess",{resource:c(`${A}.${A}`,w)},`Successfully deleted a ${w}`),type:"success"}),m==null||m({channel:`resources/${L.name}`,type:"deleted",payload:{ids:[i]},date:new Date});let I=v({resource:L,meta:M(T,y)}),{fields:F,operation:B,variables:$,...W}=I||{};P==null||P.mutate({action:"delete",resource:L.name,meta:{id:i,dataProviderName:H(A,b,a),...W}}),u.removeQueries(D==null?void 0:D.queryKey.detail(i))},onError:(h,{id:i,resource:f,errorNotification:R},b)=>{let{identifier:T}=s(f);if(b)for(let y of b.previousQueries)u.setQueryData(y[0],y[1]);if(h.message!=="mutationCancelled"){n(h);let y=g.singular(T),D=typeof R=="function"?R(h,i,T):R;x(D,{key:`${i}-${T}-notification`,message:c("notifications.deleteError",{resource:y,statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=j({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};var Zn=require("@tanstack/react-query");var Qr=({mutationOptions:e,overtimeOptions:t}={})=>{let r=X(),{resources:n,select:o}=V(),a=N(),s=Ie(),u=ne(),p=Se(),{log:d}=we(),l=z(),{options:{textTransformers:c}}=ie(),m=(0,Zn.useMutation)(({resource:x,values:C,meta:v,metaData:g,dataProviderName:U})=>{let{resource:S,identifier:h}=o(x),i=l({resource:S,meta:M(v,g)}),f=r(H(h,U,n));return f.createMany?f.createMany({resource:S.name,variables:C,meta:i,metaData:i}):ze(C.map(R=>f.create({resource:S.name,variables:R,meta:i,metaData:i})))},{onSuccess:(x,{resource:C,successNotification:v,dataProviderName:g,invalidates:U=["list","many"],values:S,meta:h,metaData:i})=>{let{resource:f,identifier:R}=o(C),b=c.plural(R),T=typeof v=="function"?v(x,S,R):v;u(T,{key:`createMany-${R}-notification`,message:a("notifications.createSuccess",{resource:a(`${R}.${R}`,R)},`Successfully created ${b}`),description:a("notifications.success","Success"),type:"success"}),p({resource:R,dataProviderName:H(R,g,n),invalidates:U});let y=x==null?void 0:x.data.filter(I=>(I==null?void 0:I.id)!==void 0).map(I=>I.id);s==null||s({channel:`resources/${f.name}`,type:"created",payload:{ids:y},date:new Date});let D=l({resource:f,meta:M(h,i)}),{fields:L,operation:A,variables:w,...E}=D||{};d==null||d.mutate({action:"createMany",resource:f.name,data:S,meta:{dataProviderName:H(R,g,n),ids:y,...E}})},onError:(x,{resource:C,errorNotification:v,values:g})=>{let{identifier:U}=o(C),S=typeof v=="function"?v(x,g,U):v;u(S,{key:`createMany-${U}-notification`,description:x.message,message:a("notifications.createError",{resource:a(`${U}.${U}`,U),statusCode:x.statusCode},`There was an error creating ${U} (status code: ${x.statusCode}`),type:"error"})},...e}),{elapsedTime:P}=j({isLoading:m.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...m,overtime:{elapsedTime:P}}};var kr=require("@tanstack/react-query");var Yn=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:n}=V(),o=(0,kr.useQueryClient)(),a=X(),s=N(),{mutationMode:u,undoableTimeout:p}=Be(),d=K(),{mutate:l}=re({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),{notificationDispatch:c}=Ne(),m=Ie(),P=ne(),x=Se(),{log:C}=we(),v=z(),{options:{textTransformers:g}}=ie(),U=(0,kr.useMutation)(({ids:h,values:i,resource:f,onCancel:R,mutationMode:b,undoableTimeout:T,meta:y,metaData:D,dataProviderName:L})=>{let{resource:A,identifier:w}=n(f),E=v({resource:A,meta:M(y,D)}),I=b??u,F=T??p,B=a(H(w,L,r)),$=()=>B.updateMany?B.updateMany({resource:A.name,ids:h,variables:i,meta:E,metaData:E}):ze(h.map(q=>B.update({resource:A.name,id:q,variables:i,meta:E,metaData:E})));return I!=="undoable"?$():new Promise((q,Y)=>{let k=()=>{$().then(O=>q(O)).catch(O=>Y(O))},G=()=>{Y({message:"mutationCancelled"})};R&&R(G),c({type:"ADD",payload:{id:h,resource:w,cancelMutation:G,doMutation:k,seconds:F,isSilent:!!R}})})},{onMutate:async({resource:h,ids:i,values:f,mutationMode:R,dataProviderName:b,meta:T,metaData:y})=>{let{identifier:D}=n(h),L=oe(D,H(D,b,r),M(T,y)),A=R??u;await o.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=o.getQueriesData(L.resourceAll);if(A!=="pessimistic"){o.setQueriesData(L.list(),E=>{if(!E)return null;let I=E.data.map(F=>F.id!==void 0&&i.filter(B=>B!==void 0).map(String).includes(F.id.toString())?{...F,...f}:F);return{...E,data:I}}),o.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.map(F=>F.id!==void 0&&i.filter(B=>B!==void 0).map(String).includes(F.id.toString())?{...F,...f}:F);return{...E,data:I}});for(let E of i)o.setQueriesData(L.detail(E),I=>{if(!I)return null;let F={...I.data,...f};return{...I,data:F}})}return{previousQueries:w,queryKey:L}},onSettled:(h,i,{ids:f,resource:R,dataProviderName:b})=>{let{identifier:T}=n(R);x({resource:T,invalidates:["list","many"],dataProviderName:H(T,b,r)}),f.forEach(y=>x({resource:T,invalidates:["detail"],dataProviderName:H(T,b,r),id:y})),c({type:"REMOVE",payload:{id:f,resource:T}})},onSuccess:(h,{ids:i,resource:f,meta:R,metaData:b,dataProviderName:T,successNotification:y,values:D},L)=>{let{resource:A,identifier:w}=n(f),E=g.singular(w),I=typeof y=="function"?y(h,{ids:i,values:D},w):y;P(I,{key:`${i}-${w}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${w}.${w}`,w)},`Successfully updated ${E}`),type:"success"}),m==null||m({channel:`resources/${A.name}`,type:"updated",payload:{ids:i.map(String)},date:new Date});let F=[];L&&i.forEach(k=>{let G=o.getQueryData(L.queryKey.detail(k));F.push(Object.keys(D||{}).reduce((O,J)=>{var ue;return O[J]=(ue=G==null?void 0:G.data)==null?void 0:ue[J],O},{}))});let B=v({resource:A,meta:M(R,b)}),{fields:$,operation:W,variables:q,...Y}=B||{};C==null||C.mutate({action:"updateMany",resource:A.name,data:D,previousData:F,meta:{ids:i,dataProviderName:H(w,T,r),...Y}})},onError:(h,{ids:i,resource:f,errorNotification:R,values:b},T)=>{let{identifier:y}=n(f);if(T)for(let D of T.previousQueries)o.setQueryData(D[0],D[1]);if(h.message!=="mutationCancelled"){l==null||l(h);let D=g.singular(y),L=typeof R=="function"?R(h,{ids:i,values:b},y):R;P(L,{key:`${i}-${y}-updateMany-error-notification`,message:s("notifications.editError",{resource:D,statusCode:h.statusCode},`Error when updating ${D} (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=j({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};var Vr=require("@tanstack/react-query");var Jn=({mutationOptions:e,overtimeOptions:t}={})=>{let r=K(),{mutate:n}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:o,undoableTimeout:a}=Be(),s=X(),{notificationDispatch:u}=Ne(),p=N(),d=Ie(),l=ne(),c=Se(),{log:m}=we(),{resources:P,select:x}=V(),C=(0,Vr.useQueryClient)(),v=z(),{options:{textTransformers:g}}=ie(),U=(0,Vr.useMutation)(({resource:h,ids:i,mutationMode:f,undoableTimeout:R,onCancel:b,meta:T,metaData:y,dataProviderName:D,values:L})=>{let{resource:A,identifier:w}=x(h),E=v({resource:A,meta:M(T,y)}),I=f??o,F=R??a,B=s(H(w,D,P)),$=()=>B.deleteMany?B.deleteMany({resource:A.name,ids:i,meta:E,metaData:E,variables:L}):ze(i.map(q=>B.deleteOne({resource:A.name,id:q,meta:E,metaData:E,variables:L})));return I!=="undoable"?$():new Promise((q,Y)=>{let k=()=>{$().then(O=>q(O)).catch(O=>Y(O))},G=()=>{Y({message:"mutationCancelled"})};b&&b(G),u({type:"ADD",payload:{id:i,resource:w,cancelMutation:G,doMutation:k,seconds:F,isSilent:!!b}})})},{onMutate:async({ids:h,resource:i,mutationMode:f,dataProviderName:R,meta:b,metaData:T})=>{let{identifier:y}=x(i),D=M(b,T),L=oe(y,H(y,R,P),D),A=f??o;await C.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=C.getQueriesData(L.resourceAll);if(A!=="pessimistic"){C.setQueriesData(L.list(),E=>E?{data:E.data.filter(F=>F.id&&!h.map(String).includes(F.id.toString())),total:E.total-1}:null),C.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.filter(F=>F.id?!h.map(String).includes(F.id.toString()):!1);return{...E,data:I}});for(let E of h)C.setQueriesData(L.detail(E),I=>!I||I.data.id==E?null:{...I})}return{previousQueries:w,queryKey:L}},onSettled:(h,i,{resource:f,ids:R,dataProviderName:b,invalidates:T=["list","many"]})=>{let{identifier:y}=x(f);c({resource:y,dataProviderName:H(y,b,P),invalidates:T}),u({type:"REMOVE",payload:{id:R,resource:y}})},onSuccess:(h,{ids:i,resource:f,meta:R,metaData:b,dataProviderName:T,successNotification:y},D)=>{let{resource:L,identifier:A}=x(f);i.forEach(W=>C.removeQueries(D==null?void 0:D.queryKey.detail(W)));let w=typeof y=="function"?y(h,i,A):y;l(w,{key:`${i}-${A}-notification`,description:p("notifications.success","Success"),message:p("notifications.deleteSuccess",{resource:p(`${A}.${A}`,A)},`Successfully deleted ${A}`),type:"success"}),d==null||d({channel:`resources/${L.name}`,type:"deleted",payload:{ids:i},date:new Date});let E=v({resource:L,meta:M(R,b)}),{fields:I,operation:F,variables:B,...$}=E||{};m==null||m.mutate({action:"deleteMany",resource:L.name,meta:{ids:i,dataProviderName:H(A,T,P),...$}}),i.forEach(W=>C.removeQueries(D==null?void 0:D.queryKey.detail(W)))},onError:(h,{ids:i,resource:f,errorNotification:R},b)=>{let{identifier:T}=x(f);if(b)for(let y of b.previousQueries)C.setQueryData(y[0],y[1]);if(h.message!=="mutationCancelled"){n(h);let y=g.singular(T),D=typeof R=="function"?R(h,i,T):R;l(D,{key:`${i}-${T}-notification`,message:p("notifications.deleteError",{resource:y,statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=j({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};var Xn=e=>{var o;let t=X(),{resource:r}=V(),{getApiUrl:n}=t(e??((o=M(r==null?void 0:r.meta,r==null?void 0:r.options))==null?void 0:o.dataProviderName));return n()};var qn=require("@tanstack/react-query");var es=({url:e,method:t,config:r,queryOptions:n,successNotification:o,errorNotification:a,meta:s,metaData:u,dataProviderName:p,overtimeOptions:d})=>{let l=X(),c=K(),{mutate:m}=re({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),P=N(),x=ne(),C=z(),v=M(s,u),{custom:g}=l(p),U=C({meta:v});if(g){let S=(0,qn.useQuery)({queryKey:[p,"custom",t,e,{...r,...v||{}}],queryFn:({queryKey:i,pageParam:f,signal:R})=>g({url:e,method:t,...r,meta:{...U,queryContext:{queryKey:i,pageParam:f,signal:R}},metaData:{...U,queryContext:{queryKey:i,pageParam:f,signal:R}}}),...n,onSuccess:i=>{var R;(R=n==null?void 0:n.onSuccess)==null||R.call(n,i);let f=typeof o=="function"?o(i,{...r,...U}):o;x(f)},onError:i=>{var R;m(i),(R=n==null?void 0:n.onError)==null||R.call(n,i);let f=typeof a=="function"?a(i,{...r,...U}):a;x(f,{key:`${t}-notification`,message:P("notifications.error",{statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})}}),{elapsedTime:h}=j({isLoading:S.isFetching,interval:d==null?void 0:d.interval,onInterval:d==null?void 0:d.onInterval});return{...S,overtime:{elapsedTime:h}}}else throw Error("Not implemented custom on data provider.")};var ts=require("@tanstack/react-query");var rs=({mutationOptions:e,overtimeOptions:t}={})=>{let r=K(),{mutate:n}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=ne(),a=X(),s=N(),u=z(),p=(0,ts.useMutation)(({url:l,method:c,values:m,meta:P,metaData:x,dataProviderName:C,config:v})=>{let g=u({meta:M(P,x)}),{custom:U}=a(C);if(U)return U({url:l,method:c,payload:m,meta:g,metaData:g,headers:{...v==null?void 0:v.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(l,{successNotification:c,config:m,meta:P,metaData:x})=>{let C=typeof c=="function"?c(l,{...m,...M(P,x)||{}}):c;o(C)},onError:(l,{errorNotification:c,method:m,config:P,meta:x,metaData:C})=>{n(l);let v=typeof c=="function"?c(l,{...P,...M(x,C)||{}}):c;o(v,{key:`${m}-notification`,message:s("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})},...e}),{elapsedTime:d}=j({isLoading:p.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...p,overtime:{elapsedTime:d}}};var Br=require("react");var Ho=Q(require("react")),Ba=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),tr=Ho.default.createContext(Ba()),os=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Ho.default.createElement(tr.Provider,{value:r},e)};var X=()=>{let e=(0,Br.useContext)(tr);return(0,Br.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var ns=require("@tanstack/react-query");var ss=({resource:e,config:t,filters:r,hasPagination:n,pagination:o,sorters:a,queryOptions:s,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:m,liveParams:P,dataProviderName:x,overtimeOptions:C})=>{let{resources:v,resource:g,identifier:U}=V(e),S=X(),h=N(),i=K(),{mutate:f}=re({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)}),R=ne(),b=z(),T=H(U,x,v),y=M(d,l),D=M(r,t==null?void 0:t.filters),L=M(a,t==null?void 0:t.sort),A=M(n,t==null?void 0:t.hasPagination),w=Xt({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:A}),E=w.mode==="server",I={meta:y,metaData:y,filters:D,hasPagination:E,pagination:w,sorters:L,config:{...t,sort:L}},F=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,B=oe(U,T,y,y),$=b({resource:g,meta:y}),{getList:W}=S(T);_e({resource:U,types:["*"],params:{meta:$,metaData:$,pagination:w,hasPagination:E,sort:L,sorters:L,filters:D,subscriptionType:"useList",...P},channel:`resources/${g.name}`,enabled:F,liveMode:c,onLiveEvent:m});let q=(0,ns.useInfiniteQuery)(B.list({filters:D,hasPagination:E,...E&&{pagination:w},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:k,pageParam:G,signal:O})=>{let J={...w,current:G};return W({resource:g.name,pagination:J,hasPagination:E,filters:D,sort:L,sorters:L,meta:{...$,queryContext:{queryKey:k,pageParam:G,signal:O}},metaData:{...$,queryContext:{queryKey:k,pageParam:G,signal:O}}}).then(({data:ue,total:Re,...at})=>({data:ue,total:Re,pagination:J,...at}))},{getNextPageParam:k=>Zt(k),getPreviousPageParam:k=>Yt(k),...s,onSuccess:k=>{var O;(O=s==null?void 0:s.onSuccess)==null||O.call(s,k);let G=typeof u=="function"?u(k,I,U):u;R(G)},onError:k=>{var O;f(k),(O=s==null?void 0:s.onError)==null||O.call(s,k);let G=typeof p=="function"?p(k,I,U):p;R(G,{key:`${U}-useInfiniteList-notification`,message:h("notifications.error",{statusCode:k.statusCode},`Error (status code: ${k.statusCode})`),description:k.message,type:"error"})}}),{elapsedTime:Y}=j({isLoading:q.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{...q,overtime:{elapsedTime:Y}}};var rr=require("react"),Rs=require("@tanstack/react-query");var Oo=Q(require("react")),je=Oo.default.createContext(void 0),as=({liveProvider:e,children:t})=>Oo.default.createElement(je.Provider,{value:e},t);var Ts=require("react");var $o=Q(require("react"));var ps=require("react");var is=require("react"),us=Q(require("lodash/isEqual")),cs=e=>{let t=(0,is.useRef)(e);return(0,us.default)(t.current,e)||(t.current=e),t.current};var Nr=(e,t)=>{let r=cs(t);return(0,ps.useMemo)(e,r)};var Ze=$o.default.createContext({resources:[]}),ds=({resources:e,children:t})=>{let r=Nr(()=>Jt(e??[]),[e]);return $o.default.createElement(Ze.Provider,{value:{resources:r}},t)};var Go=Q(require("react")),ls=Go.default.createContext("new"),ms=ls.Provider,_=()=>Go.default.useContext(ls);var gs=Q(require("react"));var Hr=Q(require("react")),fs={},Ye=(0,Hr.createContext)(fs),ys=({children:e,router:t})=>Hr.default.createElement(Ye.Provider,{value:t??fs},e);var Or=Q(require("react")),$r=()=>{let e=(0,Or.useContext)(Ye);return Or.default.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()};var le=()=>{let e=$r();return gs.default.useMemo(()=>e(),[e])};function V(e){let{resources:t}=(0,Ts.useContext)(Ze),r=_(),n=le(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=(c,m=!0)=>{let x=me(c,t,r==="legacy");if(x)return{resource:x,identifier:x.identifier??x.name};if(m){let C={name:c,identifier:c},v=C.identifier??C.name;return{resource:C,identifier:v}}},s=Wo(),{useParams:u}=te(),p=u();if(r==="legacy"){let c=o.resourceNameOrRouteName?o.resourceNameOrRouteName:p.resource,m=c?s(c):void 0,P=(o==null?void 0:o.recordItemId)??p.id,x=p.action,C=(o==null?void 0:o.resourceName)??(m==null?void 0:m.name),v=(m==null?void 0:m.identifier)??(m==null?void 0:m.name);return{resources:t,resource:m,resourceName:C,id:P,action:x,select:a,identifier:v}}let d,l=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(l){let c=me(l,t);c?d=c:d={name:l}}else n!=null&&n.resource&&(d=n.resource);return{resources:t,resource:d,resourceName:d==null?void 0:d.name,id:n.id,action:n.action,select:a,identifier:(d==null?void 0:d.identifier)??(d==null?void 0:d.name)}}var Gr=require("react");var Wo=()=>{let{resources:e}=(0,Gr.useContext)(Ze);return(0,Gr.useCallback)(r=>{let n=me(r,e,!0);return n||{name:r,route:r}},[e])};var _e=({resource:e,params:t,channel:r,types:n,enabled:o=!0,liveMode:a,onLiveEvent:s})=>{let u=(0,Rs.useQueryClient)(),{resource:p,identifier:d}=V(e),l=oe(d),c=(0,rr.useContext)(je),{liveMode:m,onLiveEvent:P}=(0,rr.useContext)(be),x=a??m;(0,rr.useEffect)(()=>{let C;return x&&x!=="off"&&o&&(C=c==null?void 0:c.subscribe({channel:r,params:{resource:p==null?void 0:p.name,...t},types:n,callback:v=>{x==="auto"&&u.invalidateQueries(l.resourceAll),s==null||s(v),P==null||P(v)}})),()=>{C&&(c==null||c.unsubscribe(C))}},[o])};var Ps=require("react");var Ko=e=>{let{liveMode:t}=(0,Ps.useContext)(be);return e??t};var Wr=require("react");var Na=({params:e,channel:t,types:r=["*"],enabled:n=!0,onLiveEvent:o})=>{let a=(0,Wr.useContext)(je);(0,Wr.useEffect)(()=>{let s;return n&&(s=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:o})),()=>{s&&(a==null||a.unsubscribe(s))}},[n])};var xs=require("react");var Ie=()=>{let e=(0,xs.useContext)(je);return e==null?void 0:e.publish};var Cs=require("react");var Ne=()=>{let{notifications:e,notificationDispatch:t}=(0,Cs.useContext)(wr);return{notifications:e,notificationDispatch:t}};var bs=require("react");var Kr=Q(require("react"));var or=(0,Kr.createContext)({}),hs=({open:e,close:t,children:r})=>Kr.default.createElement(or.Provider,{value:{open:e,close:t}},r);var he=()=>{let{open:e,close:t}=(0,bs.useContext)(or);return{open:e,close:t}};var vs=require("react");var ne=()=>{let{open:e}=he();return(0,vs.useCallback)((r,n)=>{r!==!1&&(r?e==null||e(r):n&&(e==null||e(n)))},[])};var zr=require("react");var zo=Q(require("react"));var Ae=zo.default.createContext({}),Ds=({children:e,i18nProvider:t})=>zo.default.createElement(Ae.Provider,{value:{i18nProvider:t}},e);var Ls=()=>{let{i18nProvider:e}=(0,zr.useContext)(Ae);return(0,zr.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var _r=require("react");var N=()=>{let{i18nProvider:e}=(0,_r.useContext)(Ae);return(0,_r.useMemo)(()=>{function r(n,o,a){return(e==null?void 0:e.translate(n,o,a))??a??(typeof o=="string"&&typeof a>"u"?o:n)}return r},[e])};var jr=require("react");var Es=()=>{let{i18nProvider:e}=(0,jr.useContext)(Ae);return(0,jr.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var Us=require("react");var Ms=require("export-to-csv-fix-source-map"),Ha=({resourceName:e,resource:t,sorter:r,sorters:n,filters:o,maxItemCount:a,pageSize:s=20,mapData:u=P=>P,exportOptions:p,meta:d,metaData:l,dataProviderName:c,onError:m}={})=>{let[P,x]=(0,Us.useState)(!1),C=X(),v=z(),{resource:g,resources:U,identifier:S}=V(M(t,e)),i=`${lt()(S,"plural")}-${new Date().toLocaleString()}`,{getList:f}=C(H(S,c,U)),R=v({resource:g,meta:M(d,l)});return{isLoading:P,triggerExport:async()=>{x(!0);let T=[],y=1,D=!0;for(;D;)try{let{data:A,total:w}=await f({resource:(g==null?void 0:g.name)??"",filters:o,sort:M(n,r),sorters:M(n,r),pagination:{current:y,pageSize:s,mode:"server"},meta:R,metaData:R});y++,T.push(...A),a&&T.length>=a&&(T=T.slice(0,a),D=!1),w===T.length&&(D=!1)}catch(A){x(!1),D=!1,m==null||m(A);return}new Ms.ExportToCsv({filename:i,useKeysAsHeaders:!0,...p}).generateCsv(T.map(u)),x(!1)}}};var _o=Q(require("react")),Is=Q(require("warn-once"));var Oa=({resource:e,action:t,id:r,onMutationSuccess:n,onMutationError:o,redirect:a,successNotification:s,errorNotification:u,meta:p,metaData:d,queryMeta:l,mutationMeta:c,mutationMode:m,liveMode:P,onLiveEvent:x,liveParams:C,undoableTimeout:v,dataProviderName:g,invalidates:U,queryOptions:S,createMutationOptions:h,updateMutationOptions:i,overtimeOptions:f}={})=>{let{options:R}=ie(),b=z(),{resource:T,id:y,action:D,identifier:L}=V(e),{identifier:A}=V(),E=(()=>{let Pe=r??y;return e&&e!==A?r:Pe})(),[I,F]=_o.default.useState(E);_o.default.useEffect(()=>{F(E)},[E]);let $=(()=>t||(D==="edit"||D==="clone"?D:"create"))(),W=b({resource:T,meta:M(p,d)}),{mutationMode:q}=Be(),Y=m??q,k=$==="create",G=$==="edit",O=$==="clone";(0,Is.default)((O||G)&&!!e&&!r,`[useForm]: action: "${$}", resource: "${L}", id: ${I} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let J=Fo({redirectFromProps:a,action:$,redirectOptions:R.redirect}),Re=Dt({resource:L,id:I??"",queryOptions:{enabled:I!==void 0&&(G||O),...S},liveMode:P,onLiveEvent:x,liveParams:C,meta:{...W,...l},metaData:{...W,...l},dataProviderName:g}),{isFetching:at}=Re,We=Ut({mutationOptions:h}),{mutate:no,isLoading:gt}=We,it=Ar({mutationOptions:i}),{mutate:Tt,isLoading:Rt}=it,{setWarnWhen:Pt}=bt(),xt=jo(),Ft=k||O?{formLoading:at||gt,mutationResult:We,onFinish:async Pe=>{Pt(!1);let Fe=He=>{xt({redirect:J,resource:T,id:He,meta:M(p,d)})};return Y!=="pessimistic"&&setTimeout(()=>{Fe()}),new Promise((He,Qe)=>{if(Y!=="pessimistic"&&He(),!!T)return no({values:Pe,resource:L??T.name,successNotification:s,errorNotification:u,meta:{...W,...c},metaData:{...W,...c},dataProviderName:g,invalidates:U},{onSuccess:(ke,rt,ot)=>{var lr;n&&n(ke,Pe,ot);let Ke=(lr=ke==null?void 0:ke.data)==null?void 0:lr.id;Fe(Ke),He(ke)},onError:(ke,rt,ot)=>{if(o)return o(ke,Pe,ot);Qe()}})})}}:{formLoading:at||Rt,mutationResult:it,onFinish:async Pe=>{if(Pt(!1),!T)return;let Fe={id:I??"",values:Pe,resource:L??T.name,mutationMode:Y,undoableTimeout:v,successNotification:s,errorNotification:u,meta:{...W,...c},metaData:{...W,...c},dataProviderName:g,invalidates:U},He=()=>{xt({redirect:J,resource:T,id:I,meta:M(p,d)})};return Y!=="pessimistic"&&setTimeout(()=>{He()}),new Promise((Qe,ke)=>(Y!=="pessimistic"&&Qe(),setTimeout(()=>{Tt(Fe,{onSuccess:(rt,ot,Ke)=>{n&&n(rt,Pe,Ke),Y==="pessimistic"&&He(),Qe(rt)},onError:(rt,ot,Ke)=>{if(o)return o(rt,Pe,Ke);ke()}})})))}},{elapsedTime:ut}=j({isLoading:Ft.mutationResult.isLoading||Re.isFetching,interval:f==null?void 0:f.interval,onInterval:f==null?void 0:f.onInterval});return{...Ft,queryResult:Re,id:I,setId:F,redirect:(Pe,Fe)=>{xt({redirect:Pe!==void 0?Pe:G?"list":"edit",resource:T,id:Fe??I,meta:M(p,d)})},overtime:{elapsedTime:ut}}};var ws=require("react");var jo=()=>{let{show:e,edit:t,list:r,create:n}=ce();return(0,ws.useCallback)(({redirect:a,resource:s,id:u,meta:p={}})=>{if(a&&s)return s.show&&a==="show"&&u?e(s,u,void 0,p):s.edit&&a==="edit"&&u?t(s,u,void 0,p):s.create&&a==="create"?n(s,void 0,p):r(s,"push",p)},[])};var Zr=Q(require("react")),pe=()=>{let e=(0,Zr.useContext)(Ye);return Zr.default.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])()};var Yr=Q(require("react")),Jr=()=>{let e=(0,Yr.useContext)(Ye);return Yr.default.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()};var ce=()=>{let{resources:e}=V(),t=_(),{useHistory:r}=te(),n=r(),o=le(),a=pe(),s=Jr(),u=(i,f="push")=>{t==="legacy"?n[f](i):a({to:i,type:f})},p=(i,f={})=>{var R;if(t==="legacy"){let b=typeof i=="string"?me(i,e,!0)??{name:i,route:i}:i,T=Te(b,e,!0).find(y=>y.action==="create");return T?Ce(T.route,b==null?void 0:b.meta,o,f):""}else{let b=typeof i=="string"?me(i,e)??{name:i}:i,T=(R=Te(b,e).find(y=>y.action==="create"))==null?void 0:R.route;return T?a({to:Ce(T,b==null?void 0:b.meta,o,f),type:"path"}):""}},d=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?me(i,e,!0)??{name:i,route:i}:i,D=Te(y,e,!0).find(L=>L.action==="edit");return D?Ce(D.route,y==null?void 0:y.meta,o,{...R,id:b}):""}else{let y=typeof i=="string"?me(i,e)??{name:i}:i,D=(T=Te(y,e).find(L=>L.action==="edit"))==null?void 0:T.route;return D?a({to:Ce(D,y==null?void 0:y.meta,o,{...R,id:b}),type:"path"}):""}},l=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?me(i,e,!0)??{name:i,route:i}:i,D=Te(y,e,!0).find(L=>L.action==="clone");return D?Ce(D.route,y==null?void 0:y.meta,o,{...R,id:b}):""}else{let y=typeof i=="string"?me(i,e)??{name:i}:i,D=(T=Te(y,e).find(L=>L.action==="clone"))==null?void 0:T.route;return D?a({to:Ce(D,y==null?void 0:y.meta,o,{...R,id:b}),type:"path"}):""}},c=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?me(i,e,!0)??{name:i,route:i}:i,D=Te(y,e,!0).find(L=>L.action==="show");return D?Ce(D.route,y==null?void 0:y.meta,o,{...R,id:b}):""}else{let y=typeof i=="string"?me(i,e)??{name:i}:i,D=(T=Te(y,e).find(L=>L.action==="show"))==null?void 0:T.route;return D?a({to:Ce(D,y==null?void 0:y.meta,o,{...R,id:b}),type:"path"}):""}},m=(i,f={})=>{var R;if(t==="legacy"){let b=typeof i=="string"?me(i,e,!0)??{name:i,route:i}:i,T=Te(b,e,!0).find(y=>y.action==="list");return T?Ce(T.route,b==null?void 0:b.meta,o,f):""}else{let b=typeof i=="string"?me(i,e)??{name:i}:i,T=(R=Te(b,e).find(y=>y.action==="list"))==null?void 0:R.route;return T?a({to:Ce(T,b==null?void 0:b.meta,o,f),type:"path"}):""}};return{create:(i,f="push",R={})=>{u(p(i,R),f)},createUrl:p,edit:(i,f,R="push",b={})=>{u(d(i,f,b),R)},editUrl:d,clone:(i,f,R="push",b={})=>{u(l(i,f,b),R)},cloneUrl:l,show:(i,f,R="push",b={})=>{u(c(i,f,b),R)},showUrl:c,list:(i,f="push",R={})=>{u(m(i,R),f)},listUrl:m,push:(i,...f)=>{t==="legacy"?n.push(i,...f):a({to:i,type:"push"})},replace:(i,...f)=>{t==="legacy"?n.replace(i,...f):a({to:i,type:"replace"})},goBack:()=>{t==="legacy"?n.goBack():s()}}};var Xr=Q(require("react")),Ss=Q(require("warn-once"));var $a=({resource:e,id:t,successNotification:r,errorNotification:n,meta:o,metaData:a,liveMode:s,onLiveEvent:u,dataProviderName:p,queryOptions:d,overtimeOptions:l}={})=>{let{resource:c,id:m,identifier:P}=V(e),{identifier:x}=V(),C=z(),g=(()=>{let R=t??m;return e&&e!==x?t:R})(),[U,S]=(0,Xr.useState)(g);Xr.default.useEffect(()=>{S(g)},[g]);let h=C({resource:c,meta:M(o,a)});(0,Ss.default)(!!e&&!t,`[useShow]: resource: "${P}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let i=Dt({resource:P,id:U??"",queryOptions:{enabled:U!==void 0,...d},successNotification:r,errorNotification:n,meta:h,metaData:h,liveMode:s,onLiveEvent:u,dataProviderName:p}),{elapsedTime:f}=j({isLoading:i.isFetching,interval:l==null?void 0:l.interval,onInterval:l==null?void 0:l.onInterval});return{queryResult:i,showId:U,setShowId:S,overtime:{elapsedTime:f}}};var Mt=require("react"),As=require("papaparse"),Fs=Q(require("lodash/chunk"));var Ga=({resourceName:e,resource:t,mapData:r=l=>l,paparseOptions:n,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:a,meta:s,metaData:u,onProgress:p,dataProviderName:d}={})=>{let[l,c]=(0,Mt.useState)(0),[m,P]=(0,Mt.useState)(0),[x,C]=(0,Mt.useState)(!1),{resource:v,identifier:g}=V(t??e),U=z(),S=Qr(),h=Ut(),i=U({resource:v,meta:M(s,u)}),f;o===1?f=h:f=S;let R=()=>{P(0),c(0),C(!1)},b=y=>{let D={succeeded:y.filter(L=>L.type==="success"),errored:y.filter(L=>L.type==="error")};a==null||a(D),C(!1)};(0,Mt.useEffect)(()=>{p==null||p({totalAmount:m,processedAmount:l})},[m,l]);let T=({file:y})=>(R(),new Promise(D=>{C(!0),(0,As.parse)(y,{complete:async({data:L})=>{let A=Nt(L,r);if(P(A.length),o===1){let w=A.map(I=>async()=>({response:await h.mutateAsync({resource:g??"",values:I,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:i,metaData:i}),value:I})),E=await vr(w,({response:I,value:F})=>(c(B=>B+1),{response:[I.data],type:"success",request:[F]}),(I,F)=>({response:[I],type:"error",request:[A[F]]}));D(E)}else{let w=(0,Fs.default)(A,o),E=w.map(F=>async()=>({response:await S.mutateAsync({resource:g??"",values:F,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:i,metaData:i}),value:F,currentBatchLength:F.length})),I=await vr(E,({response:F,currentBatchLength:B,value:$})=>(c(W=>W+B),{response:F.data,type:"success",request:$}),(F,B)=>({response:[F],type:"error",request:w[B]}));D(I)}},...n})}).then(D=>(b(D),D)));return{inputProps:{type:"file",accept:".csv",onChange:y=>{y.target.files&&y.target.files.length>0&&T({file:y.target.files[0]})}},mutationResult:f,isLoading:x,handleChange:T}};var nr=require("react"),Wa=({defaultVisible:e=!1}={})=>{let[t,r]=(0,nr.useState)(e),n=(0,nr.useCallback)(()=>r(!0),[t]),o=(0,nr.useCallback)(()=>r(!1),[t]);return{visible:t,show:n,close:o}};var Qs=Q(require("react"));var It=()=>{let e=_(),{resource:t,resources:r}=V(),n=le();return Qs.default.useCallback(({resource:a,action:s,meta:u})=>{var m;let p=a||t;if(!p)return;let l=(m=Te(p,r,e==="legacy").find(P=>P.action===s))==null?void 0:m.route;return l?Ce(l,p==null?void 0:p.meta,n,u):void 0},[r,t,n])};var ks=({resource:e,action:t,meta:r,legacy:n})=>It()({resource:e,action:t,meta:r,legacy:n});var qr=Q(require("react")),nt=()=>{let e=(0,qr.useContext)(Ye);return e!=null&&e.Link?e.Link:({to:r,...n})=>qr.default.createElement("a",{href:r,...n})};var Bs=require("react");var Zo=Q(require("react")),Je={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ka=Zo.default.createContext(Je),sr=Ka,Vs=({children:e,useHistory:t,useLocation:r,useParams:n,Prompt:o,Link:a,routes:s})=>Zo.default.createElement(sr.Provider,{value:{useHistory:t??Je.useHistory,useLocation:r??Je.useLocation,useParams:n??Je.useParams,Prompt:o??Je.Prompt,Link:a??Je.Link,routes:s??Je.routes}},e);var te=()=>{let e=(0,Bs.useContext)(sr),{useHistory:t,useLocation:r,useParams:n,Prompt:o,Link:a,routes:s}=e??Je;return{useHistory:t,useLocation:r,useParams:n,Prompt:o,Link:a,routes:s}};var Hs=require("@tanstack/react-query"),Os=require("react");var Yo=Q(require("react"));var Xe=Yo.default.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}});var Ns=({can:e,children:t,options:r})=>Yo.default.createElement(Xe.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t);var wt=e=>{if(!e)return;let{icon:t,list:r,edit:n,create:o,show:a,clone:s,children:u,meta:p,options:d,...l}=e,{icon:c,...m}=p??{},{icon:P,...x}=d??{};return{...l,...p?{meta:m}:{},...d?{options:x}:{}}};var Jo=({action:e,resource:t,params:r,queryOptions:n})=>{let{can:o}=(0,Os.useContext)(Xe),{resource:a,...s}=r??{},u=wt(a),p=(0,Hs.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:u},enabled:n==null?void 0:n.enabled}],()=>(o==null?void 0:o({action:e,resource:t,params:{...s,resource:u}}))??Promise.resolve({can:!0}),{enabled:typeof o<"u",...n,retry:!1});return typeof o>"u"?{data:{can:!0}}:p};var Xo=Q(require("react"));var za=()=>{let{can:e}=Xo.default.useContext(Xe);return{can:Xo.default.useMemo(()=>e?async({params:n,...o})=>{let a=n!=null&&n.resource?wt(n.resource):void 0;return e({...o,...n?{params:{...n,resource:a}}:{}})}:void 0,[e])}};var qe=require("react"),$s=Q(require("lodash/uniqBy")),Gs=Q(require("lodash/debounce")),ar=Q(require("lodash/get"));var _a=e=>{let[t,r]=(0,qe.useState)([]),[n,o]=(0,qe.useState)([]),[a,s]=(0,qe.useState)([]),{resource:u,sort:p,sorters:d,filters:l=[],optionLabel:c="title",optionValue:m="id",debounce:P=300,successNotification:x,errorNotification:C,defaultValueQueryOptions:v,queryOptions:g,fetchSize:U,pagination:S,hasPagination:h=!1,liveMode:i,defaultValue:f=[],onLiveEvent:R,onSearch:b,liveParams:T,meta:y,metaData:D,dataProviderName:L,overtimeOptions:A}=e,{resource:w,identifier:E}=V(u),F=z()({resource:w,meta:M(y,D)}),B=Array.isArray(f)?f:[f],$=(0,qe.useCallback)(J=>{s(J.data.map(ue=>({label:(0,ar.default)(ue,c),value:(0,ar.default)(ue,m)})))},[c,m]),W=v??g,q=Mr({resource:E,ids:B,queryOptions:{...W,enabled:B.length>0&&((W==null?void 0:W.enabled)??!0),onSuccess:J=>{var ue;$(J),(ue=W==null?void 0:W.onSuccess)==null||ue.call(W,J)}},meta:F,metaData:F,liveMode:"off",dataProviderName:L}),Y=(0,qe.useCallback)(J=>{o(J.data.map(ue=>({label:(0,ar.default)(ue,c),value:(0,ar.default)(ue,m)})))},[c,m]),k=vt({resource:E,sorters:M(d,p),filters:l.concat(t),pagination:{current:S==null?void 0:S.current,pageSize:(S==null?void 0:S.pageSize)??U,mode:S==null?void 0:S.mode},hasPagination:h,queryOptions:{...g,onSuccess:J=>{var ue;Y(J),(ue=g==null?void 0:g.onSuccess)==null||ue.call(g,J)}},successNotification:x,errorNotification:C,meta:F,metaData:F,liveMode:i,liveParams:T,onLiveEvent:R,dataProviderName:L}),G=J=>{if(b){r(b(J));return}if(J)r([{field:c,operator:"contains",value:J}]);else{r([]);return}},{elapsedTime:O}=j({isLoading:k.isFetching||q.isFetching,interval:A==null?void 0:A.interval,onInterval:A==null?void 0:A.onInterval});return{queryResult:k,defaultValueQueryResult:q,options:(0,qe.useMemo)(()=>(0,$s.default)([...n,...a],"value"),[n,a]),onSearch:(0,Gs.default)(G,P),overtime:{elapsedTime:O}}};var $e=Q(require("react")),qo=Q(require("qs")),ir=Q(require("lodash/differenceWith")),ur=Q(require("lodash/isEqual")),zs=Q(require("warn-once"));var Ws=[],Ks=[];function ja({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:n,initialSorter:o,permanentSorter:a=Ks,defaultSetFilterBehavior:s,initialFilter:u,permanentFilter:p=Ws,filters:d,sorters:l,syncWithLocation:c,resource:m,successNotification:P,errorNotification:x,queryOptions:C,liveMode:v,onLiveEvent:g,liveParams:U,meta:S,metaData:h,dataProviderName:i,overtimeOptions:f}={}){var sn,an,un,cn,pn;let{syncWithLocation:R}=Ur(),b=c??R,T=Ko(v),y=_(),{useLocation:D}=te(),{search:L,pathname:A}=D(),w=z(),E=le(),I=((d==null?void 0:d.mode)||"server")==="server",F=((l==null?void 0:l.mode)||"server")==="server",B=r===!1?"off":"server",$=((n==null?void 0:n.mode)??B)!=="off",W=M(n==null?void 0:n.current,e),q=M(n==null?void 0:n.pageSize,t),Y=M(S,h),{parsedCurrent:k,parsedPageSize:G,parsedSorter:O,parsedFilters:J}=Ht(L??"?"),ue=M(d==null?void 0:d.initial,u),Re=M(d==null?void 0:d.permanent,p)??Ws,at=M(l==null?void 0:l.initial,o),We=M(l==null?void 0:l.permanent,a)??Ks,no=M(d==null?void 0:d.defaultBehavior,s)??"merge",gt,it,Tt,Rt;b?(gt=((sn=E==null?void 0:E.params)==null?void 0:sn.current)||k||W||1,it=((an=E==null?void 0:E.params)==null?void 0:an.pageSize)||G||q||10,Tt=((un=E==null?void 0:E.params)==null?void 0:un.sorters)||(O.length?O:at),Rt=((cn=E==null?void 0:E.params)==null?void 0:cn.filters)||(J.length?J:ue)):(gt=W||1,it=q||10,Tt=at,Rt=ue);let{replace:Pt}=ce(),xt=pe(),{resource:on,identifier:dr}=V(m),so=w({resource:on,meta:Y});$e.default.useEffect(()=>{(0,zs.default)(typeof dr>"u","useTable: `resource` is not defined.")},[dr]);let[tt,Ft]=(0,$e.useState)(Wt(We,Tt??[])),[ut,Pe]=(0,$e.useState)(Gt(Re,Rt??[])),[Fe,He]=(0,$e.useState)(gt),[Qe,ke]=(0,$e.useState)(it),rt=({pagination:{current:ge,pageSize:Ve},sorter:mr,filters:fr})=>{if(y==="new")return xt({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...$?{current:ge,pageSize:Ve}:{},sorters:mr,filters:fr,...ot()}})??"";{let Qt=qo.default.parse(L==null?void 0:L.substring(1)),Ua=Ot({pagination:{pageSize:Ve,current:ge},sorters:tt??mr,filters:fr,...Qt});return`${A??""}?${Ua??""}`}};(0,$e.useEffect)(()=>{L===""&&(He(gt),ke(it),Ft(Wt(We,Tt??[])),Pe(Gt(Re,Rt??[])))},[L]);let ot=()=>{if(y==="new"){let{sorters:ge,filters:Ve,pageSize:mr,current:fr,...Qt}=(E==null?void 0:E.params)??{};return Qt}else{let{sorter:ge,filters:Ve,pageSize:mr,current:fr,...Qt}=qo.default.parse(L,{ignoreQueryPrefix:!0});return Qt}};(0,$e.useEffect)(()=>{if(b){let ge=ot();if(y==="new")xt({type:"replace",options:{keepQuery:!0},query:{...$?{pageSize:Qe,current:Fe}:{},sorters:(0,ir.default)(tt,We,ur.default),filters:(0,ir.default)(ut,Re,ur.default)}});else{let Ve=Ot({...$?{pagination:{pageSize:Qe,current:Fe}}:{},sorters:(0,ir.default)(tt,We,ur.default),filters:(0,ir.default)(ut,Re,ur.default),...ge});return Pt==null?void 0:Pt(`${A}?${Ve}`,void 0,{shallow:!0})}}},[b,Fe,Qe,tt,ut]);let Ke=vt({resource:dr,hasPagination:r,pagination:{current:Fe,pageSize:Qe,mode:n==null?void 0:n.mode},filters:I?pt(Re,ut):void 0,sorters:F?$t(We,tt):void 0,queryOptions:C,successNotification:P,errorNotification:x,meta:so,metaData:so,liveMode:T,liveParams:U,onLiveEvent:g,dataProviderName:i}),lr=ge=>{Pe(Ve=>pt(Re,ge,Ve))},va=ge=>{Pe(pt(Re,ge))},Da=ge=>{Pe(Ve=>pt(Re,ge(Ve)))},La=(ge,Ve=no)=>{typeof ge=="function"?Da(ge):Ve==="replace"?va(ge):lr(ge)},nn=ge=>{Ft(()=>$t(We,ge))},{elapsedTime:Ea}=j({isLoading:Ke.isFetching,interval:f==null?void 0:f.interval,onInterval:f==null?void 0:f.onInterval});return{tableQueryResult:Ke,sorters:tt,setSorters:nn,sorter:tt,setSorter:nn,filters:ut,setFilters:La,current:Fe,setCurrent:He,pageSize:Qe,setPageSize:ke,pageCount:Qe?Math.ceil((((pn=Ke.data)==null?void 0:pn.total)??0)/Qe):1,createLinkForSyncWithLocation:rt,overtime:{elapsedTime:Ea}}}var tn=require("react"),cr=require("@tanstack/react-query");var en=Q(require("react")),mt=en.default.createContext({}),_s=({create:e,get:t,update:r,children:n})=>en.default.createElement(mt.Provider,{value:{create:e,get:t,update:r}},n);var we=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,cr.useQueryClient)(),n=(0,tn.useContext)(mt),o=K(),{resources:a}=(0,tn.useContext)(Ze),{data:s,refetch:u,isLoading:p}=gr({v3LegacyAuthProviderCompatible:!!(o!=null&&o.isLegacy),queryOptions:{enabled:!!n}}),d=(0,cr.useMutation)(async c=>{var C,v,g,U,S;let m=me(c.resource,a),P=M((C=m==null?void 0:m.meta)==null?void 0:C.audit,(v=m==null?void 0:m.options)==null?void 0:v.audit,(U=(g=m==null?void 0:m.options)==null?void 0:g.auditLog)==null?void 0:U.permissions);if(P&&!Do(P,c.action))return;let x;return p&&(x=await u()),await((S=n.create)==null?void 0:S.call(n,{...c,author:s??(x==null?void 0:x.data)}))},e),l=(0,cr.useMutation)(async c=>{var m;return await((m=n.update)==null?void 0:m.call(n,c))},{onSuccess:c=>{if(c!=null&&c.resource){let m=oe(c==null?void 0:c.resource);r.invalidateQueries(m.logList())}},...t});return{log:d,rename:l}};var js=require("react"),Zs=require("@tanstack/react-query");var Za=({resource:e,action:t,meta:r,author:n,metaData:o,queryOptions:a})=>{let{get:s}=(0,js.useContext)(mt),u=oe(e,void 0,o);return(0,Zs.useQuery)(u.logList(r),()=>(s==null?void 0:s({resource:e,action:t,author:n,meta:r,metaData:o}))??Promise.resolve([]),{enabled:typeof s<"u",...a,retry:!1})};var Ys=require("react"),Js=require("@tanstack/react-query");var Se=()=>{let{resources:e}=V(),t=(0,Js.useQueryClient)();return(0,Ys.useCallback)(({resource:n,dataProviderName:o,invalidates:a,id:s})=>{if(a===!1)return;let u=oe(n,H(n,o,e));a.forEach(p=>{switch(p){case"all":t.invalidateQueries(u.all);break;case"list":t.invalidateQueries(u.list());break;case"many":t.invalidateQueries(u.many());break;case"resourceAll":t.invalidateQueries(u.resourceAll);break;case"detail":t.invalidateQueries(u.detail(s||""));break;default:break}})},[])};var Xs=require("react"),qs=Q(require("warn-once"));var Ya=({meta:e={}}={})=>{let t=_(),{i18nProvider:r}=(0,Xs.useContext)(Ae),n=le(),o=N(),{resources:a,resource:s,action:u}=V(),{options:{textTransformers:p}}=ie(),d=[];if(!(s!=null&&s.name))return{breadcrumbs:d};let l=c=>{var P,x,C,v,g,U;let m=typeof c=="string"?me(c,a,t==="legacy")??{name:c}:c;if(m){let S=M((P=m==null?void 0:m.meta)==null?void 0:P.parent,m==null?void 0:m.parentName);S&&l(S);let h=Te(m,a,t==="legacy").find(R=>R.action==="list"),i=(x=h==null?void 0:h.resource)!=null&&x.list?h==null?void 0:h.route:void 0,f=i?t==="legacy"?i:Ce(i,m==null?void 0:m.meta,n,e):void 0;d.push({label:M((C=m.meta)==null?void 0:C.label,(v=m.options)==null?void 0:v.label)??o(`${m.name}.${m.name}`,p.humanize(m.name)),href:f,icon:M((g=m.meta)==null?void 0:g.icon,(U=m.options)==null?void 0:U.icon,m.icon)})}};if(l(s),u&&u!=="list"){let c=`actions.${u}`,m=o(c);typeof r<"u"&&m===c?((0,qs.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),d.push({label:o(`buttons.${u}`,p.humanize(u))})):d.push({label:o(c,p.humanize(u))})}return{breadcrumbs:d}};var eo=Q(require("react"));var St=(e,t,r=!1)=>{let n=[],o=Me(e,t);for(;o;)n.push(o),o=Me(o,t);return n.reverse(),`/${[...n,e].map(s=>xe((r?s.route:void 0)??s.identifier??s.name)).join("/").replace(/^\//,"")}`};var ea=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(o=>{let a=[],s=Me(o,e);for(;s;)a.push(s),s=Me(s,e);a.reverse();let u=r;a.forEach(d=>{let l=(t?d.route:void 0)??d.identifier??d.name;u.children[l]||(u.children[l]={item:d,children:{}}),u=u.children[l]});let p=(t?o.route:void 0)??o.identifier??o.name;u.children[p]||(u.children[p]={item:o,children:{}})});let n=o=>{let a=[];return Object.keys(o.children).forEach(s=>{let u=St(o.children[s].item,e,t),p={...o.children[s].item,key:u,children:n(o.children[s])};a.push(p)}),a};return n(r)};var ta=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),ra=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=N(),n=It(),o=_(),{resource:a,resources:s}=V(),{pathname:u}=le(),{useLocation:p}=te(),{pathname:d}=p(),l=lt(),m=`/${((o==="legacy"?ta(d):u?ta(u):void 0)??"").replace(/^\//,"")}`,P=a?St(a,s,o==="legacy"):m??"",x=eo.default.useMemo(()=>{if(!a)return[];let g=Me(a,s),U=[St(a,s)];for(;g;)U.push(St(g,s)),g=Me(g,s);return U},[]),C=eo.default.useCallback(g=>{var S,h,i,f,R,b;if((((S=g==null?void 0:g.meta)==null?void 0:S.hide)??((h=g==null?void 0:g.options)==null?void 0:h.hide))||!(g!=null&&g.list)&&g.children.length===0)return;let U=g.list?n({resource:g,action:"list",legacy:o==="legacy",meta:e}):void 0;if(!(t&&U&&U.match(/(\/|^):(.+?)(\/|$){1}/)))return{...g,route:U,icon:M((i=g.meta)==null?void 0:i.icon,(f=g.options)==null?void 0:f.icon,g.icon),label:M((R=g==null?void 0:g.meta)==null?void 0:R.label,(b=g==null?void 0:g.options)==null?void 0:b.label)??r(`${g.name}.${g.name}`,l(g.name,"plural"))}},[o,e,r,t]),v=eo.default.useMemo(()=>{let g=ea(s,o==="legacy"),U=S=>S.flatMap(h=>{let i=U(h.children),f=C({...h,children:i});return f?[f]:[]});return U(g)},[s,o,C]);return{defaultOpenKeys:x,selectedKey:P,menuItems:v}};var z=()=>{let{params:e}=le();return({resource:r,meta:n}={})=>{let{meta:o}=wt(r)??{meta:{}},{filters:a,sorters:s,current:u,pageSize:p,...d}=e??{};return{...o,...d,...n}}};var oa=()=>{let[e,t]=(0,Ge.useState)(),r=N(),{push:n}=ce(),o=pe(),a=_(),{resource:s,action:u}=V();return(0,Ge.useEffect)(()=>{s&&u&&t(r("pages.error.info",{action:u,resource:s.name},`You may have forgotten to add the "${u}" component to "${s.name}" resource.`))},[s,u]),Ge.default.createElement(Ge.default.Fragment,null,Ge.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Ge.default.createElement("p",null,e),Ge.default.createElement("button",{onClick:()=>{a==="legacy"?n("/"):o({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};var ye=Q(require("react"));var br=()=>{let[e,t]=(0,ye.useState)(""),[r,n]=(0,ye.useState)(""),o=N(),a=K(),{mutate:s}=ht({v3LegacyAuthProviderCompatible:!!(a!=null&&a.isLegacy)});return ye.default.createElement(ye.default.Fragment,null,ye.default.createElement("h1",null,o("pages.login.title","Sign in your account")),ye.default.createElement("form",{onSubmit:u=>{u.preventDefault(),s({username:e,password:r})}},ye.default.createElement("table",null,ye.default.createElement("tbody",null,ye.default.createElement("tr",null,ye.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),ye.default.createElement("td",null,ye.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),ye.default.createElement("tr",null,ye.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),ye.default.createElement("td",null,ye.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>n(u.target.value)}))))),ye.default.createElement("br",null),ye.default.createElement("input",{type:"submit",value:"login"})))};var ft=Q(require("react"));var ee=Q(require("react"));var na=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:n,contentProps:o,wrapperProps:a,renderContent:s,formProps:u,title:p=void 0})=>{let d=_(),l=nt(),{Link:c}=te(),m=d==="legacy"?c:l,[P,x]=(0,ee.useState)(""),[C,v]=(0,ee.useState)(""),[g,U]=(0,ee.useState)(!1),S=N(),h=K(),{mutate:i}=ht({v3LegacyAuthProviderCompatible:!!(h!=null&&h.isLegacy)}),f=(T,y)=>ee.default.createElement(m,{to:T},y),R=()=>e?e.map(T=>ee.default.createElement("div",{key:T.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ee.default.createElement("button",{onClick:()=>i({providerName:T.name}),style:{display:"flex",alignItems:"center"}},T==null?void 0:T.icon,T.label??ee.default.createElement("label",null,T.label)))):null,b=ee.default.createElement("div",{...o},ee.default.createElement("h1",{style:{textAlign:"center"}},S("pages.login.title","Sign in to your account")),R(),ee.default.createElement("hr",null),ee.default.createElement("form",{onSubmit:T=>{T.preventDefault(),i({email:P,password:C,remember:g})},...u},ee.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ee.default.createElement("label",{htmlFor:"email-input"},S("pages.login.fields.email","Email")),ee.default.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:P,onChange:T=>x(T.target.value)}),ee.default.createElement("label",{htmlFor:"password-input"},S("pages.login.fields.password","Password")),ee.default.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:C,onChange:T=>v(T.target.value)}),n??ee.default.createElement(ee.default.Fragment,null,ee.default.createElement("label",{htmlFor:"remember-me-input"},S("pages.login.buttons.rememberMe","Remember me"),ee.default.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:g,value:g.toString(),onChange:()=>{U(!g)}}))),ee.default.createElement("br",null),r??f("/forgot-password",S("pages.login.buttons.forgotPassword","Forgot password?")),ee.default.createElement("input",{type:"submit",value:S("pages.login.signin","Sign in")}),t??ee.default.createElement("span",null,S("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",f("/register",S("pages.login.register","Sign up"))))));return ee.default.createElement("div",{...a},s?s(b,p):b)};var fe=Q(require("react"));var sa=({providers:e,loginLink:t,wrapperProps:r,contentProps:n,renderContent:o,formProps:a,title:s=void 0})=>{let u=_(),p=nt(),{Link:d}=te(),l=u==="legacy"?d:p,[c,m]=(0,fe.useState)(""),[P,x]=(0,fe.useState)(""),C=N(),v=K(),{mutate:g,isLoading:U}=Tr({v3LegacyAuthProviderCompatible:!!(v!=null&&v.isLegacy)}),S=(f,R)=>fe.default.createElement(l,{to:f},R),h=()=>e?e.map(f=>fe.default.createElement("div",{key:f.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},fe.default.createElement("button",{onClick:()=>g({providerName:f.name}),style:{display:"flex",alignItems:"center"}},f==null?void 0:f.icon,f.label??fe.default.createElement("label",null,f.label)))):null,i=fe.default.createElement("div",{...n},fe.default.createElement("h1",{style:{textAlign:"center"}},C("pages.register.title","Sign up for your account")),h(),fe.default.createElement("hr",null),fe.default.createElement("form",{onSubmit:f=>{f.preventDefault(),g({email:c,password:P})},...a},fe.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},fe.default.createElement("label",{htmlFor:"email-input"},C("pages.register.fields.email","Email")),fe.default.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:f=>m(f.target.value)}),fe.default.createElement("label",{htmlFor:"password-input"},C("pages.register.fields.password","Password")),fe.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:P,onChange:f=>x(f.target.value)}),fe.default.createElement("input",{type:"submit",value:C("pages.register.buttons.submit","Sign up"),disabled:U}),t??fe.default.createElement(fe.default.Fragment,null,fe.default.createElement("span",null,C("pages.login.buttons.haveAccount","Have an account?")," ",S("/login",C("pages.login.signin","Sign in")))))));return fe.default.createElement("div",{...r},o?o(i,s):i)};var ve=Q(require("react"));var aa=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:n,formProps:o,title:a=void 0})=>{let s=N(),u=_(),p=nt(),{Link:d}=te(),l=u==="legacy"?d:p,[c,m]=(0,ve.useState)(""),{mutate:P,isLoading:x}=Rr(),C=(g,U)=>ve.default.createElement(l,{to:g},U),v=ve.default.createElement("div",{...r},ve.default.createElement("h1",{style:{textAlign:"center"}},s("pages.forgotPassword.title","Forgot your password?")),ve.default.createElement("hr",null),ve.default.createElement("form",{onSubmit:g=>{g.preventDefault(),P({email:c})},...o},ve.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ve.default.createElement("label",{htmlFor:"email-input"},s("pages.forgotPassword.fields.email","Email")),ve.default.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:g=>m(g.target.value)}),ve.default.createElement("input",{type:"submit",disabled:x,value:s("pages.forgotPassword.buttons.submit","Send reset instructions")}),ve.default.createElement("br",null),e??ve.default.createElement("span",null,s("pages.register.buttons.haveAccount","Have an account? ")," ",C("/login",s("pages.login.signin","Sign in"))))));return ve.default.createElement("div",{...t},n?n(v,a):v)};var De=Q(require("react"));var ia=({wrapperProps:e,contentProps:t,renderContent:r,formProps:n,title:o=void 0})=>{let a=N(),s=K(),{mutate:u,isLoading:p}=Pr({v3LegacyAuthProviderCompatible:!!(s!=null&&s.isLegacy)}),[d,l]=(0,De.useState)(""),[c,m]=(0,De.useState)(""),P=De.default.createElement("div",{...t},De.default.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),De.default.createElement("hr",null),De.default.createElement("form",{onSubmit:x=>{x.preventDefault(),u({password:d,confirmPassword:c})},...n},De.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},De.default.createElement("label",{htmlFor:"password-input"},a("pages.updatePassword.fields.password","New Password")),De.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:d,onChange:x=>l(x.target.value)}),De.default.createElement("label",{htmlFor:"confirm-password-input"},a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),De.default.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:x=>m(x.target.value)}),De.default.createElement("input",{type:"submit",disabled:p,value:a("pages.updatePassword.buttons.submit","Update")}))));return De.default.createElement("div",{...e},r?r(P,o):P)};var ua=e=>{let{type:t}=e;return ft.default.createElement(ft.default.Fragment,null,(()=>{switch(t){case"register":return ft.default.createElement(sa,{...e});case"forgotPassword":return ft.default.createElement(aa,{...e});case"updatePassword":return ft.default.createElement(ia,{...e});default:return ft.default.createElement(na,{...e})}})())};var Le=Q(require("react")),to=()=>Le.default.createElement(Le.default.Fragment,null,Le.default.createElement("h1",null,"Welcome on board"),Le.default.createElement("p",null,"Your configuration is completed."),Le.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",Le.default.createElement("code",null,"`resources`")," property of ",Le.default.createElement("code",null,"`<Refine>`")),Le.default.createElement("div",{style:{display:"flex",gap:8}},Le.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},Le.default.createElement("button",null,"Documentation")),Le.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},Le.default.createElement("button",null,"Examples")),Le.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},Le.default.createElement("button",null,"Community"))));var Z=Q(require("react"));var Ja=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:Z.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:Z.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),Z.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:Z.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),Z.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:Z.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],ca=()=>{let e=Lr("(max-width: 1010px)"),t=Lr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",n=()=>t?"32px":e?"40px":"48px",o=()=>t?"16px":e?"20px":"24px";return Z.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},Z.default.createElement("div",{style:{height:"89px"}}),Z.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},Z.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),Z.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},Z.default.createElement("h1",{style:{fontSize:n(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),Z.default.createElement("h4",{style:{fontSize:o(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),Z.default.createElement("div",{style:{height:"64px"}}),Z.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},Ja.map(a=>Z.default.createElement(Xa,{key:`welcome-page-${a.title}`,card:a}))),Z.default.createElement("div",{style:{height:"64px"}}))},Xa=({card:e})=>{let{title:t,description:r,icon:n,link:o}=e,[a,s]=(0,Z.useState)(!1);return Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},Z.default.createElement("div",{style:{display:"flex",alignItems:"center"}},Z.default.createElement("a",{onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:o},n,Z.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),Z.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...a&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),Z.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))};var pr=require("@tanstack/react-query"),ya=require("@tanstack/react-query-devtools"),se=Q(require("react"));var da=require("react");var st=require("react");var qa="4.26.4",pa=()=>{let e=xr(),t=(0,st.useContext)(mt),r=(0,st.useContext)(je),n=(0,st.useContext)(sr),o=(0,st.useContext)(tr),{i18nProvider:a}=(0,st.useContext)(Ae),s=(0,st.useContext)(or),u=(0,st.useContext)(Xe),{resources:p}=V(),d=!!t.create||!!t.get||!!t.update,l=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!n.useHistory||!!n.Link||!!n.Prompt||!!n.useLocation||!!n.useParams,m=!!o,P=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),x=!!s.close||!!s.open,C=!!u.can;return{providers:{auth:e,auditLog:d,live:l,router:c,data:m,i18n:P,notification:x,accessControl:C},version:qa,resourceCount:p.length}};var ei=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},la=()=>{let e=pa();return(0,da.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ei(e)}`},[]),null};var ga=Q(require("warn-once"));var ma=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(o=>!t.includes(o));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};var rn=Q(require("react")),fa=e=>{let t=rn.default.useRef(!1);rn.default.useEffect(()=>{t.current===!1&&e&&ma(e)&&(t.current=!0)},[e])};var Ta=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:n,routerProvider:o,notificationProvider:a,accessControlProvider:s,auditLogProvider:u,resources:p,DashboardPage:d,ReadyPage:l,LoginPage:c,catchAll:m,children:P,liveProvider:x,i18nProvider:C,Title:v,Layout:g,Sider:U,Header:S,Footer:h,OffLayoutArea:i,onLiveEvent:f,options:R})=>{var E;let{optionsWithDefaults:b,disableTelemetryWithDefault:T,reactQueryWithDefaults:y}=Ao({options:R}),D=Nr(()=>{var I;return y.clientConfig instanceof pr.QueryClient?y.clientConfig:new pr.QueryClient({...y.clientConfig,defaultOptions:{...y.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(I=y.clientConfig.defaultOptions)==null?void 0:I.queries}}})},[y.clientConfig]),A=se.default.useMemo(()=>typeof a=="function"?a:()=>a??{},[a])();if(fa(o),n&&!o&&(p??[]).length===0)return l?se.default.createElement(l,null):se.default.createElement(to,null);let{RouterComponent:w=se.default.Fragment}=o?{}:n??{};return typeof window<"u"&&((E=window==null?void 0:window.location)==null?void 0:E.hostname)==="localhost"&&(0,ga.default)(!0,`%c
\u2705 Zero-trust security model
\u2705 User/role management
\u2705 Granular access control
\u2705 Directory sync
\u2705 VPN-less secure deployments
\u2705 Direct connection to DBs

Interested in any of the new backend features of refine? Join now and get early access -> https://s.refine.dev/go-enterprise`,"color: green; background: yellow; font-size: 17px"),se.default.createElement(pr.QueryClientProvider,{client:D},se.default.createElement(hs,{...A},se.default.createElement(mn,{...e??{},isProvided:!!e},se.default.createElement(yn,{...t??{},isProvided:!!t},se.default.createElement(os,{...r},se.default.createElement(as,{liveProvider:x},se.default.createElement(ms,{value:n&&!o?"legacy":"new"},se.default.createElement(ys,{router:o},se.default.createElement(Vs,{...n},se.default.createElement(ds,{resources:p??[]},se.default.createElement(Ds,{i18nProvider:C},se.default.createElement(Ns,{...s??{}},se.default.createElement(_s,{...u??{}},se.default.createElement(Bo,null,se.default.createElement(Qn,{mutationMode:b.mutationMode,warnWhenUnsavedChanges:b.warnWhenUnsavedChanges,syncWithLocation:b.syncWithLocation,Title:v,undoableTimeout:b.undoableTimeout,catchAll:m,DashboardPage:d,LoginPage:c,Layout:g,Sider:U,Footer:h,Header:S,OffLayoutArea:i,hasDashboard:!!d,liveMode:b.liveMode,onLiveEvent:f,options:b},se.default.createElement(Nn,null,se.default.createElement(w,null,P,!T&&se.default.createElement(la,null),se.default.createElement(ro,null))))))))))))))))),y.devtoolConfig===!1?null:se.default.createElement(ya.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...y.devtoolConfig}))};var oo=require("react");var No=({notification:e})=>{let t=N(),{notificationDispatch:r}=Ne(),{open:n}=he(),[o,a]=(0,oo.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||n==null||n({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Bt(e.seconds)},`You have ${Bt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Bt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(u)}};return(0,oo.useEffect)(()=>{s()},[e]),null};var At=Q(require("react"));var Ra=({children:e,Layout:t,Sider:r,Header:n,Title:o,Footer:a,OffLayoutArea:s})=>{let{Layout:u,Footer:p,Header:d,Sider:l,Title:c,OffLayoutArea:m}=ie();return At.default.createElement(t??u,{Sider:r??l,Header:n??d,Footer:a??p,Title:o??c,OffLayoutArea:s??m},e,At.default.createElement(ti,null))},ti=()=>{let{Prompt:e}=te(),t=N(),{warnWhen:r,setWarnWhen:n}=bt(),o=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return(0,At.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),At.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:n})};var Ue=Q(require("react"));var ri=()=>{let e=pe(),[t,r]=Ue.default.useState(void 0);return Ue.default.useEffect(()=>{t&&e(t)},[t]),Ue.default.useCallback(o=>{t||r(o)},[t])};function Pa({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:n,loading:o}){var b;let a=K(),s=_(),u=!!(a!=null&&a.isProvided),p=!!(a!=null&&a.isLegacy),d=s==="legacy",l=le(),c=pe(),m=ri(),{replace:P}=ce(),{useLocation:x}=te(),C=x(),{isLoading:v,isFetching:g,isSuccess:U,data:{authenticated:S,redirectTo:h}={},refetch:i}=Vt({v3LegacyAuthProviderCompatible:p});Ue.default.useEffect(()=>{i()},[r,n]);let f=Ue.default.useRef({status:v?"initial":"pending",content:o??null});g?f.current.status="pending":g||(f.current.status="settled");let R=u?p?U:S:!0;if(f.current.status==="settled")if(R)f.current.content=Ue.default.createElement(Ue.default.Fragment,null,r??null);else if(typeof n<"u")f.current.content=Ue.default.createElement(Ue.default.Fragment,null,n);else{let T=`${d?C==null?void 0:C.pathname:l.pathname}`.replace(/(\?.*|#.*)$/,""),y=p?typeof e=="string"?e:"/login":typeof e=="string"?e:h;if(y)if(d){let D=t?`?to=${encodeURIComponent(T)}`:"";P(`${y}${D}`)}else m({to:y,query:t?{to:(b=l.params)!=null&&b.to?l.params.to:c({to:T,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return u?Ue.default.createElement(Ue.default.Fragment,null,f.current.content):Ue.default.createElement(Ue.default.Fragment,null,r??null)}var xa=require("react");var ro=()=>{let{useLocation:e}=te(),{checkAuth:t}=ae(),r=e();return(0,xa.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var yt=Q(require("react"));var Ca=({resource:e,action:t,params:r,fallback:n,children:o,...a})=>{let{resource:s,id:u,action:p}=V(e),{identifier:d}=V(),c=(()=>{let P=(r==null?void 0:r.id)??u;return e&&e!==d?r==null?void 0:r.id:P})(),{data:m}=Jo({resource:e??(s==null?void 0:s.name),action:t??p??"",params:r??{id:c,resource:s}});return m!=null&&m.can?yt.default.isValidElement(o)?yt.default.cloneElement(o,a):yt.default.createElement(yt.default.Fragment,null,o):(m==null?void 0:m.can)===!1?yt.default.createElement(yt.default.Fragment,null,n??null):null};var et=Q(require("react"));var ha=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var ba=()=>((0,et.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),ha.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),et.default.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},et.default.createElement("div",{style:{width:"200px"}}),et.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},et.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},et.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),et.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));
//# sourceMappingURL=index.js.map