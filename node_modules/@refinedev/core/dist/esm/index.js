import kt,{useEffect as Ya,useState as Ja}from"react";import dt from"react";var to=dt.createContext({}),ro=({children:e,isProvided:t,...r})=>{let{replace:o}=ue(),n=async p=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},a=async p=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},s=async p=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,p))}catch(l){return Promise.reject(l)}},u=async p=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,p)),Promise.resolve()}catch(l){return l!=null&&l.redirectPath&&o(l.redirectPath),Promise.reject(l)}};return dt.createElement(to.Provider,{value:{...r,login:n,logout:s,checkAuth:u,register:a,isProvided:t}},e)},oo=dt.createContext({}),no=({children:e,isProvided:t,...r})=>{let o=async d=>{var l;try{return await((l=r.login)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",c),Promise.reject(c)}},n=async d=>{var l;try{return await((l=r.register)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",c),Promise.reject(c)}},a=async d=>{var l;try{return await((l=r.logout)==null?void 0:l.call(r,d))}catch(c){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",c),Promise.reject(c)}},s=async d=>{var l;try{let c=await((l=r.check)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",c),Promise.reject(c)}},u=async d=>{var l;try{let c=await((l=r.forgotPassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",c),Promise.reject(c)}},p=async d=>{var l;try{let c=await((l=r.updatePassword)==null?void 0:l.call(r,d));return Promise.resolve(c)}catch(c){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",c),Promise.reject(c)}};return dt.createElement(oo.Provider,{value:{...r,login:o,logout:a,check:s,register:n,forgotPassword:u,updatePassword:p,isProvided:t}},e)},ee=()=>dt.useContext(to),ie=()=>dt.useContext(oo);import{useQuery as so}from"@tanstack/react-query";function Bn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=ee(),{getPermissions:o}=ie(),n=so(["usePermissions"],o??(()=>Promise.resolve(void 0)),{enabled:!e&&!!o,...e?{}:t}),a=so(["usePermissions","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve(void 0)),{enabled:e&&!!r,...e?t:{}});return e?a:n}import{useQuery as ao}from"@tanstack/react-query";function dr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=ee(),{getIdentity:o}=ie(),n=ao(["getUserIdentity"],o??(()=>Promise.resolve({})),{enabled:!e&&!!o,retry:!1,...e===!0?{}:t}),a=ao(["getUserIdentity","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve({})),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?a:n}import{useMutation as io}from"@tanstack/react-query";import{useQueryClient as Nn}from"@tanstack/react-query";var lt=()=>{let e=Nn();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function Ot({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=z(),n=ce(),{push:a}=ue(),{open:s,close:u}=he(),{logout:p}=ee(),{logout:d}=ie(),l=io(["useLogout"],d,{onSuccess:async(m,P)=>{let{success:x,error:C,redirectTo:v}=m,{redirectPath:g}=P??{},U=g??v;x&&(u==null||u("useLogout-error")),(C||!x)&&(s==null||s(lr(C))),await r(),U!==!1&&(o==="legacy"?a(U??"/login"):U&&n({to:U}))},onError:m=>{s==null||s(lr(m))},...e===!0?{}:t}),c=io(["useLogout","v3LegacyAuthProviderCompatible"],p,{onSuccess:async(m,P)=>{let x=(P==null?void 0:P.redirectPath)??m;if(await r(),x!==!1){if(x){o==="legacy"?a(x):n({to:x});return}o==="legacy"?a("/login"):n({to:"/login"})}},onError:m=>{s==null||s(lr(m))},...e?t:{}});return e?c:l}var lr=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"});import Hn from"react";import{useMutation as uo}from"@tanstack/react-query";import On from"qs";function bt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=z(),n=ce(),{replace:a}=ue(),s=de(),{useLocation:u}=te(),{search:p}=u(),{close:d,open:l}=he(),{login:c}=ee(),{login:m}=ie(),P=Hn.useMemo(()=>{var v;return o==="legacy"?On.parse(p,{ignoreQueryPrefix:!0}).to:(v=s.params)==null?void 0:v.to},[o,s.params,p]),x=uo(["useLogin"],m,{onSuccess:async({success:v,redirectTo:g,error:U})=>{v&&(d==null||d("login-error")),(U||!v)&&(l==null||l(mr(U))),await r(),P&&v?o==="legacy"?a(P):n({to:P,type:"replace"}):g?o==="legacy"?a(g):n({to:g,type:"replace"}):o==="legacy"&&a("/")},onError:v=>{l==null||l(mr(v))},...e===!0?{}:t}),C=uo(["useLogin","v3LegacyAuthProviderCompatible"],c,{onSuccess:async v=>{await r(),P&&a(P),v!==!1&&!P&&(typeof v=="string"?o==="legacy"?a(v):n({to:v,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"})),d==null||d("login-error")},onError:v=>{l==null||l(mr(v))},...e?t:{}});return e?C:x}var mr=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"});import{useMutation as co}from"@tanstack/react-query";function yr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=lt(),o=z(),n=ce(),{replace:a}=ue(),{register:s}=ee(),{register:u}=ie(),{close:p,open:d}=he(),l=co(["useRegister"],u,{onSuccess:async({success:m,redirectTo:P,error:x})=>{m&&(p==null||p("register-error")),(x||!m)&&(d==null||d(fr(x))),await r(),P?o==="legacy"?a(P):n({to:P,type:"replace"}):o==="legacy"&&a("/")},onError:m=>{d==null||d(fr(m))},...e===!0?{}:t}),c=co(["useRegister","v3LegacyAuthProviderCompatible"],s,{onSuccess:async m=>{await r(),m!==!1&&(m?o==="legacy"?a(m):n({to:m,type:"replace"}):o==="legacy"?a("/"):n({to:"/",type:"replace"}),p==null||p("register-error"))},onError:m=>{d==null||d(fr(m))},...e?t:{}});return e?c:l}var fr=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"});import{useMutation as po}from"@tanstack/react-query";function Tr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=z(),o=ce(),{replace:n}=ue(),{forgotPassword:a}=ee(),{forgotPassword:s}=ie(),{close:u,open:p}=he(),d=po(["useForgotPassword"],s,{onSuccess:({success:c,redirectTo:m,error:P})=>{c&&(u==null||u("forgot-password-error")),(P||!c)&&(p==null||p(gr(P))),m&&(r==="legacy"?n(m):o({to:m,type:"replace"}))},onError:c=>{p==null||p(gr(c))},...e===!0?{}:t}),l=po(["useForgotPassword","v3LegacyAuthProviderCompatible"],a,{onSuccess:c=>{c!==!1&&c&&(r==="legacy"?n(c):o({to:c,type:"replace"})),u==null||u("forgot-password-error")},onError:c=>{p==null||p(gr(c))},...e?t:{}});return e?l:d}var gr=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"});import $n from"react";import{useMutation as lo}from"@tanstack/react-query";import Gn from"qs";function Pr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=z(),o=ce(),{replace:n}=ue(),{updatePassword:a}=ee(),{updatePassword:s}=ie(),{close:u,open:p}=he(),d=de(),{useLocation:l}=te(),{search:c}=l(),m=$n.useMemo(()=>r==="legacy"?Gn.parse(c,{ignoreQueryPrefix:!0})??{}:d.params??{},[c,d,r]),P=lo(["useUpdatePassword"],async C=>s==null?void 0:s({...m,...C}),{onSuccess:({success:C,redirectTo:v,error:g})=>{C&&(u==null||u("update-password-error")),(g||!C)&&(p==null||p(Rr(g))),v&&(r==="legacy"?n(v):o({to:v,type:"replace"}))},onError:C=>{p==null||p(Rr(C))},...e===!0?{}:t}),x=lo(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async C=>a==null?void 0:a({...m,...C}),{onSuccess:C=>{C!==!1&&C&&(r==="legacy"?n(C):o({to:C,type:"replace"})),u==null||u("update-password-error")},onError:C=>{p==null||p(Rr(C))},...e?t:{}});return e?x:P}var Rr=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"});import{useQuery as mo}from"@tanstack/react-query";function $t({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=ee(),{check:o}=ie(),n=mo(["useAuthenticated",t],async()=>await(o==null?void 0:o(t))??{},{retry:!1,enabled:!e}),a=mo(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>await(r==null?void 0:r(t))??{},{retry:!1,enabled:e});return e?a:n}var Wn=$t;import{useMutation as fo}from"@tanstack/react-query";function re({v3LegacyAuthProviderCompatible:e=!1}={}){let t=z(),r=ce(),{replace:o}=ue(),{checkError:n}=ee(),{onError:a}=ie(),{mutate:s}=Ot({v3LegacyAuthProviderCompatible:!!e}),{mutate:u}=Ot({v3LegacyAuthProviderCompatible:!!e}),p=fo(["useCheckError"],a,{onSuccess:({logout:l,redirectTo:c})=>{if(l){u({redirectPath:c});return}if(c){t==="legacy"?o(c):r({to:c,type:"replace"});return}}}),d=fo(["useCheckError","v3LegacyAuthProviderCompatible"],n,{onError:l=>{s({redirectPath:l})}});return e?d:p}var Kn=re;var xr=()=>{let{isProvided:e}=ee(),{isProvided:t}=ie();return!!(t||e)};import{useQuery as cs}from"@tanstack/react-query";var vt=e=>e/1e3;import zn from"lodash/zip";import _n from"lodash/fromPairs";var Gt=(e,t=r=>r)=>{let[r,...o]=e;return o.map(n=>_n(zn(r,n))).map((n,a,s)=>t.call(void 0,n,a,s))};import Po from"pluralize";import Cr from"qs";import yo from"lodash/unionWith";import go from"lodash/differenceWith";import jn from"warn-once";var Wt=e=>{let{current:t,pageSize:r,sorter:o,sorters:n,filters:a}=Cr.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:M(n,o)??[],parsedFilters:a??[]}},Zn=e=>{let t=Cr.stringify(e);return Wt(`/${t}`)},Kt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,sorters:n,filters:a,...s}=e;return Cr.stringify({...s,...r||{},sorters:M(n,o),filters:a},t)},To=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Ro=(e,t)=>e.field==t.field,mt=(e,t,r=[])=>(t.filter(n=>(n.operator==="or"||n.operator==="and")&&!n.key).length>1&&jn(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),yo(e,t,r,To).filter(n=>n.value!==void 0&&n.value!==null&&(n.operator!=="or"||n.operator==="or"&&n.value.length!==0)&&(n.operator!=="and"||n.operator==="and"&&n.value.length!==0))),zt=(e,t)=>yo(e,t,Ro).filter(r=>r.order!==void 0&&r.order!==null),_t=(e,t)=>[...go(t,e,To),...e],jt=(e,t)=>[...go(t,e,Ro),...e],Yn=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Jn=(e,t,r="eq")=>{let o=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:a,field:s}=n;return s===e&&a===r}});if(o)return o.value||[]};var Xn=e=>new Promise((t,r)=>{let o=new FileReader,n=()=>{o.result&&(o.removeEventListener("load",n,!1),t(o.result))};o.addEventListener("load",n,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",n,!1),r(a))});var Zt=(e="",t)=>{let r=Dt(e);return t==="singular"?Po.singular(r):Po.plural(r)};var xo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var M=(...e)=>e.find(t=>typeof t<"u");var q=(e,t,r,o)=>{let n=t||"default",a={all:[n],resourceAll:[n,e||""],list:s=>[...a.resourceAll,"list",{...s,...M(r,o)||{}}],many:s=>[...a.resourceAll,"getMany",s&&s.map(String),{...M(r,o)||{}}].filter(u=>u!==void 0),detail:s=>[...a.resourceAll,"detail",s==null?void 0:s.toString(),{...M(r,o)||{}}],logList:s=>["logList",e,s,o].filter(u=>u!==void 0)};return a};var hr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var rt=e=>e.startsWith(":");var Ne=e=>e.split("/").filter(r=>r!=="");var br=(e,t)=>{let r=Ne(e),o=Ne(t);return r.length===o.length};var Re=e=>e.replace(/^\/|\/$/g,"");var vr=(e,t)=>{let r=Re(e),o=Re(t);if(!br(r,o))return!1;let n=Ne(r);return Ne(o).every((s,u)=>rt(s)||s===n[u])};var Dr=(e,t,r)=>{let o=Re(r||""),n=`${o}${o?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`};var De=(e,t)=>{var n,a;let r=M((n=e.meta)==null?void 0:n.parent,(a=e.options)==null?void 0:a.parent,e.parentName);return r?t.find(s=>(s.identifier??s.name)===r)??{name:r}:void 0};var Lt=(e,t,r)=>{let o=[],n=De(e,t);for(;n;)o.push(n),n=De(n,t);if(o.length!==0)return`/${o.reverse().map(a=>{var u;let s=r?((u=a.options)==null?void 0:u.route)??a.name:a.name;return Re(s)}).join("/")}`};var fe=(e,t,r)=>{let o=[],n=["list","show","edit","create","clone"],a=Lt(e,t,r);return n.forEach(s=>{var d,l;let u=r&&s==="clone"?e.create:e[s],p;typeof u=="function"||r?p=Dr(r?((d=e.meta)==null?void 0:d.route)??((l=e.options)==null?void 0:l.route)??e.name:e.name,s,r?a:void 0):typeof u=="string"?p=u:typeof u=="object"&&(p=u.path),p&&o.push({action:s,resource:e,route:`/${p.replace(/^\//,"")}`})}),o};var Co=e=>{var n;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(a=>({...a,splitted:Ne(Re(a.route))})),r=((n=t[0])==null?void 0:n.splitted.length)??0,o=[...t];for(let a=0;a<r;a++){let s=o.filter(u=>!rt(u.splitted[a]));if(s.length!==0){if(s.length===1){o=s;break}o=s}}return o[0]};var Lr=(e,t)=>{let o=t.flatMap(a=>fe(a,t)).filter(a=>vr(e,a.route)),n=Co(o);return{found:!!n,resource:n==null?void 0:n.resource,action:n==null?void 0:n.action,matchedRoute:n==null?void 0:n.route}};var Yt=(e,t)=>{var n;let r,o=Lt(e,t,!0);if(o){let a=M(e.meta,e.options);r=`${o}/${(a==null?void 0:a.route)??e.name}`}else r=((n=e.options)==null?void 0:n.route)??e.name;return`/${r.replace(/^\//,"")}`};var ho=e=>{var s;let t=[],r={},o={},n,a;for(let u=0;u<e.length;u++){n=e[u];let p=n.route??((s=M(n==null?void 0:n.meta,n.options))==null?void 0:s.route)??"";r[p]=n,r[p].children=[],o[n.name]=n,o[n.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(a=r[u],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var Dt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);import vo from"react";import bo from"pluralize";import qn from"react";var Er=({children:e})=>qn.createElement("div",null,e);var be={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3},textTransformers:{humanize:Dt,plural:bo.plural,singular:bo.singular}},Ce=vo.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Er,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:be}),Do=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:n,children:a,DashboardPage:s,Title:u,Layout:p=Er,Header:d,Sider:l,Footer:c,OffLayoutArea:m,LoginPage:P=Ur,catchAll:x,liveMode:C="off",onLiveEvent:v,options:g})=>vo.createElement(Ce.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:u,undoableTimeout:n,Layout:p,Header:d,Sider:l,Footer:c,OffLayoutArea:m,DashboardPage:s,LoginPage:P,catchAll:x,liveMode:C,onLiveEvent:v,options:g}},a);var Mr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:n,reactQueryDevtoolConfig:a,syncWithLocation:s,undoableTimeout:u,warnWhenUnsavedChanges:p}={})=>{var m,P,x,C,v,g,U,S;let d={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??o??be.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??u??be.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??s??be.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??p??be.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??be.liveMode,redirect:{afterCreate:((m=e==null?void 0:e.redirect)==null?void 0:m.afterCreate)??be.redirect.afterCreate,afterClone:((P=e==null?void 0:e.redirect)==null?void 0:P.afterClone)??be.redirect.afterClone,afterEdit:((x=e==null?void 0:e.redirect)==null?void 0:x.afterEdit)??be.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??be.overtime,textTransformers:{humanize:((C=e==null?void 0:e.textTransformers)==null?void 0:C.humanize)??be.textTransformers.humanize,plural:((v=e==null?void 0:e.textTransformers)==null?void 0:v.plural)??be.textTransformers.plural,singular:((g=e==null?void 0:e.textTransformers)==null?void 0:g.singular)??be.textTransformers.singular}},l=(e==null?void 0:e.disableTelemetry)??t??!1,c={clientConfig:((U=e==null?void 0:e.reactQuery)==null?void 0:U.clientConfig)??n??{},devtoolConfig:((S=e==null?void 0:e.reactQuery)==null?void 0:S.devtoolConfig)??a??{}};return{optionsWithDefaults:d,disableTelemetryWithDefault:l,reactQueryWithDefaults:c}};var Ir=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}};var Jt=async(e,t,r)=>{let o=[];for(let[n,a]of e.entries())try{let s=await a();o.push(t(s,n))}catch(s){o.push(r(s,n))}return o};var pe=(e,t=[],r=!1)=>{if(!e)return;if(r){let n=t.find(s=>Re(s.route??"")===Re(e));return n||t.find(s=>s.name===e)}let o=t.find(n=>n.identifier===e);return o||(o=t.find(n=>n.name===e)),o};var N=(e,t,r)=>{if(t)return t;let o=pe(e,r),n=M(o==null?void 0:o.meta,o==null?void 0:o.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"};var Ge=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var Xt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/n);return o<a?Number(o)+1:void 0},qt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var er=e=>{let t=[];return e.forEach(r=>{var o,n;t.push({...r,label:((o=r.meta)==null?void 0:o.label)??((n=r.options)==null?void 0:n.label),route:Yt(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t};var Lo=e=>Ne(Re(e)).flatMap(r=>rt(r)?[r.slice(1)]:[]);var Eo=(e,t={})=>e.reduce((r,o)=>{let n=t[o];return typeof n<"u"&&(r[o]=n),r},{});var Pe=(e,t={},r={},o={})=>{let n=Lo(e),a=Eo(n,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...o});return e.replace(/:([^\/]+)/g,(s,u)=>{let p=a[u];return typeof p<"u"?`${p}`:s})};var W=()=>{let e=ee(),t=ie();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null};var Et=({hasPagination:e,pagination:t,configPagination:r}={})=>{let o=e===!1?"off":"server",n=(t==null?void 0:t.mode)??o,a=M(t==null?void 0:t.current,r==null?void 0:r.current)??1,s=M(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:a,pageSize:s,mode:n}};import{useState as es,useEffect as ts}from"react";var tr=e=>{let[t,r]=es(!1);return ts(()=>{let o=window.matchMedia(e);o.matches!==t&&r(o.matches);let n=()=>r(o.matches);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,e]),t};var rr=(e,t,r,o)=>{let n=o?e(t,o,r):e(t,r),a=r??t;return n===t||typeof n>"u"?a:n};function Uo(e,t,r,o,n){var m;let a={create:"Create new ",clone:`#${o??""} Clone `,edit:`#${o??""} Edit `,show:`#${o??""} Show `,list:""},s=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),u=(t==null?void 0:t.label)??((m=t==null?void 0:t.meta)==null?void 0:m.label)??Zt(s,r==="list"?"plural":"singular"),p=n??u,d=rr(e,"documentTitle.default","refine"),l=rr(e,"documentTitle.suffix"," | refine"),c=d;return r&&s&&(c=rr(e,`documentTitle.${s}.${r}`,`${a[r]??""}${p}${l}`,{id:o})),c}import{useContext as rs}from"react";var ke=()=>{let{mutationMode:e,undoableTimeout:t}=rs(Ce);return{mutationMode:e,undoableTimeout:t}};import{useContext as wo}from"react";import Mo,{useState as os}from"react";var wr=Mo.createContext({}),Io=({children:e})=>{let[t,r]=os(!1);return Mo.createElement(wr.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Ut=()=>{let{warnWhenUnsavedChanges:e}=wo(Ce),{warnWhen:t,setWarnWhen:r}=wo(wr);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}};import{useContext as ns}from"react";var Sr=()=>{let{syncWithLocation:e}=ns(Ce);return{syncWithLocation:e}};import{useContext as ss}from"react";var as=()=>{let{Title:e}=ss(Ce);return e};import{useContext as is}from"react";var ae=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:m,catchAll:P,options:x}=is(Ce);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:n,Title:a,hasDashboard:s,mutationMode:u,syncWithLocation:p,undoableTimeout:d,warnWhenUnsavedChanges:l,DashboardPage:c,LoginPage:m,catchAll:P,options:x}};var ft=()=>{let{options:{textTransformers:e}}=ae();return(r="",o)=>{let n=e.humanize(r);return o==="singular"?e.singular(n):e.plural(n)}};import{useEffect as So,useState as us}from"react";var _=({isLoading:e,interval:t,onInterval:r})=>{let[o,n]=us(void 0),{options:a}=ae(),{overtime:s}=a,u=t??s.interval,p=r??(s==null?void 0:s.onInterval);return So(()=>{let d;return e&&(d=setInterval(()=>{n(l=>l===void 0?u:l+u)},u)),()=>{clearInterval(d),n(void 0)}},[e,u]),So(()=>{p&&o&&p(o)},[o]),{elapsedTime:o}};var Mt=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:m,liveParams:P,dataProviderName:x,overtimeOptions:C})=>{let{resources:v,resource:g,identifier:U}=k(e),S=Y(),h=B(),i=W(),{mutate:f}=re({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)}),R=oe(),b=K(),T=N(U,x,v),y=M(d,l),D=M(r,t==null?void 0:t.filters),L=M(a,t==null?void 0:t.sort),A=M(o,t==null?void 0:t.hasPagination),w=Et({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:A}),E=w.mode==="server",I=b({resource:g,meta:y}),F={meta:I,metaData:I,filters:D,hasPagination:E,pagination:w,sorters:L,config:{...t,sort:L}},V=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,O=q(U,T,y),{getList:G}=S(T);Ye({resource:U,types:["*"],params:{meta:I,metaData:I,pagination:w,hasPagination:E,sort:L,sorters:L,filters:D,subscriptionType:"useList",...P},channel:`resources/${g==null?void 0:g.name}`,enabled:V,liveMode:c,onLiveEvent:m});let X=cs(O.list({filters:D,hasPagination:E,...E&&{pagination:w},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:Q,pageParam:$,signal:H})=>G({resource:(g==null?void 0:g.name)??"",pagination:w,hasPagination:E,filters:D,sort:L,sorters:L,meta:{...I,queryContext:{queryKey:Q,pageParam:$,signal:H}},metaData:{...I,queryContext:{queryKey:Q,pageParam:$,signal:H}}}),{...s,enabled:typeof(s==null?void 0:s.enabled)<"u"?s==null?void 0:s.enabled:!!(g!=null&&g.name),select:Q=>{var ge;let $=Q,{current:H,mode:Z,pageSize:se}=w;return Z==="client"&&($={...$,data:$.data.slice((H-1)*se,H*se),total:$.total}),s!=null&&s.select?(ge=s==null?void 0:s.select)==null?void 0:ge.call(s,$):$},onSuccess:Q=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,Q);let $=typeof u=="function"?u(Q,F,U):u;R($)},onError:Q=>{var H;f(Q),(H=s==null?void 0:s.onError)==null||H.call(s,Q);let $=typeof p=="function"?p(Q,F,U):p;R($,{key:`${U}-useList-notification`,message:h("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})}}),{elapsedTime:j}=_({isLoading:X.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{...X,overtime:{elapsedTime:j}}};import{useQuery as ps}from"@tanstack/react-query";var It=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l,overtimeOptions:c})=>{let{resources:m,resource:P,identifier:x}=k(e),C=Y(),v=B(),g=W(),{mutate:U}=re({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),S=oe(),h=K(),i=M(a,s),f=N(x,l,m),R=q(x,f,i),{getOne:b}=C(f),T=h({resource:P,meta:i});Ye({resource:x,types:["*"],channel:`resources/${P==null?void 0:P.name}`,params:{ids:t?[t]:[],id:t,meta:T,metaData:T,subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(P==null?void 0:P.name)<"u"&&typeof t<"u",liveMode:u,onLiveEvent:p});let y=ps(R.detail(t),({queryKey:L,pageParam:A,signal:w})=>b({resource:(P==null?void 0:P.name)??"",id:t,meta:{...T,queryContext:{queryKey:L,pageParam:A,signal:w}},metaData:{...T,queryContext:{queryKey:L,pageParam:A,signal:w}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:L=>{var w;(w=r==null?void 0:r.onSuccess)==null||w.call(r,L);let A=typeof o=="function"?o(L,{id:t,...T},x):o;S(A)},onError:L=>{var w;U(L),(w=r==null?void 0:r.onError)==null||w.call(r,L);let A=typeof n=="function"?n(L,{id:t,...T},x):n;S(A,{key:`${t}-${x}-getOne-notification`,message:v("notifications.error",{statusCode:L.statusCode},`Error (status code: ${L.statusCode})`),description:L.message,type:"error"})}}),{elapsedTime:D}=_({isLoading:y.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...y,overtime:{elapsedTime:D}}};import{useQuery as ds}from"@tanstack/react-query";var Ar=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:n,meta:a,metaData:s,liveMode:u,onLiveEvent:p,liveParams:d,dataProviderName:l,overtimeOptions:c})=>{let{resources:m,resource:P,identifier:x}=k(e),C=Y(),v=B(),g=W(),{mutate:U}=re({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),S=oe(),h=K(),i=M(a,s),f=N(x,l,m),R=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,b=q(x,f,i),{getMany:T,getOne:y}=C(f),D=h({resource:P,meta:i});Ye({resource:x,types:["*"],params:{ids:t,meta:D,metaData:D,subscriptionType:"useMany",...d},channel:`resources/${P.name}`,enabled:R,liveMode:u,onLiveEvent:p});let L=ds(b.many(t),({queryKey:w,pageParam:E,signal:I})=>T?T({resource:P==null?void 0:P.name,ids:t,meta:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}},metaData:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}}}):Ge(t.map(F=>y({resource:P==null?void 0:P.name,id:F,meta:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}},metaData:{...D,queryContext:{queryKey:w,pageParam:E,signal:I}}}))),{...r,onSuccess:w=>{var I;(I=r==null?void 0:r.onSuccess)==null||I.call(r,w);let E=typeof o=="function"?o(w,t,x):o;S(E)},onError:w=>{var I;U(w),(I=r==null?void 0:r.onError)==null||I.call(r,w);let E=typeof n=="function"?n(w,t,x):n;S(E,{key:`${t[0]}-${x}-getMany-notification`,message:v("notifications.error",{statusCode:w.statusCode},`Error (status code: ${w.statusCode})`),description:w.message,type:"error"})}}),{elapsedTime:A}=_({isLoading:L.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...L,overtime:{elapsedTime:A}}};import{useMutation as ys,useQueryClient as gs}from"@tanstack/react-query";import Qr,{useReducer as ls}from"react";import Fr from"lodash-es/isEqual";var or=Qr.createContext({notifications:[],notificationDispatch:()=>!1}),ms=[],fs=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!(Fr(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!(Fr(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>Fr(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},kr=({children:e})=>{let[t,r]=ls(fs,ms),o={notifications:t,notificationDispatch:r};return Qr.createElement(or.Provider,{value:o},e,typeof window<"u"&&t.map(n=>Qr.createElement(Ao,{key:`${n.id}-${n.resource}-queue`,notification:n})))};var Vr=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:o}=k(),n=gs(),a=Y(),{mutationMode:s,undoableTimeout:u}=ke(),p=B(),d=W(),{mutate:l}=re({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),c=we(),{log:m}=Se(),{notificationDispatch:P}=He(),x=oe(),C=Ae(),v=K(),{options:{textTransformers:g}}=ae(),U=ys(({id:h,values:i,resource:f,mutationMode:R,undoableTimeout:b,onCancel:T,meta:y,metaData:D,dataProviderName:L})=>{let{resource:A,identifier:w}=o(f),E=v({resource:A,meta:M(y,D)}),I=R??s,F=b??u;return I!=="undoable"?a(N(w,L,r)).update({resource:A.name,id:h,variables:i,meta:E,metaData:E}):new Promise((O,G)=>{let X=()=>{a(N(w,L,r)).update({resource:A.name,id:h,variables:i,meta:E,metaData:E}).then(Q=>O(Q)).catch(Q=>G(Q))},j=()=>{G({message:"mutationCancelled"})};T&&T(j),P({type:"ADD",payload:{id:h,resource:w,cancelMutation:j,doMutation:X,seconds:F,isSilent:!!T}})})},{onMutate:async({resource:h,id:i,mutationMode:f,values:R,dataProviderName:b,meta:T,metaData:y})=>{let{identifier:D}=o(h),L=M(T,y),A=q(D,N(D,b,r),L),w=n.getQueriesData(A.resourceAll),E=f??s;return await n.cancelQueries(A.resourceAll,void 0,{silent:!0}),E!=="pessimistic"&&(n.setQueriesData(A.list(),I=>{if(!I)return null;let F=I.data.map(V=>{var O;return((O=V.id)==null?void 0:O.toString())===(i==null?void 0:i.toString())?{id:i,...V,...R}:V});return{...I,data:F}}),n.setQueriesData(A.many(),I=>{if(!I)return null;let F=I.data.map(V=>{var O;return((O=V.id)==null?void 0:O.toString())===(i==null?void 0:i.toString())&&(V={id:i,...V,...R}),V});return{...I,data:F}}),n.setQueriesData(A.detail(i),I=>I?{...I,data:{...I.data,...R}}:null)),{previousQueries:w,queryKey:A}},onSettled:(h,i,{id:f,resource:R,dataProviderName:b,invalidates:T=["list","many","detail"]})=>{let{identifier:y}=o(R);C({resource:y,dataProviderName:N(y,b,r),invalidates:T,id:f}),P({type:"REMOVE",payload:{id:f,resource:y}})},onSuccess:(h,{id:i,resource:f,successNotification:R,dataProviderName:b,values:T,meta:y,metaData:D},L)=>{var j;let{resource:A,identifier:w}=o(f),E=g.singular(w),I=typeof R=="function"?R(h,{id:i,values:T},w):R;x(I,{key:`${i}-${w}-notification`,description:p("notifications.success","Successful"),message:p("notifications.editSuccess",{resource:p(`${w}.${w}`,E)},`Successfully updated ${E}`),type:"success"}),c==null||c({channel:`resources/${A.name}`,type:"updated",payload:{ids:(j=h.data)!=null&&j.id?[h.data.id]:void 0},date:new Date});let F;if(L){let Q=n.getQueryData(L.queryKey.detail(i));F=Object.keys(T||{}).reduce(($,H)=>{var Z;return $[H]=(Z=Q==null?void 0:Q.data)==null?void 0:Z[H],$},{})}let{fields:V,operation:O,variables:G,...X}=M(y,D)||{};m==null||m.mutate({action:"update",resource:A.name,data:T,previousData:F,meta:{id:i,dataProviderName:N(w,b,r),...X}})},onError:(h,{id:i,resource:f,errorNotification:R,values:b},T)=>{let{identifier:y}=o(f);if(T)for(let D of T.previousQueries)n.setQueryData(D[0],D[1]);if(h.message!=="mutationCancelled"){l==null||l(h);let D=g.singular(y),L=typeof R=="function"?R(h,{id:i,values:b},y):R;x(L,{key:`${i}-${y}-notification`,message:p("notifications.editError",{resource:p(`${y}.${y}`,D),statusCode:h.statusCode},`Error when updating ${D} (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=_({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};import{useMutation as Ts}from"@tanstack/react-query";var wt=({mutationOptions:e,overtimeOptions:t}={})=>{let r=W(),{mutate:o}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=Y(),a=Ae(),{resources:s,select:u}=k(),p=B(),d=we(),{log:l}=Se(),c=oe(),m=K(),{options:{textTransformers:P}}=ae(),x=Ts(({resource:v,values:g,meta:U,metaData:S,dataProviderName:h})=>{let{resource:i,identifier:f}=u(v),R=m({resource:i,meta:M(U,S)});return n(N(f,h,s)).create({resource:i.name,variables:g,meta:R,metaData:R})},{onSuccess:(v,{resource:g,successNotification:U,dataProviderName:S,invalidates:h=["list","many"],values:i,meta:f,metaData:R})=>{var F,V;let{resource:b,identifier:T}=u(g),y=P.singular(T),D=typeof U=="function"?U(v,i,T):U;c(D,{key:`create-${T}-notification`,message:p("notifications.createSuccess",{resource:p(`${T}.${T}`,y)},`Successfully created ${y}`),description:p("notifications.success","Success"),type:"success"}),a({resource:T,dataProviderName:N(T,S,s),invalidates:h}),d==null||d({channel:`resources/${b.name}`,type:"created",payload:{ids:(F=v==null?void 0:v.data)!=null&&F.id?[v.data.id]:void 0},date:new Date});let L=m({resource:b,meta:M(f,R)}),{fields:A,operation:w,variables:E,...I}=L||{};l==null||l.mutate({action:"create",resource:b.name,data:i,meta:{dataProviderName:N(T,S,s),id:((V=v==null?void 0:v.data)==null?void 0:V.id)??void 0,...I}})},onError:(v,{resource:g,errorNotification:U,values:S})=>{o(v);let{identifier:h}=u(g),i=P.singular(h),f=typeof U=="function"?U(v,S,h):U;c(f,{key:`create-${h}-notification`,description:v.message,message:p("notifications.createError",{resource:p(`${h}.${h}`,i),statusCode:v.statusCode},`There was an error creating ${i} (status code: ${v.statusCode})`),type:"error"})},...e}),{elapsedTime:C}=_({isLoading:x.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...x,overtime:{elapsedTime:C}}};import{useQueryClient as Rs,useMutation as Ps}from"@tanstack/react-query";var xs=({mutationOptions:e,overtimeOptions:t}={})=>{let r=W(),{mutate:o}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=Y(),{resources:a,select:s}=k(),u=Rs(),{mutationMode:p,undoableTimeout:d}=ke(),{notificationDispatch:l}=He(),c=B(),m=we(),{log:P}=Se(),x=oe(),C=Ae(),v=K(),{options:{textTransformers:g}}=ae(),U=Ps(({id:h,mutationMode:i,undoableTimeout:f,resource:R,onCancel:b,meta:T,metaData:y,dataProviderName:D,values:L})=>{let{resource:A,identifier:w}=s(R),E=v({resource:A,meta:M(T,y)}),I=i??p,F=f??d;return I!=="undoable"?n(N(w,D,a)).deleteOne({resource:A.name,id:h,meta:E,metaData:E,variables:L}):new Promise((O,G)=>{let X=()=>{n(N(w,D,a)).deleteOne({resource:A.name,id:h,meta:E,metaData:E,variables:L}).then(Q=>O(Q)).catch(Q=>G(Q))},j=()=>{G({message:"mutationCancelled"})};b&&b(j),l({type:"ADD",payload:{id:h,resource:w,cancelMutation:j,doMutation:X,seconds:F,isSilent:!!b}})})},{onMutate:async({id:h,resource:i,mutationMode:f,dataProviderName:R,meta:b,metaData:T})=>{let{identifier:y}=s(i),D=M(b,T),L=q(y,N(y,R,a),D),A=f??p;await u.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=u.getQueriesData(L.resourceAll);return A!=="pessimistic"&&(u.setQueriesData(L.list(),E=>E?{data:E.data.filter(F=>{var V;return((V=F.id)==null?void 0:V.toString())!==h.toString()}),total:E.total-1}:null),u.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.filter(F=>{var V;return((V=F.id)==null?void 0:V.toString())!==(h==null?void 0:h.toString())});return{...E,data:I}})),{previousQueries:w,queryKey:L}},onSettled:(h,i,{id:f,resource:R,dataProviderName:b,invalidates:T=["list","many"]})=>{let{identifier:y}=s(R);C({resource:y,dataProviderName:N(y,b,a),invalidates:T}),l({type:"REMOVE",payload:{id:f,resource:y}})},onSuccess:(h,{id:i,resource:f,successNotification:R,dataProviderName:b,meta:T,metaData:y},D)=>{let{resource:L,identifier:A}=s(f),w=g.singular(A);u.removeQueries(D==null?void 0:D.queryKey.detail(i));let E=typeof R=="function"?R(h,i,A):R;x(E,{key:`${i}-${A}-notification`,description:c("notifications.success","Success"),message:c("notifications.deleteSuccess",{resource:c(`${A}.${A}`,w)},`Successfully deleted a ${w}`),type:"success"}),m==null||m({channel:`resources/${L.name}`,type:"deleted",payload:{ids:[i]},date:new Date});let I=v({resource:L,meta:M(T,y)}),{fields:F,operation:V,variables:O,...G}=I||{};P==null||P.mutate({action:"delete",resource:L.name,meta:{id:i,dataProviderName:N(A,b,a),...G}}),u.removeQueries(D==null?void 0:D.queryKey.detail(i))},onError:(h,{id:i,resource:f,errorNotification:R},b)=>{let{identifier:T}=s(f);if(b)for(let y of b.previousQueries)u.setQueryData(y[0],y[1]);if(h.message!=="mutationCancelled"){o(h);let y=g.singular(T),D=typeof R=="function"?R(h,i,T):R;x(D,{key:`${i}-${T}-notification`,message:c("notifications.deleteError",{resource:y,statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=_({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};import{useMutation as Cs}from"@tanstack/react-query";var Br=({mutationOptions:e,overtimeOptions:t}={})=>{let r=Y(),{resources:o,select:n}=k(),a=B(),s=we(),u=oe(),p=Ae(),{log:d}=Se(),l=K(),{options:{textTransformers:c}}=ae(),m=Cs(({resource:x,values:C,meta:v,metaData:g,dataProviderName:U})=>{let{resource:S,identifier:h}=n(x),i=l({resource:S,meta:M(v,g)}),f=r(N(h,U,o));return f.createMany?f.createMany({resource:S.name,variables:C,meta:i,metaData:i}):Ge(C.map(R=>f.create({resource:S.name,variables:R,meta:i,metaData:i})))},{onSuccess:(x,{resource:C,successNotification:v,dataProviderName:g,invalidates:U=["list","many"],values:S,meta:h,metaData:i})=>{let{resource:f,identifier:R}=n(C),b=c.plural(R),T=typeof v=="function"?v(x,S,R):v;u(T,{key:`createMany-${R}-notification`,message:a("notifications.createSuccess",{resource:a(`${R}.${R}`,R)},`Successfully created ${b}`),description:a("notifications.success","Success"),type:"success"}),p({resource:R,dataProviderName:N(R,g,o),invalidates:U});let y=x==null?void 0:x.data.filter(I=>(I==null?void 0:I.id)!==void 0).map(I=>I.id);s==null||s({channel:`resources/${f.name}`,type:"created",payload:{ids:y},date:new Date});let D=l({resource:f,meta:M(h,i)}),{fields:L,operation:A,variables:w,...E}=D||{};d==null||d.mutate({action:"createMany",resource:f.name,data:S,meta:{dataProviderName:N(R,g,o),ids:y,...E}})},onError:(x,{resource:C,errorNotification:v,values:g})=>{let{identifier:U}=n(C),S=typeof v=="function"?v(x,g,U):v;u(S,{key:`createMany-${U}-notification`,description:x.message,message:a("notifications.createError",{resource:a(`${U}.${U}`,U),statusCode:x.statusCode},`There was an error creating ${U} (status code: ${x.statusCode}`),type:"error"})},...e}),{elapsedTime:P}=_({isLoading:m.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...m,overtime:{elapsedTime:P}}};import{useMutation as hs,useQueryClient as bs}from"@tanstack/react-query";var vs=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:o}=k(),n=bs(),a=Y(),s=B(),{mutationMode:u,undoableTimeout:p}=ke(),d=W(),{mutate:l}=re({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),{notificationDispatch:c}=He(),m=we(),P=oe(),x=Ae(),{log:C}=Se(),v=K(),{options:{textTransformers:g}}=ae(),U=hs(({ids:h,values:i,resource:f,onCancel:R,mutationMode:b,undoableTimeout:T,meta:y,metaData:D,dataProviderName:L})=>{let{resource:A,identifier:w}=o(f),E=v({resource:A,meta:M(y,D)}),I=b??u,F=T??p,V=a(N(w,L,r)),O=()=>V.updateMany?V.updateMany({resource:A.name,ids:h,variables:i,meta:E,metaData:E}):Ge(h.map(X=>V.update({resource:A.name,id:X,variables:i,meta:E,metaData:E})));return I!=="undoable"?O():new Promise((X,j)=>{let Q=()=>{O().then(H=>X(H)).catch(H=>j(H))},$=()=>{j({message:"mutationCancelled"})};R&&R($),c({type:"ADD",payload:{id:h,resource:w,cancelMutation:$,doMutation:Q,seconds:F,isSilent:!!R}})})},{onMutate:async({resource:h,ids:i,values:f,mutationMode:R,dataProviderName:b,meta:T,metaData:y})=>{let{identifier:D}=o(h),L=q(D,N(D,b,r),M(T,y)),A=R??u;await n.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=n.getQueriesData(L.resourceAll);if(A!=="pessimistic"){n.setQueriesData(L.list(),E=>{if(!E)return null;let I=E.data.map(F=>F.id!==void 0&&i.filter(V=>V!==void 0).map(String).includes(F.id.toString())?{...F,...f}:F);return{...E,data:I}}),n.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.map(F=>F.id!==void 0&&i.filter(V=>V!==void 0).map(String).includes(F.id.toString())?{...F,...f}:F);return{...E,data:I}});for(let E of i)n.setQueriesData(L.detail(E),I=>{if(!I)return null;let F={...I.data,...f};return{...I,data:F}})}return{previousQueries:w,queryKey:L}},onSettled:(h,i,{ids:f,resource:R,dataProviderName:b})=>{let{identifier:T}=o(R);x({resource:T,invalidates:["list","many"],dataProviderName:N(T,b,r)}),f.forEach(y=>x({resource:T,invalidates:["detail"],dataProviderName:N(T,b,r),id:y})),c({type:"REMOVE",payload:{id:f,resource:T}})},onSuccess:(h,{ids:i,resource:f,meta:R,metaData:b,dataProviderName:T,successNotification:y,values:D},L)=>{let{resource:A,identifier:w}=o(f),E=g.singular(w),I=typeof y=="function"?y(h,{ids:i,values:D},w):y;P(I,{key:`${i}-${w}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${w}.${w}`,w)},`Successfully updated ${E}`),type:"success"}),m==null||m({channel:`resources/${A.name}`,type:"updated",payload:{ids:i.map(String)},date:new Date});let F=[];L&&i.forEach(Q=>{let $=n.getQueryData(L.queryKey.detail(Q));F.push(Object.keys(D||{}).reduce((H,Z)=>{var se;return H[Z]=(se=$==null?void 0:$.data)==null?void 0:se[Z],H},{}))});let V=v({resource:A,meta:M(R,b)}),{fields:O,operation:G,variables:X,...j}=V||{};C==null||C.mutate({action:"updateMany",resource:A.name,data:D,previousData:F,meta:{ids:i,dataProviderName:N(w,T,r),...j}})},onError:(h,{ids:i,resource:f,errorNotification:R,values:b},T)=>{let{identifier:y}=o(f);if(T)for(let D of T.previousQueries)n.setQueryData(D[0],D[1]);if(h.message!=="mutationCancelled"){l==null||l(h);let D=g.singular(y),L=typeof R=="function"?R(h,{ids:i,values:b},y):R;P(L,{key:`${i}-${y}-updateMany-error-notification`,message:s("notifications.editError",{resource:D,statusCode:h.statusCode},`Error when updating ${D} (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=_({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};import{useQueryClient as Ds,useMutation as Ls}from"@tanstack/react-query";var Es=({mutationOptions:e,overtimeOptions:t}={})=>{let r=W(),{mutate:o}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:n,undoableTimeout:a}=ke(),s=Y(),{notificationDispatch:u}=He(),p=B(),d=we(),l=oe(),c=Ae(),{log:m}=Se(),{resources:P,select:x}=k(),C=Ds(),v=K(),{options:{textTransformers:g}}=ae(),U=Ls(({resource:h,ids:i,mutationMode:f,undoableTimeout:R,onCancel:b,meta:T,metaData:y,dataProviderName:D,values:L})=>{let{resource:A,identifier:w}=x(h),E=v({resource:A,meta:M(T,y)}),I=f??n,F=R??a,V=s(N(w,D,P)),O=()=>V.deleteMany?V.deleteMany({resource:A.name,ids:i,meta:E,metaData:E,variables:L}):Ge(i.map(X=>V.deleteOne({resource:A.name,id:X,meta:E,metaData:E,variables:L})));return I!=="undoable"?O():new Promise((X,j)=>{let Q=()=>{O().then(H=>X(H)).catch(H=>j(H))},$=()=>{j({message:"mutationCancelled"})};b&&b($),u({type:"ADD",payload:{id:i,resource:w,cancelMutation:$,doMutation:Q,seconds:F,isSilent:!!b}})})},{onMutate:async({ids:h,resource:i,mutationMode:f,dataProviderName:R,meta:b,metaData:T})=>{let{identifier:y}=x(i),D=M(b,T),L=q(y,N(y,R,P),D),A=f??n;await C.cancelQueries(L.resourceAll,void 0,{silent:!0});let w=C.getQueriesData(L.resourceAll);if(A!=="pessimistic"){C.setQueriesData(L.list(),E=>E?{data:E.data.filter(F=>F.id&&!h.map(String).includes(F.id.toString())),total:E.total-1}:null),C.setQueriesData(L.many(),E=>{if(!E)return null;let I=E.data.filter(F=>F.id?!h.map(String).includes(F.id.toString()):!1);return{...E,data:I}});for(let E of h)C.setQueriesData(L.detail(E),I=>!I||I.data.id==E?null:{...I})}return{previousQueries:w,queryKey:L}},onSettled:(h,i,{resource:f,ids:R,dataProviderName:b,invalidates:T=["list","many"]})=>{let{identifier:y}=x(f);c({resource:y,dataProviderName:N(y,b,P),invalidates:T}),u({type:"REMOVE",payload:{id:R,resource:y}})},onSuccess:(h,{ids:i,resource:f,meta:R,metaData:b,dataProviderName:T,successNotification:y},D)=>{let{resource:L,identifier:A}=x(f);i.forEach(G=>C.removeQueries(D==null?void 0:D.queryKey.detail(G)));let w=typeof y=="function"?y(h,i,A):y;l(w,{key:`${i}-${A}-notification`,description:p("notifications.success","Success"),message:p("notifications.deleteSuccess",{resource:p(`${A}.${A}`,A)},`Successfully deleted ${A}`),type:"success"}),d==null||d({channel:`resources/${L.name}`,type:"deleted",payload:{ids:i},date:new Date});let E=v({resource:L,meta:M(R,b)}),{fields:I,operation:F,variables:V,...O}=E||{};m==null||m.mutate({action:"deleteMany",resource:L.name,meta:{ids:i,dataProviderName:N(A,T,P),...O}}),i.forEach(G=>C.removeQueries(D==null?void 0:D.queryKey.detail(G)))},onError:(h,{ids:i,resource:f,errorNotification:R},b)=>{let{identifier:T}=x(f);if(b)for(let y of b.previousQueries)C.setQueryData(y[0],y[1]);if(h.message!=="mutationCancelled"){o(h);let y=g.singular(T),D=typeof R=="function"?R(h,i,T):R;l(D,{key:`${i}-${T}-notification`,message:p("notifications.deleteError",{resource:y,statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}},...e}),{elapsedTime:S}=_({isLoading:U.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...U,overtime:{elapsedTime:S}}};var Us=e=>{var n;let t=Y(),{resource:r}=k(),{getApiUrl:o}=t(e??((n=M(r==null?void 0:r.meta,r==null?void 0:r.options))==null?void 0:n.dataProviderName));return o()};import{useQuery as Ms}from"@tanstack/react-query";var Is=({url:e,method:t,config:r,queryOptions:o,successNotification:n,errorNotification:a,meta:s,metaData:u,dataProviderName:p,overtimeOptions:d})=>{let l=Y(),c=W(),{mutate:m}=re({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),P=B(),x=oe(),C=K(),v=M(s,u),{custom:g}=l(p),U=C({meta:v});if(g){let S=Ms({queryKey:[p,"custom",t,e,{...r,...v||{}}],queryFn:({queryKey:i,pageParam:f,signal:R})=>g({url:e,method:t,...r,meta:{...U,queryContext:{queryKey:i,pageParam:f,signal:R}},metaData:{...U,queryContext:{queryKey:i,pageParam:f,signal:R}}}),...o,onSuccess:i=>{var R;(R=o==null?void 0:o.onSuccess)==null||R.call(o,i);let f=typeof n=="function"?n(i,{...r,...U}):n;x(f)},onError:i=>{var R;m(i),(R=o==null?void 0:o.onError)==null||R.call(o,i);let f=typeof a=="function"?a(i,{...r,...U}):a;x(f,{key:`${t}-notification`,message:P("notifications.error",{statusCode:i.statusCode},`Error (status code: ${i.statusCode})`),description:i.message,type:"error"})}}),{elapsedTime:h}=_({isLoading:S.isFetching,interval:d==null?void 0:d.interval,onInterval:d==null?void 0:d.onInterval});return{...S,overtime:{elapsedTime:h}}}else throw Error("Not implemented custom on data provider.")};import{useMutation as ws}from"@tanstack/react-query";var Ss=({mutationOptions:e,overtimeOptions:t}={})=>{let r=W(),{mutate:o}=re({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=oe(),a=Y(),s=B(),u=K(),p=ws(({url:l,method:c,values:m,meta:P,metaData:x,dataProviderName:C,config:v})=>{let g=u({meta:M(P,x)}),{custom:U}=a(C);if(U)return U({url:l,method:c,payload:m,meta:g,metaData:g,headers:{...v==null?void 0:v.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(l,{successNotification:c,config:m,meta:P,metaData:x})=>{let C=typeof c=="function"?c(l,{...m,...M(P,x)||{}}):c;n(C)},onError:(l,{errorNotification:c,method:m,config:P,meta:x,metaData:C})=>{o(l);let v=typeof c=="function"?c(l,{...P,...M(x,C)||{}}):c;n(v,{key:`${m}-notification`,message:s("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})},...e}),{elapsedTime:d}=_({isLoading:p.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...p,overtime:{elapsedTime:d}}};import{useCallback as Fs,useContext as Qs}from"react";import Fo from"react";var As=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),St=Fo.createContext(As()),Qo=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Fo.createElement(St.Provider,{value:r},e)};var Y=()=>{let e=Qs(St);return Fs(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};import{useInfiniteQuery as ks}from"@tanstack/react-query";var Vs=({resource:e,config:t,filters:r,hasPagination:o,pagination:n,sorters:a,queryOptions:s,successNotification:u,errorNotification:p,meta:d,metaData:l,liveMode:c,onLiveEvent:m,liveParams:P,dataProviderName:x,overtimeOptions:C})=>{let{resources:v,resource:g,identifier:U}=k(e),S=Y(),h=B(),i=W(),{mutate:f}=re({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)}),R=oe(),b=K(),T=N(U,x,v),y=M(d,l),D=M(r,t==null?void 0:t.filters),L=M(a,t==null?void 0:t.sort),A=M(o,t==null?void 0:t.hasPagination),w=Et({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:A}),E=w.mode==="server",I={meta:y,metaData:y,filters:D,hasPagination:E,pagination:w,sorters:L,config:{...t,sort:L}},F=(s==null?void 0:s.enabled)===void 0||(s==null?void 0:s.enabled)===!0,V=q(U,T,y,y),O=b({resource:g,meta:y}),{getList:G}=S(T);Ye({resource:U,types:["*"],params:{meta:O,metaData:O,pagination:w,hasPagination:E,sort:L,sorters:L,filters:D,subscriptionType:"useList",...P},channel:`resources/${g.name}`,enabled:F,liveMode:c,onLiveEvent:m});let X=ks(V.list({filters:D,hasPagination:E,...E&&{pagination:w},...a&&{sorters:a},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:Q,pageParam:$,signal:H})=>{let Z={...w,current:$};return G({resource:g.name,pagination:Z,hasPagination:E,filters:D,sort:L,sorters:L,meta:{...O,queryContext:{queryKey:Q,pageParam:$,signal:H}},metaData:{...O,queryContext:{queryKey:Q,pageParam:$,signal:H}}}).then(({data:se,total:ge,...qe})=>({data:se,total:ge,pagination:Z,...qe}))},{getNextPageParam:Q=>Xt(Q),getPreviousPageParam:Q=>qt(Q),...s,onSuccess:Q=>{var H;(H=s==null?void 0:s.onSuccess)==null||H.call(s,Q);let $=typeof u=="function"?u(Q,I,U):u;R($)},onError:Q=>{var H;f(Q),(H=s==null?void 0:s.onError)==null||H.call(s,Q);let $=typeof p=="function"?p(Q,I,U):p;R($,{key:`${U}-useInfiniteList-notification`,message:h("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})}}),{elapsedTime:j}=_({isLoading:X.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{...X,overtime:{elapsedTime:j}}};import{useContext as _o,useEffect as Zs}from"react";import{useQueryClient as Ys}from"@tanstack/react-query";import ko from"react";var We=ko.createContext(void 0),Vo=({liveProvider:e,children:t})=>ko.createElement(We.Provider,{value:e},t);import{useContext as zs}from"react";import No from"react";import{useMemo as Hs}from"react";import{useRef as Bs}from"react";import Ns from"lodash-es/isEqual";var Bo=e=>{let t=Bs(e);return Ns(t.current,e)||(t.current=e),t.current};var nr=(e,t)=>{let r=Bo(t);return Hs(e,r)};var Je=No.createContext({resources:[]}),Ho=({resources:e,children:t})=>{let r=nr(()=>er(e??[]),[e]);return No.createElement(Je.Provider,{value:{resources:r}},t)};import Oo from"react";var $o=Oo.createContext("new"),Go=$o.Provider,z=()=>Oo.useContext($o);import Ks from"react";import Os,{createContext as $s}from"react";var Wo={},Ke=$s(Wo),Ko=({children:e,router:t})=>Os.createElement(Ke.Provider,{value:t??Wo},e);import Gs,{useContext as Ws}from"react";var Nr=()=>{let e=Ws(Ke);return Gs.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()};var de=()=>{let e=Nr();return Ks.useMemo(()=>e(),[e])};function k(e){let{resources:t}=zs(Je),r=z(),o=de(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},a=(c,m=!0)=>{let x=pe(c,t,r==="legacy");if(x)return{resource:x,identifier:x.identifier??x.name};if(m){let C={name:c,identifier:c},v=C.identifier??C.name;return{resource:C,identifier:v}}},s=zo(),{useParams:u}=te(),p=u();if(r==="legacy"){let c=n.resourceNameOrRouteName?n.resourceNameOrRouteName:p.resource,m=c?s(c):void 0,P=(n==null?void 0:n.recordItemId)??p.id,x=p.action,C=(n==null?void 0:n.resourceName)??(m==null?void 0:m.name),v=(m==null?void 0:m.identifier)??(m==null?void 0:m.name);return{resources:t,resource:m,resourceName:C,id:P,action:x,select:a,identifier:v}}let d,l=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(l){let c=pe(l,t);c?d=c:d={name:l}}else o!=null&&o.resource&&(d=o.resource);return{resources:t,resource:d,resourceName:d==null?void 0:d.name,id:o.id,action:o.action,select:a,identifier:(d==null?void 0:d.identifier)??(d==null?void 0:d.name)}}import{useContext as _s,useCallback as js}from"react";var zo=()=>{let{resources:e}=_s(Je);return js(r=>{let o=pe(r,e,!0);return o||{name:r,route:r}},[e])};var Ye=({resource:e,params:t,channel:r,types:o,enabled:n=!0,liveMode:a,onLiveEvent:s})=>{let u=Ys(),{resource:p,identifier:d}=k(e),l=q(d),c=_o(We),{liveMode:m,onLiveEvent:P}=_o(Ce),x=a??m;Zs(()=>{let C;return x&&x!=="off"&&n&&(C=c==null?void 0:c.subscribe({channel:r,params:{resource:p==null?void 0:p.name,...t},types:o,callback:v=>{x==="auto"&&u.invalidateQueries(l.resourceAll),s==null||s(v),P==null||P(v)}})),()=>{C&&(c==null||c.unsubscribe(C))}},[n])};import{useContext as Js}from"react";var jo=e=>{let{liveMode:t}=Js(Ce);return e??t};import{useContext as Xs,useEffect as qs}from"react";var Iy=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:n})=>{let a=Xs(We);qs(()=>{let s;return o&&(s=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:n})),()=>{s&&(a==null||a.unsubscribe(s))}},[o])};import{useContext as ea}from"react";var we=()=>{let e=ea(We);return e==null?void 0:e.publish};import{useContext as ta}from"react";var He=()=>{let{notifications:e,notificationDispatch:t}=ta(or);return{notifications:e,notificationDispatch:t}};import{useContext as na}from"react";import ra,{createContext as oa}from"react";var At=oa({}),Zo=({open:e,close:t,children:r})=>ra.createElement(At.Provider,{value:{open:e,close:t}},r);var he=()=>{let{open:e,close:t}=na(At);return{open:e,close:t}};import{useCallback as sa}from"react";var oe=()=>{let{open:e}=he();return sa((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};import{useCallback as aa,useContext as ia}from"react";import Yo from"react";var Fe=Yo.createContext({}),Jo=({children:e,i18nProvider:t})=>Yo.createElement(Fe.Provider,{value:{i18nProvider:t}},e);var ua=()=>{let{i18nProvider:e}=ia(Fe);return aa(t=>e==null?void 0:e.changeLocale(t),[])};import{useContext as ca,useMemo as pa}from"react";var B=()=>{let{i18nProvider:e}=ca(Fe);return pa(()=>{function r(o,n,a){return(e==null?void 0:e.translate(o,n,a))??a??(typeof n=="string"&&typeof a>"u"?n:o)}return r},[e])};import{useContext as da,useCallback as la}from"react";var ma=()=>{let{i18nProvider:e}=da(Fe);return la(()=>e==null?void 0:e.getLocale(),[])};import{useState as fa}from"react";import{ExportToCsv as ya}from"export-to-csv-fix-source-map";var Cg=({resourceName:e,resource:t,sorter:r,sorters:o,filters:n,maxItemCount:a,pageSize:s=20,mapData:u=P=>P,exportOptions:p,meta:d,metaData:l,dataProviderName:c,onError:m}={})=>{let[P,x]=fa(!1),C=Y(),v=K(),{resource:g,resources:U,identifier:S}=k(M(t,e)),i=`${ft()(S,"plural")}-${new Date().toLocaleString()}`,{getList:f}=C(N(S,c,U)),R=v({resource:g,meta:M(d,l)});return{isLoading:P,triggerExport:async()=>{x(!0);let T=[],y=1,D=!0;for(;D;)try{let{data:A,total:w}=await f({resource:(g==null?void 0:g.name)??"",filters:n,sort:M(o,r),sorters:M(o,r),pagination:{current:y,pageSize:s,mode:"server"},meta:R,metaData:R});y++,T.push(...A),a&&T.length>=a&&(T=T.slice(0,a),D=!1),w===T.length&&(D=!1)}catch(A){x(!1),D=!1,m==null||m(A);return}new ya({filename:i,useKeysAsHeaders:!0,...p}).generateCsv(T.map(u)),x(!1)}}};import Xo from"react";import ga from"warn-once";var Fg=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:n,redirect:a,successNotification:s,errorNotification:u,meta:p,metaData:d,queryMeta:l,mutationMeta:c,mutationMode:m,liveMode:P,onLiveEvent:x,liveParams:C,undoableTimeout:v,dataProviderName:g,invalidates:U,queryOptions:S,createMutationOptions:h,updateMutationOptions:i,overtimeOptions:f}={})=>{let{options:R}=ae(),b=K(),{resource:T,id:y,action:D,identifier:L}=k(e),{identifier:A}=k(),E=(()=>{let Te=r??y;return e&&e!==A?r:Te})(),[I,F]=Xo.useState(E);Xo.useEffect(()=>{F(E)},[E]);let O=(()=>t||(D==="edit"||D==="clone"?D:"create"))(),G=b({resource:T,meta:M(p,d)}),{mutationMode:X}=ke(),j=m??X,Q=O==="create",$=O==="edit",H=O==="clone";ga((H||$)&&!!e&&!r,`[useForm]: action: "${O}", resource: "${L}", id: ${I} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let Z=Ir({redirectFromProps:a,action:O,redirectOptions:R.redirect}),ge=It({resource:L,id:I??"",queryOptions:{enabled:I!==void 0&&($||H),...S},liveMode:P,onLiveEvent:x,liveParams:C,meta:{...G,...l},metaData:{...G,...l},dataProviderName:g}),{isFetching:qe}=ge,Oe=wt({mutationOptions:h}),{mutate:cr,isLoading:at}=Oe,et=Vr({mutationOptions:i}),{mutate:it,isLoading:ut}=et,{setWarnWhen:ct}=Ut(),pt=qo(),Ct=Q||H?{formLoading:qe||at,mutationResult:Oe,onFinish:async Te=>{ct(!1);let Ee=Be=>{pt({redirect:Z,resource:T,id:Be,meta:M(p,d)})};return j!=="pessimistic"&&setTimeout(()=>{Ee()}),new Promise((Be,Ue)=>{if(j!=="pessimistic"&&Be(),!!T)return cr({values:Te,resource:L??T.name,successNotification:s,errorNotification:u,meta:{...G,...c},metaData:{...G,...c},dataProviderName:g,invalidates:U},{onSuccess:(Me,je,Ze)=>{var Bt;o&&o(Me,Te,Ze);let $e=(Bt=Me==null?void 0:Me.data)==null?void 0:Bt.id;Ee($e),Be(Me)},onError:(Me,je,Ze)=>{if(n)return n(Me,Te,Ze);Ue()}})})}}:{formLoading:qe||ut,mutationResult:et,onFinish:async Te=>{if(ct(!1),!T)return;let Ee={id:I??"",values:Te,resource:L??T.name,mutationMode:j,undoableTimeout:v,successNotification:s,errorNotification:u,meta:{...G,...c},metaData:{...G,...c},dataProviderName:g,invalidates:U},Be=()=>{pt({redirect:Z,resource:T,id:I,meta:M(p,d)})};return j!=="pessimistic"&&setTimeout(()=>{Be()}),new Promise((Ue,Me)=>(j!=="pessimistic"&&Ue(),setTimeout(()=>{it(Ee,{onSuccess:(je,Ze,$e)=>{o&&o(je,Te,$e),j==="pessimistic"&&Be(),Ue(je)},onError:(je,Ze,$e)=>{if(n)return n(je,Te,$e);Me()}})})))}},{elapsedTime:tt}=_({isLoading:Ct.mutationResult.isLoading||ge.isFetching,interval:f==null?void 0:f.interval,onInterval:f==null?void 0:f.onInterval});return{...Ct,queryResult:ge,id:I,setId:F,redirect:(Te,Ee)=>{pt({redirect:Te!==void 0?Te:$?"list":"edit",resource:T,id:Ee??I,meta:M(p,d)})},overtime:{elapsedTime:tt}}};import{useCallback as Ta}from"react";var qo=()=>{let{show:e,edit:t,list:r,create:o}=ue();return Ta(({redirect:a,resource:s,id:u,meta:p={}})=>{if(a&&s)return s.show&&a==="show"&&u?e(s,u,void 0,p):s.edit&&a==="edit"&&u?t(s,u,void 0,p):s.create&&a==="create"?o(s,void 0,p):r(s,"push",p)},[])};import Ra,{useContext as Pa}from"react";var ce=()=>{let e=Pa(Ke);return Ra.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])()};import xa,{useContext as Ca}from"react";var Hr=()=>{let e=Ca(Ke);return xa.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()};var ue=()=>{let{resources:e}=k(),t=z(),{useHistory:r}=te(),o=r(),n=de(),a=ce(),s=Hr(),u=(i,f="push")=>{t==="legacy"?o[f](i):a({to:i,type:f})},p=(i,f={})=>{var R;if(t==="legacy"){let b=typeof i=="string"?pe(i,e,!0)??{name:i,route:i}:i,T=fe(b,e,!0).find(y=>y.action==="create");return T?Pe(T.route,b==null?void 0:b.meta,n,f):""}else{let b=typeof i=="string"?pe(i,e)??{name:i}:i,T=(R=fe(b,e).find(y=>y.action==="create"))==null?void 0:R.route;return T?a({to:Pe(T,b==null?void 0:b.meta,n,f),type:"path"}):""}},d=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?pe(i,e,!0)??{name:i,route:i}:i,D=fe(y,e,!0).find(L=>L.action==="edit");return D?Pe(D.route,y==null?void 0:y.meta,n,{...R,id:b}):""}else{let y=typeof i=="string"?pe(i,e)??{name:i}:i,D=(T=fe(y,e).find(L=>L.action==="edit"))==null?void 0:T.route;return D?a({to:Pe(D,y==null?void 0:y.meta,n,{...R,id:b}),type:"path"}):""}},l=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?pe(i,e,!0)??{name:i,route:i}:i,D=fe(y,e,!0).find(L=>L.action==="clone");return D?Pe(D.route,y==null?void 0:y.meta,n,{...R,id:b}):""}else{let y=typeof i=="string"?pe(i,e)??{name:i}:i,D=(T=fe(y,e).find(L=>L.action==="clone"))==null?void 0:T.route;return D?a({to:Pe(D,y==null?void 0:y.meta,n,{...R,id:b}),type:"path"}):""}},c=(i,f,R={})=>{var T;let b=encodeURIComponent(f);if(t==="legacy"){let y=typeof i=="string"?pe(i,e,!0)??{name:i,route:i}:i,D=fe(y,e,!0).find(L=>L.action==="show");return D?Pe(D.route,y==null?void 0:y.meta,n,{...R,id:b}):""}else{let y=typeof i=="string"?pe(i,e)??{name:i}:i,D=(T=fe(y,e).find(L=>L.action==="show"))==null?void 0:T.route;return D?a({to:Pe(D,y==null?void 0:y.meta,n,{...R,id:b}),type:"path"}):""}},m=(i,f={})=>{var R;if(t==="legacy"){let b=typeof i=="string"?pe(i,e,!0)??{name:i,route:i}:i,T=fe(b,e,!0).find(y=>y.action==="list");return T?Pe(T.route,b==null?void 0:b.meta,n,f):""}else{let b=typeof i=="string"?pe(i,e)??{name:i}:i,T=(R=fe(b,e).find(y=>y.action==="list"))==null?void 0:R.route;return T?a({to:Pe(T,b==null?void 0:b.meta,n,f),type:"path"}):""}};return{create:(i,f="push",R={})=>{u(p(i,R),f)},createUrl:p,edit:(i,f,R="push",b={})=>{u(d(i,f,b),R)},editUrl:d,clone:(i,f,R="push",b={})=>{u(l(i,f,b),R)},cloneUrl:l,show:(i,f,R="push",b={})=>{u(c(i,f,b),R)},showUrl:c,list:(i,f="push",R={})=>{u(m(i,R),f)},listUrl:m,push:(i,...f)=>{t==="legacy"?o.push(i,...f):a({to:i,type:"push"})},replace:(i,...f)=>{t==="legacy"?o.replace(i,...f):a({to:i,type:"replace"})},goBack:()=>{t==="legacy"?o.goBack():s()}}};import ha,{useState as ba}from"react";import va from"warn-once";var pT=({resource:e,id:t,successNotification:r,errorNotification:o,meta:n,metaData:a,liveMode:s,onLiveEvent:u,dataProviderName:p,queryOptions:d,overtimeOptions:l}={})=>{let{resource:c,id:m,identifier:P}=k(e),{identifier:x}=k(),C=K(),g=(()=>{let R=t??m;return e&&e!==x?t:R})(),[U,S]=ba(g);ha.useEffect(()=>{S(g)},[g]);let h=C({resource:c,meta:M(n,a)});va(!!e&&!t,`[useShow]: resource: "${P}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let i=It({resource:P,id:U??"",queryOptions:{enabled:U!==void 0,...d},successNotification:r,errorNotification:o,meta:h,metaData:h,liveMode:s,onLiveEvent:u,dataProviderName:p}),{elapsedTime:f}=_({isLoading:i.isFetching,interval:l==null?void 0:l.interval,onInterval:l==null?void 0:l.onInterval});return{queryResult:i,showId:U,setShowId:S,overtime:{elapsedTime:f}}};import{useEffect as Da,useState as Or}from"react";import{parse as La}from"papaparse";import Ea from"lodash-es/chunk";var xT=({resourceName:e,resource:t,mapData:r=l=>l,paparseOptions:o,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:a,meta:s,metaData:u,onProgress:p,dataProviderName:d}={})=>{let[l,c]=Or(0),[m,P]=Or(0),[x,C]=Or(!1),{resource:v,identifier:g}=k(t??e),U=K(),S=Br(),h=wt(),i=U({resource:v,meta:M(s,u)}),f;n===1?f=h:f=S;let R=()=>{P(0),c(0),C(!1)},b=y=>{let D={succeeded:y.filter(L=>L.type==="success"),errored:y.filter(L=>L.type==="error")};a==null||a(D),C(!1)};Da(()=>{p==null||p({totalAmount:m,processedAmount:l})},[m,l]);let T=({file:y})=>(R(),new Promise(D=>{C(!0),La(y,{complete:async({data:L})=>{let A=Gt(L,r);if(P(A.length),n===1){let w=A.map(I=>async()=>({response:await h.mutateAsync({resource:g??"",values:I,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:i,metaData:i}),value:I})),E=await Jt(w,({response:I,value:F})=>(c(V=>V+1),{response:[I.data],type:"success",request:[F]}),(I,F)=>({response:[I],type:"error",request:[A[F]]}));D(E)}else{let w=Ea(A,n),E=w.map(F=>async()=>({response:await S.mutateAsync({resource:g??"",values:F,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:i,metaData:i}),value:F,currentBatchLength:F.length})),I=await Jt(E,({response:F,currentBatchLength:V,value:O})=>(c(G=>G+V),{response:F.data,type:"success",request:O}),(F,V)=>({response:[F],type:"error",request:w[V]}));D(I)}},...o})}).then(D=>(b(D),D)));return{inputProps:{type:"file",accept:".csv",onChange:y=>{y.target.files&&y.target.files.length>0&&T({file:y.target.files[0]})}},mutationResult:f,isLoading:x,handleChange:T}};import{useCallback as en,useState as Ua}from"react";var bT=({defaultVisible:e=!1}={})=>{let[t,r]=Ua(e),o=en(()=>r(!0),[t]),n=en(()=>r(!1),[t]);return{visible:t,show:o,close:n}};import Ma from"react";var Ft=()=>{let e=z(),{resource:t,resources:r}=k(),o=de();return Ma.useCallback(({resource:a,action:s,meta:u})=>{var m;let p=a||t;if(!p)return;let l=(m=fe(p,r,e==="legacy").find(P=>P.action===s))==null?void 0:m.route;return l?Pe(l,p==null?void 0:p.meta,o,u):void 0},[r,t,o])};var Ia=({resource:e,action:t,meta:r,legacy:o})=>Ft()({resource:e,action:t,meta:r,legacy:o});import wa,{useContext as Sa}from"react";var ot=()=>{let e=Sa(Ke);return e!=null&&e.Link?e.Link:({to:r,...o})=>wa.createElement("a",{href:r,...o})};import{useContext as Fa}from"react";import tn from"react";var ze={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Aa=tn.createContext(ze),Qt=Aa,rn=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s})=>tn.createElement(Qt.Provider,{value:{useHistory:t??ze.useHistory,useLocation:r??ze.useLocation,useParams:o??ze.useParams,Prompt:n??ze.Prompt,Link:a??ze.Link,routes:s??ze.routes}},e);var te=()=>{let e=Fa(Qt),{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}=e??ze;return{useHistory:t,useLocation:r,useParams:o,Prompt:n,Link:a,routes:s}};import{useQuery as Qa}from"@tanstack/react-query";import{useContext as ka}from"react";import on from"react";var Xe=on.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}});var nn=({can:e,children:t,options:r})=>on.createElement(Xe.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t);var gt=e=>{if(!e)return;let{icon:t,list:r,edit:o,create:n,show:a,clone:s,children:u,meta:p,options:d,...l}=e,{icon:c,...m}=p??{},{icon:P,...x}=d??{};return{...l,...p?{meta:m}:{},...d?{options:x}:{}}};var sn=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:n}=ka(Xe),{resource:a,...s}=r??{},u=gt(a),p=Qa(["useCan",{action:e,resource:t,params:{...s,resource:u},enabled:o==null?void 0:o.enabled}],()=>(n==null?void 0:n({action:e,resource:t,params:{...s,resource:u}}))??Promise.resolve({can:!0}),{enabled:typeof n<"u",...o,retry:!1});return typeof n>"u"?{data:{can:!0}}:p};import an from"react";var mR=()=>{let{can:e}=an.useContext(Xe);return{can:an.useMemo(()=>e?async({params:o,...n})=>{let a=o!=null&&o.resource?gt(o.resource):void 0;return e({...n,...o?{params:{...o,resource:a}}:{}})}:void 0,[e])}};import{useCallback as un,useMemo as Va,useState as $r}from"react";import Ba from"lodash/uniqBy";import Na from"lodash/debounce";import sr from"lodash/get";var UR=e=>{let[t,r]=$r([]),[o,n]=$r([]),[a,s]=$r([]),{resource:u,sort:p,sorters:d,filters:l=[],optionLabel:c="title",optionValue:m="id",debounce:P=300,successNotification:x,errorNotification:C,defaultValueQueryOptions:v,queryOptions:g,fetchSize:U,pagination:S,hasPagination:h=!1,liveMode:i,defaultValue:f=[],onLiveEvent:R,onSearch:b,liveParams:T,meta:y,metaData:D,dataProviderName:L,overtimeOptions:A}=e,{resource:w,identifier:E}=k(u),F=K()({resource:w,meta:M(y,D)}),V=Array.isArray(f)?f:[f],O=un(Z=>{s(Z.data.map(se=>({label:sr(se,c),value:sr(se,m)})))},[c,m]),G=v??g,X=Ar({resource:E,ids:V,queryOptions:{...G,enabled:V.length>0&&((G==null?void 0:G.enabled)??!0),onSuccess:Z=>{var se;O(Z),(se=G==null?void 0:G.onSuccess)==null||se.call(G,Z)}},meta:F,metaData:F,liveMode:"off",dataProviderName:L}),j=un(Z=>{n(Z.data.map(se=>({label:sr(se,c),value:sr(se,m)})))},[c,m]),Q=Mt({resource:E,sorters:M(d,p),filters:l.concat(t),pagination:{current:S==null?void 0:S.current,pageSize:(S==null?void 0:S.pageSize)??U,mode:S==null?void 0:S.mode},hasPagination:h,queryOptions:{...g,onSuccess:Z=>{var se;j(Z),(se=g==null?void 0:g.onSuccess)==null||se.call(g,Z)}},successNotification:x,errorNotification:C,meta:F,metaData:F,liveMode:i,liveParams:T,onLiveEvent:R,dataProviderName:L}),$=Z=>{if(b){r(b(Z));return}if(Z)r([{field:c,operator:"contains",value:Z}]);else{r([]);return}},{elapsedTime:H}=_({isLoading:Q.isFetching||X.isFetching,interval:A==null?void 0:A.interval,onInterval:A==null?void 0:A.onInterval});return{queryResult:Q,defaultValueQueryResult:X,options:Va(()=>Ba([...o,...a],"value"),[o,a]),onSearch:Na($,P),overtime:{elapsedTime:H}}};import Ha,{useState as ar,useEffect as cn}from"react";import pn from"qs";import ir from"lodash/differenceWith";import ur from"lodash/isEqual";import Oa from"warn-once";var dn=[],ln=[];function $R({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:o,initialSorter:n,permanentSorter:a=ln,defaultSetFilterBehavior:s,initialFilter:u,permanentFilter:p=dn,filters:d,sorters:l,syncWithLocation:c,resource:m,successNotification:P,errorNotification:x,queryOptions:C,liveMode:v,onLiveEvent:g,liveParams:U,meta:S,metaData:h,dataProviderName:i,overtimeOptions:f}={}){var Yr,Jr,Xr,qr,eo;let{syncWithLocation:R}=Sr(),b=c??R,T=jo(v),y=z(),{useLocation:D}=te(),{search:L,pathname:A}=D(),w=K(),E=de(),I=((d==null?void 0:d.mode)||"server")==="server",F=((l==null?void 0:l.mode)||"server")==="server",V=r===!1?"off":"server",O=((o==null?void 0:o.mode)??V)!=="off",G=M(o==null?void 0:o.current,e),X=M(o==null?void 0:o.pageSize,t),j=M(S,h),{parsedCurrent:Q,parsedPageSize:$,parsedSorter:H,parsedFilters:Z}=Wt(L??"?"),se=M(d==null?void 0:d.initial,u),ge=M(d==null?void 0:d.permanent,p)??dn,qe=M(l==null?void 0:l.initial,n),Oe=M(l==null?void 0:l.permanent,a)??ln,cr=M(d==null?void 0:d.defaultBehavior,s)??"merge",at,et,it,ut;b?(at=((Yr=E==null?void 0:E.params)==null?void 0:Yr.current)||Q||G||1,et=((Jr=E==null?void 0:E.params)==null?void 0:Jr.pageSize)||$||X||10,it=((Xr=E==null?void 0:E.params)==null?void 0:Xr.sorters)||(H.length?H:qe),ut=((qr=E==null?void 0:E.params)==null?void 0:qr.filters)||(Z.length?Z:se)):(at=G||1,et=X||10,it=qe,ut=se);let{replace:ct}=ue(),pt=ce(),{resource:jr,identifier:Vt}=k(m),pr=w({resource:jr,meta:j});Ha.useEffect(()=>{Oa(typeof Vt>"u","useTable: `resource` is not defined.")},[Vt]);let[_e,Ct]=ar(jt(Oe,it??[])),[tt,Te]=ar(_t(ge,ut??[])),[Ee,Be]=ar(at),[Ue,Me]=ar(et),je=({pagination:{current:me,pageSize:Ie},sorter:Nt,filters:Ht})=>{if(y==="new")return pt({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...O?{current:me,pageSize:Ie}:{},sorters:Nt,filters:Ht,...Ze()}})??"";{let ht=pn.parse(L==null?void 0:L.substring(1)),Vn=Kt({pagination:{pageSize:Ie,current:me},sorters:_e??Nt,filters:Ht,...ht});return`${A??""}?${Vn??""}`}};cn(()=>{L===""&&(Be(at),Me(et),Ct(jt(Oe,it??[])),Te(_t(ge,ut??[])))},[L]);let Ze=()=>{if(y==="new"){let{sorters:me,filters:Ie,pageSize:Nt,current:Ht,...ht}=(E==null?void 0:E.params)??{};return ht}else{let{sorter:me,filters:Ie,pageSize:Nt,current:Ht,...ht}=pn.parse(L,{ignoreQueryPrefix:!0});return ht}};cn(()=>{if(b){let me=Ze();if(y==="new")pt({type:"replace",options:{keepQuery:!0},query:{...O?{pageSize:Ue,current:Ee}:{},sorters:ir(_e,Oe,ur),filters:ir(tt,ge,ur)}});else{let Ie=Kt({...O?{pagination:{pageSize:Ue,current:Ee}}:{},sorters:ir(_e,Oe,ur),filters:ir(tt,ge,ur),...me});return ct==null?void 0:ct(`${A}?${Ie}`,void 0,{shallow:!0})}}},[b,Ee,Ue,_e,tt]);let $e=Mt({resource:Vt,hasPagination:r,pagination:{current:Ee,pageSize:Ue,mode:o==null?void 0:o.mode},filters:I?mt(ge,tt):void 0,sorters:F?zt(Oe,_e):void 0,queryOptions:C,successNotification:P,errorNotification:x,meta:pr,metaData:pr,liveMode:T,liveParams:U,onLiveEvent:g,dataProviderName:i}),Bt=me=>{Te(Ie=>mt(ge,me,Ie))},An=me=>{Te(mt(ge,me))},Fn=me=>{Te(Ie=>mt(ge,me(Ie)))},Qn=(me,Ie=cr)=>{typeof me=="function"?Fn(me):Ie==="replace"?An(me):Bt(me)},Zr=me=>{Ct(()=>zt(Oe,me))},{elapsedTime:kn}=_({isLoading:$e.isFetching,interval:f==null?void 0:f.interval,onInterval:f==null?void 0:f.onInterval});return{tableQueryResult:$e,sorters:_e,setSorters:Zr,sorter:_e,setSorter:Zr,filters:tt,setFilters:Qn,current:Ee,setCurrent:Be,pageSize:Ue,setPageSize:Me,pageCount:Ue?Math.ceil((((eo=$e.data)==null?void 0:eo.total)??0)/Ue):1,createLinkForSyncWithLocation:je,overtime:{elapsedTime:kn}}}import{useContext as yn}from"react";import{useMutation as gn,useQueryClient as $a}from"@tanstack/react-query";import mn from"react";var nt=mn.createContext({}),fn=({create:e,get:t,update:r,children:o})=>mn.createElement(nt.Provider,{value:{create:e,get:t,update:r}},o);var Se=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=$a(),o=yn(nt),n=W(),{resources:a}=yn(Je),{data:s,refetch:u,isLoading:p}=dr({v3LegacyAuthProviderCompatible:!!(n!=null&&n.isLegacy),queryOptions:{enabled:!!o}}),d=gn(async c=>{var C,v,g,U,S;let m=pe(c.resource,a),P=M((C=m==null?void 0:m.meta)==null?void 0:C.audit,(v=m==null?void 0:m.options)==null?void 0:v.audit,(U=(g=m==null?void 0:m.options)==null?void 0:g.auditLog)==null?void 0:U.permissions);if(P&&!hr(P,c.action))return;let x;return p&&(x=await u()),await((S=o.create)==null?void 0:S.call(o,{...c,author:s??(x==null?void 0:x.data)}))},e),l=gn(async c=>{var m;return await((m=o.update)==null?void 0:m.call(o,c))},{onSuccess:c=>{if(c!=null&&c.resource){let m=q(c==null?void 0:c.resource);r.invalidateQueries(m.logList())}},...t});return{log:d,rename:l}};import{useContext as Ga}from"react";import{useQuery as Wa}from"@tanstack/react-query";var cP=({resource:e,action:t,meta:r,author:o,metaData:n,queryOptions:a})=>{let{get:s}=Ga(nt),u=q(e,void 0,n);return Wa(u.logList(r),()=>(s==null?void 0:s({resource:e,action:t,author:o,meta:r,metaData:n}))??Promise.resolve([]),{enabled:typeof s<"u",...a,retry:!1})};import{useCallback as Ka}from"react";import{useQueryClient as za}from"@tanstack/react-query";var Ae=()=>{let{resources:e}=k(),t=za();return Ka(({resource:o,dataProviderName:n,invalidates:a,id:s})=>{if(a===!1)return;let u=q(o,N(o,n,e));a.forEach(p=>{switch(p){case"all":t.invalidateQueries(u.all);break;case"list":t.invalidateQueries(u.list());break;case"many":t.invalidateQueries(u.many());break;case"resourceAll":t.invalidateQueries(u.resourceAll);break;case"detail":t.invalidateQueries(u.detail(s||""));break;default:break}})},[])};import{useContext as _a}from"react";import ja from"warn-once";var IP=({meta:e={}}={})=>{let t=z(),{i18nProvider:r}=_a(Fe),o=de(),n=B(),{resources:a,resource:s,action:u}=k(),{options:{textTransformers:p}}=ae(),d=[];if(!(s!=null&&s.name))return{breadcrumbs:d};let l=c=>{var P,x,C,v,g,U;let m=typeof c=="string"?pe(c,a,t==="legacy")??{name:c}:c;if(m){let S=M((P=m==null?void 0:m.meta)==null?void 0:P.parent,m==null?void 0:m.parentName);S&&l(S);let h=fe(m,a,t==="legacy").find(R=>R.action==="list"),i=(x=h==null?void 0:h.resource)!=null&&x.list?h==null?void 0:h.route:void 0,f=i?t==="legacy"?i:Pe(i,m==null?void 0:m.meta,o,e):void 0;d.push({label:M((C=m.meta)==null?void 0:C.label,(v=m.options)==null?void 0:v.label)??n(`${m.name}.${m.name}`,p.humanize(m.name)),href:f,icon:M((g=m.meta)==null?void 0:g.icon,(U=m.options)==null?void 0:U.icon,m.icon)})}};if(l(s),u&&u!=="list"){let c=`actions.${u}`,m=n(c);typeof r<"u"&&m===c?(ja(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),d.push({label:n(`buttons.${u}`,p.humanize(u))})):d.push({label:n(c,p.humanize(u))})}return{breadcrumbs:d}};import Gr from"react";var Tt=(e,t,r=!1)=>{let o=[],n=De(e,t);for(;n;)o.push(n),n=De(n,t);return o.reverse(),`/${[...o,e].map(s=>Re((r?s.route:void 0)??s.identifier??s.name)).join("/").replace(/^\//,"")}`};var Tn=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{let a=[],s=De(n,e);for(;s;)a.push(s),s=De(s,e);a.reverse();let u=r;a.forEach(d=>{let l=(t?d.route:void 0)??d.identifier??d.name;u.children[l]||(u.children[l]={item:d,children:{}}),u=u.children[l]});let p=(t?n.route:void 0)??n.identifier??n.name;u.children[p]||(u.children[p]={item:n,children:{}})});let o=n=>{let a=[];return Object.keys(n.children).forEach(s=>{let u=Tt(n.children[s].item,e,t),p={...n.children[s].item,key:u,children:o(n.children[s])};a.push(p)}),a};return o(r)};var Rn=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Za=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=B(),o=Ft(),n=z(),{resource:a,resources:s}=k(),{pathname:u}=de(),{useLocation:p}=te(),{pathname:d}=p(),l=ft(),m=`/${((n==="legacy"?Rn(d):u?Rn(u):void 0)??"").replace(/^\//,"")}`,P=a?Tt(a,s,n==="legacy"):m??"",x=Gr.useMemo(()=>{if(!a)return[];let g=De(a,s),U=[Tt(a,s)];for(;g;)U.push(Tt(g,s)),g=De(g,s);return U},[]),C=Gr.useCallback(g=>{var S,h,i,f,R,b;if((((S=g==null?void 0:g.meta)==null?void 0:S.hide)??((h=g==null?void 0:g.options)==null?void 0:h.hide))||!(g!=null&&g.list)&&g.children.length===0)return;let U=g.list?o({resource:g,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&U&&U.match(/(\/|^):(.+?)(\/|$){1}/)))return{...g,route:U,icon:M((i=g.meta)==null?void 0:i.icon,(f=g.options)==null?void 0:f.icon,g.icon),label:M((R=g==null?void 0:g.meta)==null?void 0:R.label,(b=g==null?void 0:g.options)==null?void 0:b.label)??r(`${g.name}.${g.name}`,l(g.name,"plural"))}},[n,e,r,t]),v=Gr.useMemo(()=>{let g=Tn(s,n==="legacy"),U=S=>S.flatMap(h=>{let i=U(h.children),f=C({...h,children:i});return f?[f]:[]});return U(g)},[s,n,C]);return{defaultOpenKeys:x,selectedKey:P,menuItems:v}};var K=()=>{let{params:e}=de();return({resource:r,meta:o}={})=>{let{meta:n}=gt(r)??{meta:{}},{filters:a,sorters:s,current:u,pageSize:p,...d}=e??{};return{...n,...d,...o}}};var Xa=()=>{let[e,t]=Ja(),r=B(),{push:o}=ue(),n=ce(),a=z(),{resource:s,action:u}=k();return Ya(()=>{s&&u&&t(r("pages.error.info",{action:u,resource:s.name},`You may have forgotten to add the "${u}" component to "${s.name}" resource.`))},[s,u]),kt.createElement(kt.Fragment,null,kt.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&kt.createElement("p",null,e),kt.createElement("button",{onClick:()=>{a==="legacy"?o("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))};import xe,{useState as Pn}from"react";var Ur=()=>{let[e,t]=Pn(""),[r,o]=Pn(""),n=B(),a=W(),{mutate:s}=bt({v3LegacyAuthProviderCompatible:!!(a!=null&&a.isLegacy)});return xe.createElement(xe.Fragment,null,xe.createElement("h1",null,n("pages.login.title","Sign in your account")),xe.createElement("form",{onSubmit:u=>{u.preventDefault(),s({username:e,password:r})}},xe.createElement("table",null,xe.createElement("tbody",null,xe.createElement("tr",null,xe.createElement("td",null,n("pages.login.username",void 0,"username"),":"),xe.createElement("td",null,xe.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),xe.createElement("tr",null,xe.createElement("td",null,n("pages.login.password",void 0,"password"),":"),xe.createElement("td",null,xe.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>o(u.target.value)}))))),xe.createElement("br",null),xe.createElement("input",{type:"submit",value:"login"})))};import Rt from"react";import le,{useState as Wr}from"react";var xn=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:n,wrapperProps:a,renderContent:s,formProps:u,title:p=void 0})=>{let d=z(),l=ot(),{Link:c}=te(),m=d==="legacy"?c:l,[P,x]=Wr(""),[C,v]=Wr(""),[g,U]=Wr(!1),S=B(),h=W(),{mutate:i}=bt({v3LegacyAuthProviderCompatible:!!(h!=null&&h.isLegacy)}),f=(T,y)=>le.createElement(m,{to:T},y),R=()=>e?e.map(T=>le.createElement("div",{key:T.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},le.createElement("button",{onClick:()=>i({providerName:T.name}),style:{display:"flex",alignItems:"center"}},T==null?void 0:T.icon,T.label??le.createElement("label",null,T.label)))):null,b=le.createElement("div",{...n},le.createElement("h1",{style:{textAlign:"center"}},S("pages.login.title","Sign in to your account")),R(),le.createElement("hr",null),le.createElement("form",{onSubmit:T=>{T.preventDefault(),i({email:P,password:C,remember:g})},...u},le.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},le.createElement("label",{htmlFor:"email-input"},S("pages.login.fields.email","Email")),le.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:P,onChange:T=>x(T.target.value)}),le.createElement("label",{htmlFor:"password-input"},S("pages.login.fields.password","Password")),le.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:C,onChange:T=>v(T.target.value)}),o??le.createElement(le.Fragment,null,le.createElement("label",{htmlFor:"remember-me-input"},S("pages.login.buttons.rememberMe","Remember me"),le.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:g,value:g.toString(),onChange:()=>{U(!g)}}))),le.createElement("br",null),r??f("/forgot-password",S("pages.login.buttons.forgotPassword","Forgot password?")),le.createElement("input",{type:"submit",value:S("pages.login.signin","Sign in")}),t??le.createElement("span",null,S("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",f("/register",S("pages.login.register","Sign up"))))));return le.createElement("div",{...a},s?s(b,p):b)};import ye,{useState as Cn}from"react";var hn=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:n,formProps:a,title:s=void 0})=>{let u=z(),p=ot(),{Link:d}=te(),l=u==="legacy"?d:p,[c,m]=Cn(""),[P,x]=Cn(""),C=B(),v=W(),{mutate:g,isLoading:U}=yr({v3LegacyAuthProviderCompatible:!!(v!=null&&v.isLegacy)}),S=(f,R)=>ye.createElement(l,{to:f},R),h=()=>e?e.map(f=>ye.createElement("div",{key:f.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ye.createElement("button",{onClick:()=>g({providerName:f.name}),style:{display:"flex",alignItems:"center"}},f==null?void 0:f.icon,f.label??ye.createElement("label",null,f.label)))):null,i=ye.createElement("div",{...o},ye.createElement("h1",{style:{textAlign:"center"}},C("pages.register.title","Sign up for your account")),h(),ye.createElement("hr",null),ye.createElement("form",{onSubmit:f=>{f.preventDefault(),g({email:c,password:P})},...a},ye.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ye.createElement("label",{htmlFor:"email-input"},C("pages.register.fields.email","Email")),ye.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:f=>m(f.target.value)}),ye.createElement("label",{htmlFor:"password-input"},C("pages.register.fields.password","Password")),ye.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:P,onChange:f=>x(f.target.value)}),ye.createElement("input",{type:"submit",value:C("pages.register.buttons.submit","Sign up"),disabled:U}),t??ye.createElement(ye.Fragment,null,ye.createElement("span",null,C("pages.login.buttons.haveAccount","Have an account?")," ",S("/login",C("pages.login.signin","Sign in")))))));return ye.createElement("div",{...r},n?n(i,s):i)};import Qe,{useState as qa}from"react";var bn=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:n,title:a=void 0})=>{let s=B(),u=z(),p=ot(),{Link:d}=te(),l=u==="legacy"?d:p,[c,m]=qa(""),{mutate:P,isLoading:x}=Tr(),C=(g,U)=>Qe.createElement(l,{to:g},U),v=Qe.createElement("div",{...r},Qe.createElement("h1",{style:{textAlign:"center"}},s("pages.forgotPassword.title","Forgot your password?")),Qe.createElement("hr",null),Qe.createElement("form",{onSubmit:g=>{g.preventDefault(),P({email:c})},...n},Qe.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Qe.createElement("label",{htmlFor:"email-input"},s("pages.forgotPassword.fields.email","Email")),Qe.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:g=>m(g.target.value)}),Qe.createElement("input",{type:"submit",disabled:x,value:s("pages.forgotPassword.buttons.submit","Send reset instructions")}),Qe.createElement("br",null),e??Qe.createElement("span",null,s("pages.register.buttons.haveAccount","Have an account? ")," ",C("/login",s("pages.login.signin","Sign in"))))));return Qe.createElement("div",{...t},o?o(v,a):v)};import Ve,{useState as vn}from"react";var Dn=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o,title:n=void 0})=>{let a=B(),s=W(),{mutate:u,isLoading:p}=Pr({v3LegacyAuthProviderCompatible:!!(s!=null&&s.isLegacy)}),[d,l]=vn(""),[c,m]=vn(""),P=Ve.createElement("div",{...t},Ve.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),Ve.createElement("hr",null),Ve.createElement("form",{onSubmit:x=>{x.preventDefault(),u({password:d,confirmPassword:c})},...o},Ve.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Ve.createElement("label",{htmlFor:"password-input"},a("pages.updatePassword.fields.password","New Password")),Ve.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:d,onChange:x=>l(x.target.value)}),Ve.createElement("label",{htmlFor:"confirm-password-input"},a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Ve.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:x=>m(x.target.value)}),Ve.createElement("input",{type:"submit",disabled:p,value:a("pages.updatePassword.buttons.submit","Update")}))));return Ve.createElement("div",{...e},r?r(P,n):P)};var ei=e=>{let{type:t}=e;return Rt.createElement(Rt.Fragment,null,(()=>{switch(t){case"register":return Rt.createElement(hn,{...e});case"forgotPassword":return Rt.createElement(bn,{...e});case"updatePassword":return Rt.createElement(Dn,{...e});default:return Rt.createElement(xn,{...e})}})())};import ve from"react";var Kr=()=>ve.createElement(ve.Fragment,null,ve.createElement("h1",null,"Welcome on board"),ve.createElement("p",null,"Your configuration is completed."),ve.createElement("p",null,"Now you can get started by adding your resources to the"," ",ve.createElement("code",null,"`resources`")," property of ",ve.createElement("code",null,"`<Refine>`")),ve.createElement("div",{style:{display:"flex",gap:8}},ve.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ve.createElement("button",null,"Documentation")),ve.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ve.createElement("button",null,"Examples")),ve.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ve.createElement("button",null,"Community"))));import J,{useState as ti}from"react";var ri=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:J.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:J.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),J.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:J.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),J.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:J.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],oi=()=>{let e=tr("(max-width: 1010px)"),t=tr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",o=()=>t?"32px":e?"40px":"48px",n=()=>t?"16px":e?"20px":"24px";return J.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},J.createElement("div",{style:{height:"89px"}}),J.createElement("div",{style:{display:"flex",justifyContent:"center"}},J.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),J.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),J.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},J.createElement("h1",{style:{fontSize:o(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),J.createElement("h4",{style:{fontSize:n(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),J.createElement("div",{style:{height:"64px"}}),J.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},ri.map(a=>J.createElement(ni,{key:`welcome-page-${a.title}`,card:a}))),J.createElement("div",{style:{height:"64px"}}))},ni=({card:e})=>{let{title:t,description:r,icon:o,link:n}=e,[a,s]=ti(!1);return J.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},J.createElement("div",{style:{display:"flex",alignItems:"center"}},J.createElement("a",{onPointerEnter:()=>s(!0),onPointerLeave:()=>s(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:n},o,J.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),J.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...a&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},J.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),J.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))};import{QueryClient as wn,QueryClientProvider as ui}from"@tanstack/react-query";import{ReactQueryDevtools as ci}from"@tanstack/react-query-devtools";import ne from"react";import{useEffect as ai}from"react";import{useContext as st}from"react";var si="4.26.4",Ln=()=>{let e=xr(),t=st(nt),r=st(We),o=st(Qt),n=st(St),{i18nProvider:a}=st(Fe),s=st(At),u=st(Xe),{resources:p}=k(),d=!!t.create||!!t.get||!!t.update,l=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),c=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,m=!!n,P=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),x=!!s.close||!!s.open,C=!!u.can;return{providers:{auth:e,auditLog:d,live:l,router:c,data:m,i18n:P,notification:x,accessControl:C},version:si,resourceCount:p.length}};var ii=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},En=()=>{let e=Ln();return ai(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ii(e)}`},[]),null};import pi from"warn-once";var Un=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(n=>!t.includes(n));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1};import Mn from"react";var In=e=>{let t=Mn.useRef(!1);Mn.useEffect(()=>{t.current===!1&&e&&Un(e)&&(t.current=!0)},[e])};var di=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:o,routerProvider:n,notificationProvider:a,accessControlProvider:s,auditLogProvider:u,resources:p,DashboardPage:d,ReadyPage:l,LoginPage:c,catchAll:m,children:P,liveProvider:x,i18nProvider:C,Title:v,Layout:g,Sider:U,Header:S,Footer:h,OffLayoutArea:i,onLiveEvent:f,options:R})=>{var E;let{optionsWithDefaults:b,disableTelemetryWithDefault:T,reactQueryWithDefaults:y}=Mr({options:R}),D=nr(()=>{var I;return y.clientConfig instanceof wn?y.clientConfig:new wn({...y.clientConfig,defaultOptions:{...y.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(I=y.clientConfig.defaultOptions)==null?void 0:I.queries}}})},[y.clientConfig]),A=ne.useMemo(()=>typeof a=="function"?a:()=>a??{},[a])();if(In(n),o&&!n&&(p??[]).length===0)return l?ne.createElement(l,null):ne.createElement(Kr,null);let{RouterComponent:w=ne.Fragment}=n?{}:o??{};return typeof window<"u"&&((E=window==null?void 0:window.location)==null?void 0:E.hostname)==="localhost"&&pi(!0,`%c
\u2705 Zero-trust security model
\u2705 User/role management
\u2705 Granular access control
\u2705 Directory sync
\u2705 VPN-less secure deployments
\u2705 Direct connection to DBs

Interested in any of the new backend features of refine? Join now and get early access -> https://s.refine.dev/go-enterprise`,"color: green; background: yellow; font-size: 17px"),ne.createElement(ui,{client:D},ne.createElement(Zo,{...A},ne.createElement(ro,{...e??{},isProvided:!!e},ne.createElement(no,{...t??{},isProvided:!!t},ne.createElement(Qo,{...r},ne.createElement(Vo,{liveProvider:x},ne.createElement(Go,{value:o&&!n?"legacy":"new"},ne.createElement(Ko,{router:n},ne.createElement(rn,{...o},ne.createElement(Ho,{resources:p??[]},ne.createElement(Jo,{i18nProvider:C},ne.createElement(nn,{...s??{}},ne.createElement(fn,{...u??{}},ne.createElement(kr,null,ne.createElement(Do,{mutationMode:b.mutationMode,warnWhenUnsavedChanges:b.warnWhenUnsavedChanges,syncWithLocation:b.syncWithLocation,Title:v,undoableTimeout:b.undoableTimeout,catchAll:m,DashboardPage:d,LoginPage:c,Layout:g,Sider:U,Footer:h,Header:S,OffLayoutArea:i,hasDashboard:!!d,liveMode:b.liveMode,onLiveEvent:f,options:b},ne.createElement(Io,null,ne.createElement(w,null,P,!T&&ne.createElement(En,null),ne.createElement(zr,null))))))))))))))))),y.devtoolConfig===!1?null:ne.createElement(ci,{initialIsOpen:!1,position:"bottom-right",...y.devtoolConfig}))};import{useEffect as li,useState as mi}from"react";var Ao=({notification:e})=>{let t=B(),{notificationDispatch:r}=He(),{open:o}=he(),[n,a]=mi(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:vt(e.seconds)},`You have ${vt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:vt(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(u)}};return li(()=>{s()},[e]),null};import _r,{useEffect as fi}from"react";var yi=({children:e,Layout:t,Sider:r,Header:o,Title:n,Footer:a,OffLayoutArea:s})=>{let{Layout:u,Footer:p,Header:d,Sider:l,Title:c,OffLayoutArea:m}=ae();return _r.createElement(t??u,{Sider:r??l,Header:o??d,Footer:a??p,Title:n??c,OffLayoutArea:s??m},e,_r.createElement(gi,null))},gi=()=>{let{Prompt:e}=te(),t=B(),{warnWhen:r,setWarnWhen:o}=Ut(),n=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return fi(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),_r.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};import Le from"react";var Ti=()=>{let e=ce(),[t,r]=Le.useState(void 0);return Le.useEffect(()=>{t&&e(t)},[t]),Le.useCallback(n=>{t||r(n)},[t])};function Ri({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:o,loading:n}){var b;let a=W(),s=z(),u=!!(a!=null&&a.isProvided),p=!!(a!=null&&a.isLegacy),d=s==="legacy",l=de(),c=ce(),m=Ti(),{replace:P}=ue(),{useLocation:x}=te(),C=x(),{isLoading:v,isFetching:g,isSuccess:U,data:{authenticated:S,redirectTo:h}={},refetch:i}=$t({v3LegacyAuthProviderCompatible:p});Le.useEffect(()=>{i()},[r,o]);let f=Le.useRef({status:v?"initial":"pending",content:n??null});g?f.current.status="pending":g||(f.current.status="settled");let R=u?p?U:S:!0;if(f.current.status==="settled")if(R)f.current.content=Le.createElement(Le.Fragment,null,r??null);else if(typeof o<"u")f.current.content=Le.createElement(Le.Fragment,null,o);else{let T=`${d?C==null?void 0:C.pathname:l.pathname}`.replace(/(\?.*|#.*)$/,""),y=p?typeof e=="string"?e:"/login":typeof e=="string"?e:h;if(y)if(d){let D=t?`?to=${encodeURIComponent(T)}`:"";P(`${y}${D}`)}else m({to:y,query:t?{to:(b=l.params)!=null&&b.to?l.params.to:c({to:T,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return u?Le.createElement(Le.Fragment,null,f.current.content):Le.createElement(Le.Fragment,null,r??null)}import{useEffect as Pi}from"react";var zr=()=>{let{useLocation:e}=te(),{checkAuth:t}=ee(),r=e();return Pi(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};import Pt from"react";var xi=({resource:e,action:t,params:r,fallback:o,children:n,...a})=>{let{resource:s,id:u,action:p}=k(e),{identifier:d}=k(),c=(()=>{let P=(r==null?void 0:r.id)??u;return e&&e!==d?r==null?void 0:r.id:P})(),{data:m}=sn({resource:e??(s==null?void 0:s.name),action:t??p??"",params:r??{id:c,resource:s}});return m!=null&&m.can?Pt.isValidElement(n)?Pt.cloneElement(n,a):Pt.createElement(Pt.Fragment,null,n):(m==null?void 0:m.can)===!1?Pt.createElement(Pt.Fragment,null,o??null):null};import xt,{useEffect as Ci}from"react";var Sn=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `];var hi=()=>(Ci(()=>{let e=document.createElement("style");document.head.appendChild(e),Sn.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),xt.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},xt.createElement("div",{style:{width:"200px"}}),xt.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},xt.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},xt.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),xt.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))));export{Xe as AccessControlContext,ei as AuthPage,Ri as Authenticated,xi as CanAccess,Xa as ErrorComponent,hi as GitHubBanner,yi as LayoutWrapper,Ur as LoginPage,Kr as ReadyPage,di as Refine,Je as ResourceContext,zr as RouteChangeHandler,Fe as TranslationContext,Ao as UndoableQueue,oi as WelcomePage,ho as createTreeView,Xn as file2Base64,Uo as generateDefaultDocumentTitle,Jn as getDefaultFilter,Yn as getDefaultSortOrder,Xt as getNextPageParam,qt as getPreviousPageParam,xo as handleUseParams,Gt as importCSVMapper,er as legacyResourceTransform,Lr as matchResourceFromRoute,Wt as parseTableParams,Zn as parseTableParamsFromQuery,M as pickNotDeprecated,Yt as routeGenerator,_t as setInitialFilters,jt as setInitialSorters,Kt as stringifyTableParams,mt as unionFilters,zt as unionSorters,W as useActiveAuthProvider,Us as useApiUrl,Wn as useAuthenticated,Hr as useBack,IP as useBreadcrumb,sn as useCan,mR as useCanWithoutCache,He as useCancelNotification,Kn as useCheckError,wt as useCreate,Br as useCreateMany,Is as useCustom,Ss as useCustomMutation,Y as useDataProvider,xs as useDelete,Es as useDeleteMany,Cg as useExport,Tr as useForgotPassword,Fg as useForm,dr as useGetIdentity,ma as useGetLocale,Ft as useGetToPath,ce as useGo,oe as useHandleNotification,xT as useImport,Vs as useInfiniteList,Ae as useInvalidate,$t as useIsAuthenticated,xr as useIsExistAuthentication,ot as useLink,Mt as useList,jo as useLiveMode,_ as useLoadingOvertime,Se as useLog,cP as useLogList,bt as useLogin,Ot as useLogout,Ar as useMany,Za as useMenu,K as useMeta,bT as useModal,ke as useMutationMode,ue as useNavigation,he as useNotification,re as useOnError,It as useOne,Nr as useParse,de as useParsed,Bn as usePermissions,we as usePublish,qo as useRedirectionAfterSubmission,ae as useRefineContext,yr as useRegister,k as useResource,Ye as useResourceSubscription,zo as useResourceWithRoute,te as useRouterContext,z as useRouterType,UR as useSelect,ua as useSetLocale,pT as useShow,Iy as useSubscription,Sr as useSyncWithLocation,$R as useTable,as as useTitle,Ia as useToPath,B as useTranslate,Vr as useUpdate,vs as useUpdateMany,Pr as useUpdatePassword,ft as useUserFriendlyName,Ut as useWarnAboutChange,Zt as userFriendlyResourceName};
//# sourceMappingURL=index.js.map