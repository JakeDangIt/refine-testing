(()=>{var So=Object.create;var Rr=Object.defineProperty;var Lo=Object.getOwnPropertyDescriptor;var Fo=Object.getOwnPropertyNames;var qo=Object.getPrototypeOf,Ro=Object.prototype.hasOwnProperty;var P=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Mo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ko=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Fo(t))!Ro.call(e,o)&&o!==r&&Rr(e,o,{get:()=>t[o],enumerable:!(a=Lo(t,o))||a.enumerable});return e};var Ht=(e,t,r)=>(r=e!=null?So(qo(e)):{},ko(t||!e||!e.__esModule?Rr(r,"default",{value:e,enumerable:!0}):r,e));var Tr=Mo((Fl,ho)=>{var $o=Object.create,Mt=Object.defineProperty,No=Object.getOwnPropertyDescriptor,Ao=Object.getOwnPropertyNames,Oo=Object.getPrototypeOf,Qo=Object.prototype.hasOwnProperty,Uo=(e,t)=>{for(var r in t)Mt(e,r,{get:t[r],enumerable:!0})},ba=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ao(t))!Qo.call(e,o)&&o!==r&&Mt(e,o,{get:()=>t[o],enumerable:!(a=No(t,o))||a.enumerable});return e},N=(e,t,r)=>(r=e!=null?$o(Oo(e)):{},ba(t||!e||!e.__esModule?Mt(r,"default",{value:e,enumerable:!0}):r,e)),Bo=e=>ba(Mt({},"__esModule",{value:!0}),e),Ea={};Uo(Ea,{AccessControlContext:()=>gt,AuthPage:()=>nl,Authenticated:()=>Pl,CanAccess:()=>Tl,ErrorComponent:()=>el,GitHubBanner:()=>xl,LayoutWrapper:()=>hl,LoginPage:()=>po,ReadyPage:()=>fo,Refine:()=>yl,ResourceContext:()=>vt,RouteChangeHandler:()=>yo,TranslationContext:()=>Ze,UndoableQueue:()=>go,WelcomePage:()=>ll,createTreeView:()=>vn,file2Base64:()=>on,generateDefaultDocumentTitle:()=>Pn,getDefaultFilter:()=>an,getDefaultSortOrder:()=>rn,getNextPageParam:()=>Oa,getPreviousPageParam:()=>Qa,handleUseParams:()=>nn,importCSVMapper:()=>La,legacyResourceTransform:()=>Ua,matchResourceFromRoute:()=>mn,parseTableParams:()=>vr,parseTableParamsFromQuery:()=>tn,pickNotDeprecated:()=>A,routeGenerator:()=>$a,setInitialFilters:()=>ir,setInitialSorters:()=>lr,stringifyTableParams:()=>or,unionFilters:()=>ct,unionSorters:()=>nr,useActiveAuthProvider:()=>re,useApiUrl:()=>$n,useAuthenticated:()=>Zo,useBack:()=>lo,useBreadcrumb:()=>Yi,useCan:()=>mo,useCanWithoutCache:()=>Oi,useCancelNotification:()=>ot,useCheckError:()=>Go,useCreate:()=>yr,useCreateMany:()=>Va,useCustom:()=>An,useCustomMutation:()=>Qn,useDataProvider:()=>le,useDelete:()=>Ln,useDeleteMany:()=>kn,useExport:()=>hi,useForgotPassword:()=>xa,useForm:()=>Ei,useGetIdentity:()=>Ta,useGetLocale:()=>ui,useGetToPath:()=>Pr,useGo:()=>Ce,useHandleNotification:()=>fe,useImport:()=>Di,useInfiniteList:()=>Wn,useInvalidate:()=>Ye,useIsAuthenticated:()=>cr,useIsExistAuthentication:()=>Sa,useLink:()=>At,useList:()=>fr,useLiveMode:()=>to,useLoadingOvertime:()=>oe,useLog:()=>Ge,useLogList:()=>ji,useLogin:()=>dr,useLogout:()=>ar,useMany:()=>Ia,useMenu:()=>Xi,useMeta:()=>ee,useModal:()=>Si,useMutationMode:()=>nt,useNavigation:()=>Te,useNotification:()=>Be,useOnError:()=>pe,useOne:()=>gr,useParse:()=>Xa,useParsed:()=>Fe,usePermissions:()=>Ho,usePublish:()=>_e,useRedirectionAfterSubmission:()=>io,useRefineContext:()=>Nt,useRegister:()=>wa,useResource:()=>_,useResourceSubscription:()=>ft,useResourceWithRoute:()=>eo,useRouterContext:()=>ge,useRouterType:()=>ae,useSelect:()=>Bi,useSetLocale:()=>si,useShow:()=>Ti,useSubscription:()=>ti,useSyncWithLocation:()=>no,useTable:()=>Wi,useTitle:()=>pi,useToPath:()=>Fi,useTranslate:()=>Y,useUpdate:()=>Ha,useUpdateMany:()=>Rn,useUpdatePassword:()=>Da,useWarnAboutChange:()=>Er,userFriendlyResourceName:()=>kt});ho.exports=Bo(Ea);var Ve=N(P("react")),at=N(P("react")),Pa=at.default.createContext({}),Io=({children:e,isProvided:t,...r})=>{let{replace:a}=Te(),o=async v=>{var c;try{return await((c=r.login)==null?void 0:c.call(r,v))}catch(m){return Promise.reject(m)}},n=async v=>{var c;try{return await((c=r.register)==null?void 0:c.call(r,v))}catch(m){return Promise.reject(m)}},i=async v=>{var c;try{return await((c=r.logout)==null?void 0:c.call(r,v))}catch(m){return Promise.reject(m)}},d=async v=>{var c;try{return await((c=r.checkAuth)==null?void 0:c.call(r,v)),Promise.resolve()}catch(m){return m!=null&&m.redirectPath&&a(m.redirectPath),Promise.reject(m)}};return at.default.createElement(Pa.Provider,{value:{...r,login:o,logout:i,checkAuth:d,register:n,isProvided:t}},e)},Ca=at.default.createContext({}),Wo=({children:e,isProvided:t,...r})=>{let a=async c=>{var m;try{return await((m=r.login)==null?void 0:m.call(r,c))}catch(s){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",s),Promise.reject(s)}},o=async c=>{var m;try{return await((m=r.register)==null?void 0:m.call(r,c))}catch(s){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",s),Promise.reject(s)}},n=async c=>{var m;try{return await((m=r.logout)==null?void 0:m.call(r,c))}catch(s){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",s),Promise.reject(s)}},i=async c=>{var m;try{let s=await((m=r.check)==null?void 0:m.call(r,c));return Promise.resolve(s)}catch(s){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",s),Promise.reject(s)}},d=async c=>{var m;try{let s=await((m=r.forgotPassword)==null?void 0:m.call(r,c));return Promise.resolve(s)}catch(s){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",s),Promise.reject(s)}},v=async c=>{var m;try{let s=await((m=r.updatePassword)==null?void 0:m.call(r,c));return Promise.resolve(s)}catch(s){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",s),Promise.reject(s)}};return at.default.createElement(Ca.Provider,{value:{...r,login:a,logout:n,check:i,register:o,forgotPassword:d,updatePassword:v,isProvided:t}},e)},Ee=()=>at.default.useContext(Pa),Le=()=>at.default.useContext(Ca),Mr=P("@tanstack/react-query");function Ho({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Ee(),{getPermissions:a}=Le(),o=(0,Mr.useQuery)(["usePermissions"],a??(()=>Promise.resolve(void 0)),{enabled:!e&&!!a,...e?{}:t}),n=(0,Mr.useQuery)(["usePermissions","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve(void 0)),{enabled:e&&!!r,...e?t:{}});return e?n:o}var kr=P("@tanstack/react-query");function Ta({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Ee(),{getIdentity:a}=Le(),o=(0,kr.useQuery)(["getUserIdentity"],a??(()=>Promise.resolve({})),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t}),n=(0,kr.useQuery)(["getUserIdentity","v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve({})),{enabled:e&&!!r,retry:!1,...e?t:{}});return e?n:o}var $r=P("@tanstack/react-query"),Vo=P("@tanstack/react-query"),ur=()=>{let e=(0,Vo.useQueryClient)();return async()=>{await Promise.all([e.invalidateQueries(["useAuthenticated"]),e.invalidateQueries(["getUserIdentity"]),e.invalidateQueries(["usePermissions"])])}};function ar({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ur(),a=ae(),o=Ce(),{push:n}=Te(),{open:i,close:d}=Be(),{logout:v}=Ee(),{logout:c}=Le(),m=(0,$r.useMutation)(["useLogout"],c,{onSuccess:async(h,l)=>{let{success:f,error:u,redirectTo:y}=h,{redirectPath:g}=l??{},C=g??y;f&&(d==null||d("useLogout-error")),(u||!f)&&(i==null||i(Vt(u))),await r(),C!==!1&&(a==="legacy"?n(C??"/login"):C&&o({to:C}))},onError:h=>{i==null||i(Vt(h))},...e===!0?{}:t}),s=(0,$r.useMutation)(["useLogout","v3LegacyAuthProviderCompatible"],v,{onSuccess:async(h,l)=>{let f=(l==null?void 0:l.redirectPath)??h;if(await r(),f!==!1){if(f){a==="legacy"?n(f):o({to:f});return}a==="legacy"?n("/login"):o({to:"/login"})}},onError:h=>{i==null||i(Vt(h))},...e?t:{}});return e?s:m}var Vt=e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),zo=N(P("react")),Nr=P("@tanstack/react-query"),jo=N(P("qs"));function dr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ur(),a=ae(),o=Ce(),{replace:n}=Te(),i=Fe(),{useLocation:d}=ge(),{search:v}=d(),{close:c,open:m}=Be(),{login:s}=Ee(),{login:h}=Le(),l=zo.default.useMemo(()=>{var y;return a==="legacy"?jo.default.parse(v,{ignoreQueryPrefix:!0}).to:(y=i.params)==null?void 0:y.to},[a,i.params,v]),f=(0,Nr.useMutation)(["useLogin"],h,{onSuccess:async({success:y,redirectTo:g,error:C})=>{y&&(c==null||c("login-error")),(C||!y)&&(m==null||m(zt(C))),await r(),l&&y?a==="legacy"?n(l):o({to:l,type:"replace"}):g?a==="legacy"?n(g):o({to:g,type:"replace"}):a==="legacy"&&n("/")},onError:y=>{m==null||m(zt(y))},...e===!0?{}:t}),u=(0,Nr.useMutation)(["useLogin","v3LegacyAuthProviderCompatible"],s,{onSuccess:async y=>{await r(),l&&n(l),y!==!1&&!l&&(typeof y=="string"?a==="legacy"?n(y):o({to:y,type:"replace"}):a==="legacy"?n("/"):o({to:"/",type:"replace"})),c==null||c("login-error")},onError:y=>{m==null||m(zt(y))},...e?t:{}});return e?u:f}var zt=e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),Ar=P("@tanstack/react-query");function wa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ur(),a=ae(),o=Ce(),{replace:n}=Te(),{register:i}=Ee(),{register:d}=Le(),{close:v,open:c}=Be(),m=(0,Ar.useMutation)(["useRegister"],d,{onSuccess:async({success:h,redirectTo:l,error:f})=>{h&&(v==null||v("register-error")),(f||!h)&&(c==null||c(jt(f))),await r(),l?a==="legacy"?n(l):o({to:l,type:"replace"}):a==="legacy"&&n("/")},onError:h=>{c==null||c(jt(h))},...e===!0?{}:t}),s=(0,Ar.useMutation)(["useRegister","v3LegacyAuthProviderCompatible"],i,{onSuccess:async h=>{await r(),h!==!1&&(h?a==="legacy"?n(h):o({to:h,type:"replace"}):a==="legacy"?n("/"):o({to:"/",type:"replace"}),v==null||v("register-error"))},onError:h=>{c==null||c(jt(h))},...e?t:{}});return e?s:m}var jt=e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),Or=P("@tanstack/react-query");function xa({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ae(),a=Ce(),{replace:o}=Te(),{forgotPassword:n}=Ee(),{forgotPassword:i}=Le(),{close:d,open:v}=Be(),c=(0,Or.useMutation)(["useForgotPassword"],i,{onSuccess:({success:s,redirectTo:h,error:l})=>{s&&(d==null||d("forgot-password-error")),(l||!s)&&(v==null||v(Kt(l))),h&&(r==="legacy"?o(h):a({to:h,type:"replace"}))},onError:s=>{v==null||v(Kt(s))},...e===!0?{}:t}),m=(0,Or.useMutation)(["useForgotPassword","v3LegacyAuthProviderCompatible"],n,{onSuccess:s=>{s!==!1&&s&&(r==="legacy"?o(s):a({to:s,type:"replace"})),d==null||d("forgot-password-error")},onError:s=>{v==null||v(Kt(s))},...e?t:{}});return e?m:c}var Kt=e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),Ko=N(P("react")),Qr=P("@tanstack/react-query"),_o=N(P("qs"));function Da({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ae(),a=Ce(),{replace:o}=Te(),{updatePassword:n}=Ee(),{updatePassword:i}=Le(),{close:d,open:v}=Be(),c=Fe(),{useLocation:m}=ge(),{search:s}=m(),h=Ko.default.useMemo(()=>r==="legacy"?_o.default.parse(s,{ignoreQueryPrefix:!0})??{}:c.params??{},[s,c,r]),l=(0,Qr.useMutation)(["useUpdatePassword"],async u=>i==null?void 0:i({...h,...u}),{onSuccess:({success:u,redirectTo:y,error:g})=>{u&&(d==null||d("update-password-error")),(g||!u)&&(v==null||v(_t(g))),y&&(r==="legacy"?o(y):a({to:y,type:"replace"}))},onError:u=>{v==null||v(_t(u))},...e===!0?{}:t}),f=(0,Qr.useMutation)(["useUpdatePassword","v3LegacyAuthProviderCompatible"],async u=>n==null?void 0:n({...h,...u}),{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?o(u):a({to:u,type:"replace"})),d==null||d("update-password-error")},onError:u=>{v==null||v(_t(u))},...e?t:{}});return e?f:l}var _t=e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),Ur=P("@tanstack/react-query");function cr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Ee(),{check:a}=Le(),o=(0,Ur.useQuery)(["useAuthenticated",t],async()=>await(a==null?void 0:a(t))??{},{retry:!1,enabled:!e}),n=(0,Ur.useQuery)(["useAuthenticated",t,"v3LegacyAuthProviderCompatible"],async()=>await(r==null?void 0:r(t))??{},{retry:!1,enabled:e});return e?n:o}var Zo=cr,Br=P("@tanstack/react-query");function pe({v3LegacyAuthProviderCompatible:e=!1}={}){let t=ae(),r=Ce(),{replace:a}=Te(),{checkError:o}=Ee(),{onError:n}=Le(),{mutate:i}=ar({v3LegacyAuthProviderCompatible:!!e}),{mutate:d}=ar({v3LegacyAuthProviderCompatible:!!e}),v=(0,Br.useMutation)(["useCheckError"],n,{onSuccess:({logout:m,redirectTo:s})=>{if(m){d({redirectPath:s});return}if(s){t==="legacy"?a(s):r({to:s,type:"replace"});return}}}),c=(0,Br.useMutation)(["useCheckError","v3LegacyAuthProviderCompatible"],o,{onError:m=>{i({redirectPath:m})}});return e?c:v}var Go=pe,Sa=()=>{let{isProvided:e}=Ee(),{isProvided:t}=Le();return!!(t||e)},Yo=P("@tanstack/react-query"),Zt=e=>e/1e3,Jo=N(P("lodash/zip")),Xo=N(P("lodash/fromPairs")),La=(e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,Xo.default)((0,Jo.default)(r,o))).map((o,n,i)=>t.call(void 0,o,n,i))},Ir=N(P("pluralize")),mr=N(P("qs")),Fa=N(P("lodash/unionWith")),qa=N(P("lodash/differenceWith")),en=N(P("warn-once")),vr=e=>{let{current:t,pageSize:r,sorter:a,sorters:o,filters:n}=mr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:A(o,a)??[],parsedFilters:n??[]}},tn=e=>{let t=mr.default.stringify(e);return vr(`/${t}`)},or=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:o,filters:n,...i}=e;return mr.default.stringify({...i,...r||{},sorters:A(o,a),filters:n},t)},Ra=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Ma=(e,t)=>e.field==t.field,ct=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,en.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Fa.default)(e,t,r,Ra).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),nr=(e,t)=>(0,Fa.default)(e,t,Ma).filter(r=>r.order!==void 0&&r.order!==null),ir=(e,t)=>[...(0,qa.default)(t,e,Ra),...e],lr=(e,t)=>[...(0,qa.default)(t,e,Ma),...e],rn=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},an=(e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:n,field:i}=o;return i===e&&n===r}});if(a)return a.value||[]},on=e=>new Promise((t,r)=>{let a=new FileReader,o=()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))};a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=n=>(a.removeEventListener("load",o,!1),r(n))}),kt=(e="",t)=>{let r=Lt(e);return t==="singular"?Ir.default.singular(r):Ir.default.plural(r)},nn=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,A=(...e)=>e.find(t=>typeof t<"u"),Pe=(e,t,r,a)=>{let o=t||"default",n={all:[o],resourceAll:[o,e||""],list:i=>[...n.resourceAll,"list",{...i,...A(r,a)||{}}],many:i=>[...n.resourceAll,"getMany",i&&i.map(String),{...A(r,a)||{}}].filter(d=>d!==void 0),detail:i=>[...n.resourceAll,"detail",i==null?void 0:i.toString(),{...A(r,a)||{}}],logList:i=>["logList",e,i,a].filter(d=>d!==void 0)};return n},ln=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),pr=e=>e.startsWith(":"),rt=e=>e.split("/").filter(t=>t!==""),sn=(e,t)=>{let r=rt(e),a=rt(t);return r.length===a.length},Ne=e=>e.replace(/^\/|\/$/g,""),un=(e,t)=>{let r=Ne(e),a=Ne(t);if(!sn(r,a))return!1;let o=rt(r);return rt(a).every((n,i)=>pr(n)||n===o[i])},dn=(e,t,r)=>{let a=Ne(r||""),o=`${a}${a?"/":""}${e}`;return t==="list"?o=`${o}`:t==="create"?o=`${o}/create`:t==="edit"?o=`${o}/edit/:id`:t==="show"?o=`${o}/show/:id`:t==="clone"&&(o=`${o}/clone/:id`),`/${o.replace(/^\//,"")}`},Qe=(e,t)=>{var r,a;let o=A((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);return o?t.find(n=>(n.identifier??n.name)===o)??{name:o}:void 0},ka=(e,t,r)=>{let a=[],o=Qe(e,t);for(;o;)a.push(o),o=Qe(o,t);if(a.length!==0)return`/${a.reverse().map(n=>{var i;let d=r?((i=n.options)==null?void 0:i.route)??n.name:n.name;return Ne(d)}).join("/")}`},me=(e,t,r)=>{let a=[],o=["list","show","edit","create","clone"],n=ka(e,t,r);return o.forEach(i=>{var d,v;let c=r&&i==="clone"?e.create:e[i],m;typeof c=="function"||r?m=dn(r?((d=e.meta)==null?void 0:d.route)??((v=e.options)==null?void 0:v.route)??e.name:e.name,i,r?n:void 0):typeof c=="string"?m=c:typeof c=="object"&&(m=c.path),m&&a.push({action:i,resource:e,route:`/${m.replace(/^\//,"")}`})}),a},cn=e=>{var t;if(e.length===0)return;if(e.length===1)return e[0];let r=e.map(n=>({...n,splitted:rt(Ne(n.route))})),a=((t=r[0])==null?void 0:t.splitted.length)??0,o=[...r];for(let n=0;n<a;n++){let i=o.filter(d=>!pr(d.splitted[n]));if(i.length!==0){if(i.length===1){o=i;break}o=i}}return o[0]},mn=(e,t)=>{let r=t.flatMap(o=>me(o,t)).filter(o=>un(e,o.route)),a=cn(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},$a=(e,t)=>{var r;let a,o=ka(e,t,!0);if(o){let n=A(e.meta,e.options);a=`${o}/${(n==null?void 0:n.route)??e.name}`}else a=((r=e.options)==null?void 0:r.route)??e.name;return`/${a.replace(/^\//,"")}`},vn=e=>{var t;let r=[],a={},o={},n,i;for(let d=0;d<e.length;d++){n=e[d];let v=n.route??((t=A(n==null?void 0:n.meta,n.options))==null?void 0:t.route)??"";a[v]=n,a[v].children=[],o[n.name]=n,o[n.name].children=[]}for(let d in a)a.hasOwnProperty(d)&&(i=a[d],i.parentName&&o[i.parentName]?o[i.parentName].children.push(i):r.push(i));return r},Lt=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Na=N(P("react")),pn=N(P("react")),Aa=({children:e})=>pn.default.createElement("div",null,e),Re={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3}},Ue=Na.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Aa,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Re}),fn=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:n,DashboardPage:i,Title:d,Layout:v=Aa,Header:c,Sider:m,Footer:s,OffLayoutArea:h,LoginPage:l=po,catchAll:f,liveMode:u="off",onLiveEvent:y,options:g})=>Na.default.createElement(Ue.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:d,undoableTimeout:o,Layout:v,Header:c,Sider:m,Footer:s,OffLayoutArea:h,DashboardPage:i,LoginPage:l,catchAll:f,liveMode:u,onLiveEvent:y,options:g}},n),gn=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:n,syncWithLocation:i,undoableTimeout:d,warnWhenUnsavedChanges:v}={})=>{var c,m,s,h,l;let f={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??a??Re.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??d??Re.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??i??Re.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??v??Re.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??Re.liveMode,redirect:{afterCreate:((c=e==null?void 0:e.redirect)==null?void 0:c.afterCreate)??Re.redirect.afterCreate,afterClone:((m=e==null?void 0:e.redirect)==null?void 0:m.afterClone)??Re.redirect.afterClone,afterEdit:((s=e==null?void 0:e.redirect)==null?void 0:s.afterEdit)??Re.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??Re.overtime},u=(e==null?void 0:e.disableTelemetry)??t??!1,y={clientConfig:((h=e==null?void 0:e.reactQuery)==null?void 0:h.clientConfig)??o??{},devtoolConfig:((l=e==null?void 0:e.reactQuery)==null?void 0:l.devtoolConfig)??n??{}};return{optionsWithDefaults:f,disableTelemetryWithDefault:u,reactQueryWithDefaults:y}},yn=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},Wr=async(e,t,r)=>{let a=[];for(let[o,n]of e.entries())try{let i=await n();a.push(t(i,o))}catch(i){a.push(r(i,o))}return a},ie=(e,t=[],r=!1)=>{if(!e)return;if(r)return t.find(n=>Ne(n.route??"")===Ne(e))||t.find(n=>n.name===e);let a=t.find(o=>o.identifier===e);return a||(a=t.find(o=>o.name===e)),a},z=(e,t,r)=>{if(t)return t;let a=ie(e,r),o=A(a==null?void 0:a.meta,a==null?void 0:a.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"},$t=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Oa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,n=Math.ceil((e.total||0)/o);return a<n?Number(a)+1:void 0},Qa=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Ua=e=>{let t=[];return e.forEach(r=>{var a,o;t.push({...r,label:((a=r.meta)==null?void 0:a.label)??((o=r.options)==null?void 0:o.label),route:$a(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},hn=e=>rt(Ne(e)).flatMap(t=>pr(t)?[t.slice(1)]:[]),bn=(e,t={})=>e.reduce((r,a)=>{let o=t[a];return typeof o<"u"&&(r[a]=o),r},{}),be=(e,t={},r={},a={})=>{let o=hn(e),n=bn(o,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...a});return e.replace(/:([^\/]+)/g,(i,d)=>{let v=n[d];return typeof v<"u"?`${v}`:i})},re=()=>{let e=Ee(),t=Le();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},Ba=({hasPagination:e,pagination:t,configPagination:r}={})=>{let a=e===!1?"off":"server",o=(t==null?void 0:t.mode)??a,n=A(t==null?void 0:t.current,r==null?void 0:r.current)??1,i=A(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:n,pageSize:i,mode:o}},Hr=P("react"),Vr=e=>{let[t,r]=(0,Hr.useState)(!1);return(0,Hr.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let o=()=>r(a.matches);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[t,e]),t},En=N(P("lodash/capitalize"));function Pn(e,t,r,a){var o;let n={create:"Create new ",clone:`#${a??""} Clone `,edit:`#${a??""} Edit `,show:`#${a??""} Show `,list:""},i=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),d=(t==null?void 0:t.label)??((o=t==null?void 0:t.meta)==null?void 0:o.label)??(0,En.default)(kt(i,r==="list"?"plural":"singular")),v=e("documentTitle.default","refine"),c=e("documentTitle.suffix"," | refine"),m=v;return r&&i&&(m=e(`documentTitle.${i}.${r}`,{id:a},`${n[r]??""}${d}${c}`)),m}var Gt=P("react"),oe=({isLoading:e,interval:t,onInterval:r})=>{let[a,o]=(0,Gt.useState)(void 0),{options:n}=Nt(),{overtime:i}=n,d=t??i.interval,v=r??(i==null?void 0:i.onInterval);return(0,Gt.useEffect)(()=>{let c;return e&&(c=setInterval(()=>{o(m=>m===void 0?d:m+d)},d)),()=>{clearInterval(c),o(void 0)}},[e,d]),(0,Gt.useEffect)(()=>{v&&a&&v(a)},[a]),{elapsedTime:a}},fr=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:n,queryOptions:i,successNotification:d,errorNotification:v,meta:c,metaData:m,liveMode:s,onLiveEvent:h,liveParams:l,dataProviderName:f,overtimeOptions:u})=>{let{resources:y,resource:g,identifier:C}=_(e),p=le(),b=Y(),x=re(),{mutate:E}=pe({v3LegacyAuthProviderCompatible:!!(x!=null&&x.isLegacy)}),S=fe(),F=ee(),T=z(C,f,y),D=A(c,m),q=A(r,t==null?void 0:t.filters),L=A(n,t==null?void 0:t.sort),k=A(a,t==null?void 0:t.hasPagination),w=Ba({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:k}),R=w.mode==="server",M=F({resource:g,meta:D}),$={meta:M,metaData:M,filters:q,hasPagination:R,pagination:w,sorters:L,config:{...t,sort:L}},U=(i==null?void 0:i.enabled)===void 0||(i==null?void 0:i.enabled)===!0,I=Pe(C,T,D),{getList:B}=p(T);ft({resource:C,types:["*"],params:{meta:M,metaData:M,pagination:w,hasPagination:R,sort:L,sorters:L,filters:q,subscriptionType:"useList",...l},channel:`resources/${g==null?void 0:g.name}`,enabled:U,liveMode:s,onLiveEvent:h});let j=(0,Yo.useQuery)(I.list({filters:q,hasPagination:R,...R&&{pagination:w},...n&&{sorters:n},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:O,pageParam:W,signal:Q})=>B({resource:(g==null?void 0:g.name)??"",pagination:w,hasPagination:R,filters:q,sort:L,sorters:L,meta:{...M,queryContext:{queryKey:O,pageParam:W,signal:Q}},metaData:{...M,queryContext:{queryKey:O,pageParam:W,signal:Q}}}),{...i,enabled:typeof(i==null?void 0:i.enabled)<"u"?i==null?void 0:i.enabled:!!(g!=null&&g.name),select:O=>{var W;let Q=O,{current:V,mode:we,pageSize:Ae}=w;return we==="client"&&(Q={...Q,data:Q.data.slice((V-1)*Ae,V*Ae),total:Q.total}),i!=null&&i.select?(W=i==null?void 0:i.select)==null?void 0:W.call(i,Q):Q},onSuccess:O=>{var W;(W=i==null?void 0:i.onSuccess)==null||W.call(i,O);let Q=typeof d=="function"?d(O,$,C):d;S(Q)},onError:O=>{var W;E(O),(W=i==null?void 0:i.onError)==null||W.call(i,O);let Q=typeof v=="function"?v(O,$,C):v;S(Q,{key:`${C}-useList-notification`,message:b("notifications.error",{statusCode:O.statusCode},`Error (status code: ${O.statusCode})`),description:O.message,type:"error"})}}),{elapsedTime:H}=oe({isLoading:j.isFetching,interval:u==null?void 0:u.interval,onInterval:u==null?void 0:u.onInterval});return{...j,overtime:{elapsedTime:H}}},Cn=P("@tanstack/react-query"),gr=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,meta:n,metaData:i,liveMode:d,onLiveEvent:v,liveParams:c,dataProviderName:m,overtimeOptions:s})=>{let{resources:h,resource:l,identifier:f}=_(e),u=le(),y=Y(),g=re(),{mutate:C}=pe({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),p=fe(),b=ee(),x=A(n,i),E=z(f,m,h),S=Pe(f,E,x),{getOne:F}=u(E),T=b({resource:l,meta:x});ft({resource:f,types:["*"],channel:`resources/${l==null?void 0:l.name}`,params:{ids:t?[t]:[],id:t,meta:T,metaData:T,subscriptionType:"useOne",...c},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(l==null?void 0:l.name)<"u"&&typeof t<"u",liveMode:d,onLiveEvent:v});let D=(0,Cn.useQuery)(S.detail(t),({queryKey:L,pageParam:k,signal:w})=>F({resource:(l==null?void 0:l.name)??"",id:t,meta:{...T,queryContext:{queryKey:L,pageParam:k,signal:w}},metaData:{...T,queryContext:{queryKey:L,pageParam:k,signal:w}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:L=>{var k;(k=r==null?void 0:r.onSuccess)==null||k.call(r,L);let w=typeof a=="function"?a(L,{id:t,...T},f):a;p(w)},onError:L=>{var k;C(L),(k=r==null?void 0:r.onError)==null||k.call(r,L);let w=typeof o=="function"?o(L,{id:t,...T},f):o;p(w,{key:`${t}-${f}-getOne-notification`,message:y("notifications.error",{statusCode:L.statusCode},`Error (status code: ${L.statusCode})`),description:L.message,type:"error"})}}),{elapsedTime:q}=oe({isLoading:D.isFetching,interval:s==null?void 0:s.interval,onInterval:s==null?void 0:s.onInterval});return{...D,overtime:{elapsedTime:q}}},Tn=P("@tanstack/react-query"),Ia=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,meta:n,metaData:i,liveMode:d,onLiveEvent:v,liveParams:c,dataProviderName:m,overtimeOptions:s})=>{let{resources:h,resource:l,identifier:f}=_(e),u=le(),y=Y(),g=re(),{mutate:C}=pe({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),p=fe(),b=ee(),x=A(n,i),E=z(f,m,h),S=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,F=Pe(f,E,x),{getMany:T,getOne:D}=u(E),q=b({resource:l,meta:x});ft({resource:f,types:["*"],params:{ids:t,meta:q,metaData:q,subscriptionType:"useMany",...c},channel:`resources/${l.name}`,enabled:S,liveMode:d,onLiveEvent:v});let L=(0,Tn.useQuery)(F.many(t),({queryKey:w,pageParam:R,signal:M})=>T?T({resource:l==null?void 0:l.name,ids:t,meta:{...q,queryContext:{queryKey:w,pageParam:R,signal:M}},metaData:{...q,queryContext:{queryKey:w,pageParam:R,signal:M}}}):$t(t.map($=>D({resource:l==null?void 0:l.name,id:$,meta:{...q,queryContext:{queryKey:w,pageParam:R,signal:M}},metaData:{...q,queryContext:{queryKey:w,pageParam:R,signal:M}}}))),{...r,onSuccess:w=>{var R;(R=r==null?void 0:r.onSuccess)==null||R.call(r,w);let M=typeof a=="function"?a(w,t,f):a;p(M)},onError:w=>{var R;C(w),(R=r==null?void 0:r.onError)==null||R.call(r,w);let M=typeof o=="function"?o(w,t,f):o;p(M,{key:`${t[0]}-${f}-getMany-notification`,message:y("notifications.error",{statusCode:w.statusCode},`Error (status code: ${w.statusCode})`),description:w.message,type:"error"})}}),{elapsedTime:k}=oe({isLoading:L.isFetching,interval:s==null?void 0:s.interval,onInterval:s==null?void 0:s.onInterval});return{...L,overtime:{elapsedTime:k}}},zr=P("@tanstack/react-query"),Ft=N(P("react")),Yt=N(P("lodash/isEqual")),Wa=Ft.default.createContext({notifications:[],notificationDispatch:()=>!1}),wn=[],xn=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Yt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Yt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Yt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Dn=({children:e})=>{let[t,r]=(0,Ft.useReducer)(xn,wn),a={notifications:t,notificationDispatch:r};return Ft.default.createElement(Wa.Provider,{value:a},e,typeof window<"u"&&t.map(o=>Ft.default.createElement(go,{key:`${o.id}-${o.resource}-queue`,notification:o})))},jr=N(P("pluralize")),Ha=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=_(),o=(0,zr.useQueryClient)(),n=le(),{mutationMode:i,undoableTimeout:d}=nt(),v=Y(),c=re(),{mutate:m}=pe({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),s=_e(),{log:h}=Ge(),{notificationDispatch:l}=ot(),f=fe(),u=Ye(),y=ee(),g=(0,zr.useMutation)(({id:p,values:b,resource:x,mutationMode:E,undoableTimeout:S,onCancel:F,meta:T,metaData:D,dataProviderName:q})=>{let{resource:L,identifier:k}=a(x),w=y({resource:L,meta:A(T,D)}),R=E??i,M=S??d;return R!=="undoable"?n(z(k,q,r)).update({resource:L.name,id:p,variables:b,meta:w,metaData:w}):new Promise(($,U)=>{let I=()=>{n(z(k,q,r)).update({resource:L.name,id:p,variables:b,meta:w,metaData:w}).then(j=>$(j)).catch(j=>U(j))},B=()=>{U({message:"mutationCancelled"})};F&&F(B),l({type:"ADD",payload:{id:p,resource:k,cancelMutation:B,doMutation:I,seconds:M,isSilent:!!F}})})},{onMutate:async({resource:p,id:b,mutationMode:x,values:E,dataProviderName:S,meta:F,metaData:T})=>{let{identifier:D}=a(p),q=A(F,T),L=Pe(D,z(D,S,r),q),k=o.getQueriesData(L.resourceAll),w=x??i;return await o.cancelQueries(L.resourceAll,void 0,{silent:!0}),w!=="pessimistic"&&(o.setQueriesData(L.list(),R=>{if(!R)return null;let M=R.data.map($=>{var U;return((U=$.id)==null?void 0:U.toString())===(b==null?void 0:b.toString())?{id:b,...$,...E}:$});return{...R,data:M}}),o.setQueriesData(L.many(),R=>{if(!R)return null;let M=R.data.map($=>{var U;return((U=$.id)==null?void 0:U.toString())===(b==null?void 0:b.toString())&&($={id:b,...$,...E}),$});return{...R,data:M}}),o.setQueriesData(L.detail(b),R=>R?{...R,data:{...R.data,...E}}:null)),{previousQueries:k,queryKey:L}},onSettled:(p,b,{id:x,resource:E,dataProviderName:S,invalidates:F=["list","many","detail"]})=>{let{identifier:T}=a(E);u({resource:T,dataProviderName:z(T,S,r),invalidates:F,id:x}),l({type:"REMOVE",payload:{id:x,resource:T}})},onSuccess:(p,{id:b,resource:x,successNotification:E,dataProviderName:S,values:F,meta:T,metaData:D},q)=>{var L;let{resource:k,identifier:w}=a(x),R=jr.default.singular(w),M=typeof E=="function"?E(p,{id:b,values:F},w):E;f(M,{key:`${b}-${w}-notification`,description:v("notifications.success","Successful"),message:v("notifications.editSuccess",{resource:v(`${w}.${w}`,R)},`Successfully updated ${R}`),type:"success"}),s==null||s({channel:`resources/${k.name}`,type:"updated",payload:{ids:(L=p.data)!=null&&L.id?[p.data.id]:void 0},date:new Date});let $;if(q){let H=o.getQueryData(q.queryKey.detail(b));$=Object.keys(F||{}).reduce((O,W)=>{var Q;return O[W]=(Q=H==null?void 0:H.data)==null?void 0:Q[W],O},{})}let{fields:U,operation:I,variables:B,...j}=A(T,D)||{};h==null||h.mutate({action:"update",resource:k.name,data:F,previousData:$,meta:{id:b,dataProviderName:z(w,S,r),...j}})},onError:(p,{id:b,resource:x,errorNotification:E,values:S},F)=>{let{identifier:T}=a(x);if(F)for(let D of F.previousQueries)o.setQueryData(D[0],D[1]);if(p.message!=="mutationCancelled"){m==null||m(p);let D=jr.default.singular(T),q=typeof E=="function"?E(p,{id:b,values:S},T):E;f(q,{key:`${b}-${T}-notification`,message:v("notifications.editError",{resource:v(`${T}.${T}`,D),statusCode:p.statusCode},`Error when updating ${D} (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e}),{elapsedTime:C}=oe({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:C}}},Sn=P("@tanstack/react-query"),Kr=N(P("pluralize")),yr=({mutationOptions:e,overtimeOptions:t}={})=>{let r=re(),{mutate:a}=pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=le(),n=Ye(),{resources:i,select:d}=_(),v=Y(),c=_e(),{log:m}=Ge(),s=fe(),h=ee(),l=(0,Sn.useMutation)(({resource:u,values:y,meta:g,metaData:C,dataProviderName:p})=>{let{resource:b,identifier:x}=d(u),E=h({resource:b,meta:A(g,C)});return o(z(x,p,i)).create({resource:b.name,variables:y,meta:E,metaData:E})},{onSuccess:(u,{resource:y,successNotification:g,dataProviderName:C,invalidates:p=["list","many"],values:b,meta:x,metaData:E})=>{var S,F;let{resource:T,identifier:D}=d(y),q=Kr.default.singular(D),L=typeof g=="function"?g(u,b,D):g;s(L,{key:`create-${D}-notification`,message:v("notifications.createSuccess",{resource:v(`${D}.${D}`,q)},`Successfully created ${q}`),description:v("notifications.success","Success"),type:"success"}),n({resource:D,dataProviderName:z(D,C,i),invalidates:p}),c==null||c({channel:`resources/${T.name}`,type:"created",payload:{ids:(S=u==null?void 0:u.data)!=null&&S.id?[u.data.id]:void 0},date:new Date});let k=h({resource:T,meta:A(x,E)}),{fields:w,operation:R,variables:M,...$}=k||{};m==null||m.mutate({action:"create",resource:T.name,data:b,meta:{dataProviderName:z(D,C,i),id:((F=u==null?void 0:u.data)==null?void 0:F.id)??void 0,...$}})},onError:(u,{resource:y,errorNotification:g,values:C})=>{a(u);let{identifier:p}=d(y),b=Kr.default.singular(p),x=typeof g=="function"?g(u,C,p):g;s(x,{key:`create-${p}-notification`,description:u.message,message:v("notifications.createError",{resource:v(`${p}.${p}`,b),statusCode:u.statusCode},`There was an error creating ${b} (status code: ${u.statusCode})`),type:"error"})},...e}),{elapsedTime:f}=oe({isLoading:l.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...l,overtime:{elapsedTime:f}}},_r=P("@tanstack/react-query"),Zr=N(P("pluralize")),Ln=({mutationOptions:e,overtimeOptions:t}={})=>{let r=re(),{mutate:a}=pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=le(),{resources:n,select:i}=_(),d=(0,_r.useQueryClient)(),{mutationMode:v,undoableTimeout:c}=nt(),{notificationDispatch:m}=ot(),s=Y(),h=_e(),{log:l}=Ge(),f=fe(),u=Ye(),y=ee(),g=(0,_r.useMutation)(({id:p,mutationMode:b,undoableTimeout:x,resource:E,onCancel:S,meta:F,metaData:T,dataProviderName:D,values:q})=>{let{resource:L,identifier:k}=i(E),w=y({resource:L,meta:A(F,T)}),R=b??v,M=x??c;return R!=="undoable"?o(z(k,D,n)).deleteOne({resource:L.name,id:p,meta:w,metaData:w,variables:q}):new Promise(($,U)=>{let I=()=>{o(z(k,D,n)).deleteOne({resource:L.name,id:p,meta:w,metaData:w,variables:q}).then(j=>$(j)).catch(j=>U(j))},B=()=>{U({message:"mutationCancelled"})};S&&S(B),m({type:"ADD",payload:{id:p,resource:k,cancelMutation:B,doMutation:I,seconds:M,isSilent:!!S}})})},{onMutate:async({id:p,resource:b,mutationMode:x,dataProviderName:E,meta:S,metaData:F})=>{let{identifier:T}=i(b),D=A(S,F),q=Pe(T,z(T,E,n),D),L=x??v;await d.cancelQueries(q.resourceAll,void 0,{silent:!0});let k=d.getQueriesData(q.resourceAll);return L!=="pessimistic"&&(d.setQueriesData(q.list(),w=>w?{data:w.data.filter(R=>{var M;return((M=R.id)==null?void 0:M.toString())!==p.toString()}),total:w.total-1}:null),d.setQueriesData(q.many(),w=>{if(!w)return null;let R=w.data.filter(M=>{var $;return(($=M.id)==null?void 0:$.toString())!==(p==null?void 0:p.toString())});return{...w,data:R}})),{previousQueries:k,queryKey:q}},onSettled:(p,b,{id:x,resource:E,dataProviderName:S,invalidates:F=["list","many"]})=>{let{identifier:T}=i(E);u({resource:T,dataProviderName:z(T,S,n),invalidates:F}),m({type:"REMOVE",payload:{id:x,resource:T}})},onSuccess:(p,{id:b,resource:x,successNotification:E,dataProviderName:S,meta:F,metaData:T},D)=>{let{resource:q,identifier:L}=i(x),k=Zr.default.singular(L);d.removeQueries(D==null?void 0:D.queryKey.detail(b));let w=typeof E=="function"?E(p,b,L):E;f(w,{key:`${b}-${L}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${L}.${L}`,k)},`Successfully deleted a ${k}`),type:"success"}),h==null||h({channel:`resources/${q.name}`,type:"deleted",payload:{ids:[b]},date:new Date});let R=y({resource:q,meta:A(F,T)}),{fields:M,operation:$,variables:U,...I}=R||{};l==null||l.mutate({action:"delete",resource:q.name,meta:{id:b,dataProviderName:z(L,S,n),...I}}),d.removeQueries(D==null?void 0:D.queryKey.detail(b))},onError:(p,{id:b,resource:x,errorNotification:E},S)=>{let{identifier:F}=i(x);if(S)for(let T of S.previousQueries)d.setQueryData(T[0],T[1]);if(p.message!=="mutationCancelled"){a(p);let T=Zr.default.singular(F),D=typeof E=="function"?E(p,b,F):E;f(D,{key:`${b}-${F}-notification`,message:s("notifications.deleteError",{resource:T,statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e}),{elapsedTime:C}=oe({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:C}}},Fn=P("@tanstack/react-query"),qn=N(P("pluralize")),Va=({mutationOptions:e,overtimeOptions:t}={})=>{let r=le(),{resources:a,select:o}=_(),n=Y(),i=_e(),d=fe(),v=Ye(),{log:c}=Ge(),m=ee(),s=(0,Fn.useMutation)(({resource:l,values:f,meta:u,metaData:y,dataProviderName:g})=>{let{resource:C,identifier:p}=o(l),b=m({resource:C,meta:A(u,y)}),x=r(z(p,g,a));return x.createMany?x.createMany({resource:C.name,variables:f,meta:b,metaData:b}):$t(f.map(E=>x.create({resource:C.name,variables:E,meta:b,metaData:b})))},{onSuccess:(l,{resource:f,successNotification:u,dataProviderName:y,invalidates:g=["list","many"],values:C,meta:p,metaData:b})=>{let{resource:x,identifier:E}=o(f),S=qn.default.plural(E),F=typeof u=="function"?u(l,C,E):u;d(F,{key:`createMany-${E}-notification`,message:n("notifications.createSuccess",{resource:n(`${E}.${E}`,E)},`Successfully created ${S}`),description:n("notifications.success","Success"),type:"success"}),v({resource:E,dataProviderName:z(E,y,a),invalidates:g});let T=l==null?void 0:l.data.filter(R=>(R==null?void 0:R.id)!==void 0).map(R=>R.id);i==null||i({channel:`resources/${x.name}`,type:"created",payload:{ids:T},date:new Date});let D=m({resource:x,meta:A(p,b)}),{fields:q,operation:L,variables:k,...w}=D||{};c==null||c.mutate({action:"createMany",resource:x.name,data:C,meta:{dataProviderName:z(E,y,a),ids:T,...w}})},onError:(l,{resource:f,errorNotification:u,values:y})=>{let{identifier:g}=o(f),C=typeof u=="function"?u(l,y,g):u;d(C,{key:`createMany-${g}-notification`,description:l.message,message:n("notifications.createError",{resource:n(`${g}.${g}`,g),statusCode:l.statusCode},`There was an error creating ${g} (status code: ${l.statusCode}`),type:"error"})},...e}),{elapsedTime:h}=oe({isLoading:s.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...s,overtime:{elapsedTime:h}}},Gr=P("@tanstack/react-query"),Yr=N(P("pluralize")),Rn=({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=_(),o=(0,Gr.useQueryClient)(),n=le(),i=Y(),{mutationMode:d,undoableTimeout:v}=nt(),c=re(),{mutate:m}=pe({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),{notificationDispatch:s}=ot(),h=_e(),l=fe(),f=Ye(),{log:u}=Ge(),y=ee(),g=(0,Gr.useMutation)(({ids:p,values:b,resource:x,onCancel:E,mutationMode:S,undoableTimeout:F,meta:T,metaData:D,dataProviderName:q})=>{let{resource:L,identifier:k}=a(x),w=y({resource:L,meta:A(T,D)}),R=S??d,M=F??v,$=n(z(k,q,r)),U=()=>$.updateMany?$.updateMany({resource:L.name,ids:p,variables:b,meta:w,metaData:w}):$t(p.map(I=>$.update({resource:L.name,id:I,variables:b,meta:w,metaData:w})));return R!=="undoable"?U():new Promise((I,B)=>{let j=()=>{U().then(O=>I(O)).catch(O=>B(O))},H=()=>{B({message:"mutationCancelled"})};E&&E(H),s({type:"ADD",payload:{id:p,resource:k,cancelMutation:H,doMutation:j,seconds:M,isSilent:!!E}})})},{onMutate:async({resource:p,ids:b,values:x,mutationMode:E,dataProviderName:S,meta:F,metaData:T})=>{let{identifier:D}=a(p),q=Pe(D,z(D,S,r),A(F,T)),L=E??d;await o.cancelQueries(q.resourceAll,void 0,{silent:!0});let k=o.getQueriesData(q.resourceAll);if(L!=="pessimistic"){o.setQueriesData(q.list(),w=>{if(!w)return null;let R=w.data.map(M=>M.id!==void 0&&b.filter($=>$!==void 0).map(String).includes(M.id.toString())?{...M,...x}:M);return{...w,data:R}}),o.setQueriesData(q.many(),w=>{if(!w)return null;let R=w.data.map(M=>M.id!==void 0&&b.filter($=>$!==void 0).map(String).includes(M.id.toString())?{...M,...x}:M);return{...w,data:R}});for(let w of b)o.setQueriesData(q.detail(w),R=>{if(!R)return null;let M={...R.data,...x};return{...R,data:M}})}return{previousQueries:k,queryKey:q}},onSettled:(p,b,{ids:x,resource:E,dataProviderName:S})=>{let{identifier:F}=a(E);f({resource:F,invalidates:["list","many"],dataProviderName:z(F,S,r)}),x.forEach(T=>f({resource:F,invalidates:["detail"],dataProviderName:z(F,S,r),id:T})),s({type:"REMOVE",payload:{id:x,resource:F}})},onSuccess:(p,{ids:b,resource:x,meta:E,metaData:S,dataProviderName:F,successNotification:T,values:D},q)=>{let{resource:L,identifier:k}=a(x),w=Yr.default.singular(k),R=typeof T=="function"?T(p,{ids:b,values:D},k):T;l(R,{key:`${b}-${k}-notification`,description:i("notifications.success","Successful"),message:i("notifications.editSuccess",{resource:i(`${k}.${k}`,k)},`Successfully updated ${w}`),type:"success"}),h==null||h({channel:`resources/${L.name}`,type:"updated",payload:{ids:b.map(String)},date:new Date});let M=[];q&&b.forEach(H=>{let O=o.getQueryData(q.queryKey.detail(H));M.push(Object.keys(D||{}).reduce((W,Q)=>{var V;return W[Q]=(V=O==null?void 0:O.data)==null?void 0:V[Q],W},{}))});let $=y({resource:L,meta:A(E,S)}),{fields:U,operation:I,variables:B,...j}=$||{};u==null||u.mutate({action:"updateMany",resource:L.name,data:D,previousData:M,meta:{ids:b,dataProviderName:z(k,F,r),...j}})},onError:(p,{ids:b,resource:x,errorNotification:E,values:S},F)=>{let{identifier:T}=a(x);if(F)for(let D of F.previousQueries)o.setQueryData(D[0],D[1]);if(p.message!=="mutationCancelled"){m==null||m(p);let D=Yr.default.singular(T),q=typeof E=="function"?E(p,{ids:b,values:S},T):E;l(q,{key:`${b}-${T}-updateMany-error-notification`,message:i("notifications.editError",{resource:D,statusCode:p.statusCode},`Error when updating ${D} (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e}),{elapsedTime:C}=oe({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:C}}},Jr=P("@tanstack/react-query"),Mn=N(P("pluralize")),kn=({mutationOptions:e,overtimeOptions:t}={})=>{let r=re(),{mutate:a}=pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:o,undoableTimeout:n}=nt(),i=le(),{notificationDispatch:d}=ot(),v=Y(),c=_e(),m=fe(),s=Ye(),{log:h}=Ge(),{resources:l,select:f}=_(),u=(0,Jr.useQueryClient)(),y=ee(),g=(0,Jr.useMutation)(({resource:p,ids:b,mutationMode:x,undoableTimeout:E,onCancel:S,meta:F,metaData:T,dataProviderName:D,values:q})=>{let{resource:L,identifier:k}=f(p),w=y({resource:L,meta:A(F,T)}),R=x??o,M=E??n,$=i(z(k,D,l)),U=()=>$.deleteMany?$.deleteMany({resource:L.name,ids:b,meta:w,metaData:w,variables:q}):$t(b.map(I=>$.deleteOne({resource:L.name,id:I,meta:w,metaData:w,variables:q})));return R!=="undoable"?U():new Promise((I,B)=>{let j=()=>{U().then(O=>I(O)).catch(O=>B(O))},H=()=>{B({message:"mutationCancelled"})};S&&S(H),d({type:"ADD",payload:{id:b,resource:k,cancelMutation:H,doMutation:j,seconds:M,isSilent:!!S}})})},{onMutate:async({ids:p,resource:b,mutationMode:x,dataProviderName:E,meta:S,metaData:F})=>{let{identifier:T}=f(b),D=A(S,F),q=Pe(T,z(T,E,l),D),L=x??o;await u.cancelQueries(q.resourceAll,void 0,{silent:!0});let k=u.getQueriesData(q.resourceAll);if(L!=="pessimistic"){u.setQueriesData(q.list(),w=>w?{data:w.data.filter(R=>R.id&&!p.map(String).includes(R.id.toString())),total:w.total-1}:null),u.setQueriesData(q.many(),w=>{if(!w)return null;let R=w.data.filter(M=>M.id?!p.map(String).includes(M.id.toString()):!1);return{...w,data:R}});for(let w of p)u.setQueriesData(q.detail(w),R=>!R||R.data.id==w?null:{...R})}return{previousQueries:k,queryKey:q}},onSettled:(p,b,{resource:x,ids:E,dataProviderName:S,invalidates:F=["list","many"]})=>{let{identifier:T}=f(x);s({resource:T,dataProviderName:z(T,S,l),invalidates:F}),d({type:"REMOVE",payload:{id:E,resource:T}})},onSuccess:(p,{ids:b,resource:x,meta:E,metaData:S,dataProviderName:F,successNotification:T},D)=>{let{resource:q,identifier:L}=f(x);b.forEach(I=>u.removeQueries(D==null?void 0:D.queryKey.detail(I)));let k=typeof T=="function"?T(p,b,L):T;m(k,{key:`${b}-${L}-notification`,description:v("notifications.success","Success"),message:v("notifications.deleteSuccess",{resource:v(`${L}.${L}`,L)},`Successfully deleted ${L}`),type:"success"}),c==null||c({channel:`resources/${q.name}`,type:"deleted",payload:{ids:b},date:new Date});let w=y({resource:q,meta:A(E,S)}),{fields:R,operation:M,variables:$,...U}=w||{};h==null||h.mutate({action:"deleteMany",resource:q.name,meta:{ids:b,dataProviderName:z(L,F,l),...U}}),b.forEach(I=>u.removeQueries(D==null?void 0:D.queryKey.detail(I)))},onError:(p,{ids:b,resource:x,errorNotification:E},S)=>{let{identifier:F}=f(x);if(S)for(let T of S.previousQueries)u.setQueryData(T[0],T[1]);if(p.message!=="mutationCancelled"){a(p);let T=Mn.default.singular(F),D=typeof E=="function"?E(p,b,F):E;m(D,{key:`${b}-${F}-notification`,message:v("notifications.deleteError",{resource:T,statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e}),{elapsedTime:C}=oe({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:C}}},$n=e=>{var t;let r=le(),{resource:a}=_(),{getApiUrl:o}=r(e??((t=A(a==null?void 0:a.meta,a==null?void 0:a.options))==null?void 0:t.dataProviderName));return o()},Nn=P("@tanstack/react-query"),An=({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:n,meta:i,metaData:d,dataProviderName:v,overtimeOptions:c})=>{let m=le(),s=re(),{mutate:h}=pe({v3LegacyAuthProviderCompatible:!!(s!=null&&s.isLegacy)}),l=Y(),f=fe(),u=ee(),y=A(i,d),{custom:g}=m(v),C=u({meta:y});if(g){let p=(0,Nn.useQuery)({queryKey:[v,"custom",t,e,{...r,...y||{}}],queryFn:({queryKey:x,pageParam:E,signal:S})=>g({url:e,method:t,...r,meta:{...C,queryContext:{queryKey:x,pageParam:E,signal:S}},metaData:{...C,queryContext:{queryKey:x,pageParam:E,signal:S}}}),...a,onSuccess:x=>{var E;(E=a==null?void 0:a.onSuccess)==null||E.call(a,x);let S=typeof o=="function"?o(x,{...r,...C}):o;f(S)},onError:x=>{var E;h(x),(E=a==null?void 0:a.onError)==null||E.call(a,x);let S=typeof n=="function"?n(x,{...r,...C}):n;f(S,{key:`${t}-notification`,message:l("notifications.error",{statusCode:x.statusCode},`Error (status code: ${x.statusCode})`),description:x.message,type:"error"})}}),{elapsedTime:b}=oe({isLoading:p.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...p,overtime:{elapsedTime:b}}}else throw Error("Not implemented custom on data provider.")},On=P("@tanstack/react-query"),Qn=({mutationOptions:e,overtimeOptions:t}={})=>{let r=re(),{mutate:a}=pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=fe(),n=le(),i=Y(),d=ee(),v=(0,On.useMutation)(({url:m,method:s,values:h,meta:l,metaData:f,dataProviderName:u,config:y})=>{let g=d({meta:A(l,f)}),{custom:C}=n(u);if(C)return C({url:m,method:s,payload:h,meta:g,metaData:g,headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(m,{successNotification:s,config:h,meta:l,metaData:f})=>{let u=typeof s=="function"?s(m,{...h,...A(l,f)||{}}):s;o(u)},onError:(m,{errorNotification:s,method:h,config:l,meta:f,metaData:u})=>{a(m);let y=typeof s=="function"?s(m,{...l,...A(f,u)||{}}):s;o(y,{key:`${h}-notification`,message:i("notifications.error",{statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})},...e}),{elapsedTime:c}=oe({isLoading:v.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...v,overtime:{elapsedTime:c}}},Xr=P("react"),za=N(P("react")),Un=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),hr=za.default.createContext(Un()),Bn=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},za.default.createElement(hr.Provider,{value:r},e)},le=()=>{let e=(0,Xr.useContext)(hr);return(0,Xr.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},In=P("@tanstack/react-query"),Wn=({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:n,queryOptions:i,successNotification:d,errorNotification:v,meta:c,metaData:m,liveMode:s,onLiveEvent:h,liveParams:l,dataProviderName:f,overtimeOptions:u})=>{let{resources:y,resource:g,identifier:C}=_(e),p=le(),b=Y(),x=re(),{mutate:E}=pe({v3LegacyAuthProviderCompatible:!!(x!=null&&x.isLegacy)}),S=fe(),F=ee(),T=z(C,f,y),D=A(c,m),q=A(r,t==null?void 0:t.filters),L=A(n,t==null?void 0:t.sort),k=A(a,t==null?void 0:t.hasPagination),w=Ba({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:k}),R=w.mode==="server",M={meta:D,metaData:D,filters:q,hasPagination:R,pagination:w,sorters:L,config:{...t,sort:L}},$=(i==null?void 0:i.enabled)===void 0||(i==null?void 0:i.enabled)===!0,U=Pe(C,T,D,D),I=F({resource:g,meta:D}),{getList:B}=p(T);ft({resource:C,types:["*"],params:{meta:I,metaData:I,pagination:w,hasPagination:R,sort:L,sorters:L,filters:q,subscriptionType:"useList",...l},channel:`resources/${g.name}`,enabled:$,liveMode:s,onLiveEvent:h});let j=(0,In.useInfiniteQuery)(U.list({filters:q,hasPagination:R,...R&&{pagination:w},...n&&{sorters:n},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}),({queryKey:O,pageParam:W,signal:Q})=>{let V={...w,current:W};return B({resource:g.name,pagination:V,hasPagination:R,filters:q,sort:L,sorters:L,meta:{...I,queryContext:{queryKey:O,pageParam:W,signal:Q}},metaData:{...I,queryContext:{queryKey:O,pageParam:W,signal:Q}}}).then(({data:we,total:Ae,...it})=>({data:we,total:Ae,pagination:V,...it}))},{getNextPageParam:O=>Oa(O),getPreviousPageParam:O=>Qa(O),...i,onSuccess:O=>{var W;(W=i==null?void 0:i.onSuccess)==null||W.call(i,O);let Q=typeof d=="function"?d(O,M,C):d;S(Q)},onError:O=>{var W;E(O),(W=i==null?void 0:i.onError)==null||W.call(i,O);let Q=typeof v=="function"?v(O,M,C):v;S(Q,{key:`${C}-useInfiniteList-notification`,message:b("notifications.error",{statusCode:O.statusCode},`Error (status code: ${O.statusCode})`),description:O.message,type:"error"})}}),{elapsedTime:H}=oe({isLoading:j.isFetching,interval:u==null?void 0:u.interval,onInterval:u==null?void 0:u.onInterval});return{...j,overtime:{elapsedTime:H}}},Jt=P("react"),Hn=P("@tanstack/react-query"),ja=N(P("react")),mt=ja.default.createContext(void 0),Vn=({liveProvider:e,children:t})=>ja.default.createElement(mt.Provider,{value:e},t),zn=P("react"),Ka=N(P("react")),jn=P("react"),Kn=P("react"),_n=N(P("lodash/isEqual")),Zn=e=>{let t=(0,Kn.useRef)(e);return(0,_n.default)(t.current,e)||(t.current=e),t.current},_a=(e,t)=>{let r=Zn(t);return(0,jn.useMemo)(e,r)},vt=Ka.default.createContext({resources:[]}),Gn=({resources:e,children:t})=>{let r=_a(()=>Ua(e??[]),[e]);return Ka.default.createElement(vt.Provider,{value:{resources:r}},t)},Za=N(P("react")),Ga=Za.default.createContext("new"),Yn=Ga.Provider,ae=()=>Za.default.useContext(Ga),Jn=N(P("react")),Ya=N(P("react")),Ja={},pt=(0,Ya.createContext)(Ja),Xn=({children:e,router:t})=>Ya.default.createElement(pt.Provider,{value:t??Ja},e),ea=N(P("react")),Xa=()=>{let e=(0,ea.useContext)(pt);return ea.default.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()},Fe=()=>{let e=Xa();return Jn.default.useMemo(()=>e(),[e])};function _(e){let{resources:t}=(0,zn.useContext)(vt),r=ae(),a=Fe(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},n=(s,h=!0)=>{let l=ie(s,t,r==="legacy");if(l)return{resource:l,identifier:l.identifier??l.name};if(h){let f={name:s,identifier:s},u=f.identifier??f.name;return{resource:f,identifier:u}}},i=eo(),{useParams:d}=ge(),v=d();if(r==="legacy"){let s=o.resourceNameOrRouteName?o.resourceNameOrRouteName:v.resource,h=s?i(s):void 0,l=(o==null?void 0:o.recordItemId)??v.id,f=v.action,u=(o==null?void 0:o.resourceName)??(h==null?void 0:h.name),y=(h==null?void 0:h.identifier)??(h==null?void 0:h.name);return{resources:t,resource:h,resourceName:u,id:l,action:f,select:n,identifier:y}}let c,m=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(m){let s=ie(m,t);s?c=s:c={name:m}}else a!=null&&a.resource&&(c=a.resource);return{resources:t,resource:c,resourceName:c==null?void 0:c.name,id:a.id,action:a.action,select:n,identifier:(c==null?void 0:c.identifier)??(c==null?void 0:c.name)}}var ta=P("react"),eo=()=>{let{resources:e}=(0,ta.useContext)(vt);return(0,ta.useCallback)(t=>ie(t,e,!0)||{name:t,route:t},[e])},ft=({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:n,onLiveEvent:i})=>{let d=(0,Hn.useQueryClient)(),{resource:v,identifier:c}=_(e),m=Pe(c),s=(0,Jt.useContext)(mt),{liveMode:h,onLiveEvent:l}=(0,Jt.useContext)(Ue),f=n??h;(0,Jt.useEffect)(()=>{let u;return f&&f!=="off"&&o&&(u=s==null?void 0:s.subscribe({channel:r,params:{resource:v==null?void 0:v.name,...t},types:a,callback:y=>{f==="auto"&&d.invalidateQueries(m.resourceAll),i==null||i(y),l==null||l(y)}})),()=>{u&&(s==null||s.unsubscribe(u))}},[o])},ei=P("react"),to=e=>{let{liveMode:t}=(0,ei.useContext)(Ue);return e??t},ra=P("react"),ti=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let n=(0,ra.useContext)(mt);(0,ra.useEffect)(()=>{let i;return a&&(i=n==null?void 0:n.subscribe({channel:t,params:e,types:r,callback:o})),()=>{i&&(n==null||n.unsubscribe(i))}},[a])},ri=P("react"),_e=()=>{let e=(0,ri.useContext)(mt);return e==null?void 0:e.publish},ai=P("react"),ot=()=>{let{notifications:e,notificationDispatch:t}=(0,ai.useContext)(Wa);return{notifications:e,notificationDispatch:t}},oi=P("react"),ro=N(P("react")),br=(0,ro.createContext)({}),ni=({open:e,close:t,children:r})=>ro.default.createElement(br.Provider,{value:{open:e,close:t}},r),Be=()=>{let{open:e,close:t}=(0,oi.useContext)(br);return{open:e,close:t}},ii=P("react"),fe=()=>{let{open:e}=Be();return(0,ii.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},aa=P("react"),ao=N(P("react")),Ze=ao.default.createContext({}),li=({children:e,i18nProvider:t})=>ao.default.createElement(Ze.Provider,{value:{i18nProvider:t}},e),si=()=>{let{i18nProvider:e}=(0,aa.useContext)(Ze);return(0,aa.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},oa=P("react"),Y=()=>{let{i18nProvider:e}=(0,oa.useContext)(Ze);return(0,oa.useMemo)(()=>{function t(r,a,o){return(e==null?void 0:e.translate(r,a,o))??o??(typeof a=="string"&&typeof o>"u"?a:r)}return t},[e])},na=P("react"),ui=()=>{let{i18nProvider:e}=(0,na.useContext)(Ze);return(0,na.useCallback)(()=>e==null?void 0:e.getLocale(),[])},di=P("react"),nt=()=>{let{mutationMode:e,undoableTimeout:t}=(0,di.useContext)(Ue);return{mutationMode:e,undoableTimeout:t}},ia=P("react"),sr=N(P("react")),oo=sr.default.createContext({}),ci=({children:e})=>{let[t,r]=(0,sr.useState)(!1);return sr.default.createElement(oo.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Er=()=>{let{warnWhenUnsavedChanges:e}=(0,ia.useContext)(Ue),{warnWhen:t,setWarnWhen:r}=(0,ia.useContext)(oo);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}},mi=P("react"),no=()=>{let{syncWithLocation:e}=(0,mi.useContext)(Ue);return{syncWithLocation:e}},vi=P("react"),pi=()=>{let{Title:e}=(0,vi.useContext)(Ue);return e},fi=P("react"),Nt=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:d,syncWithLocation:v,undoableTimeout:c,warnWhenUnsavedChanges:m,DashboardPage:s,LoginPage:h,catchAll:l,options:f}=(0,fi.useContext)(Ue);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:d,syncWithLocation:v,undoableTimeout:c,warnWhenUnsavedChanges:m,DashboardPage:s,LoginPage:h,catchAll:l,options:f}},gi=P("react"),yi=P("export-to-csv-fix-source-map"),hi=({resourceName:e,resource:t,sorter:r,sorters:a,filters:o,maxItemCount:n,pageSize:i=20,mapData:d=l=>l,exportOptions:v,meta:c,metaData:m,dataProviderName:s,onError:h}={})=>{let[l,f]=(0,gi.useState)(!1),u=le(),y=ee(),{resource:g,resources:C,identifier:p}=_(A(t,e)),b=`${kt(p,"plural")}-${new Date().toLocaleString()}`,{getList:x}=u(z(p,s,C)),E=y({resource:g,meta:A(c,m)});return{isLoading:l,triggerExport:async()=>{f(!0);let S=[],F=1,T=!0;for(;T;)try{let{data:D,total:q}=await x({resource:(g==null?void 0:g.name)??"",filters:o,sort:A(a,r),sorters:A(a,r),pagination:{current:F,pageSize:i,mode:"server"},meta:E,metaData:E});F++,S.push(...D),n&&S.length>=n&&(S=S.slice(0,n),T=!1),q===S.length&&(T=!1)}catch(D){f(!1),T=!1,h==null||h(D);return}new yi.ExportToCsv({filename:b,useKeysAsHeaders:!0,...v}).generateCsv(S.map(d)),f(!1)}}},la=N(P("react")),bi=N(P("warn-once")),Ei=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:n,successNotification:i,errorNotification:d,meta:v,metaData:c,queryMeta:m,mutationMeta:s,mutationMode:h,liveMode:l,onLiveEvent:f,liveParams:u,undoableTimeout:y,dataProviderName:g,invalidates:C,queryOptions:p,createMutationOptions:b,updateMutationOptions:x,overtimeOptions:E}={})=>{let{options:S}=Nt(),F=ee(),{resource:T,id:D,action:q,identifier:L}=_(e),{identifier:k}=_(),w=(()=>e&&e!==k?r:r??D)(),[R,M]=la.default.useState(w);la.default.useEffect(()=>{M(w)},[w]);let $=(()=>t||(q==="edit"||q==="clone"?q:"create"))(),U=F({resource:T,meta:A(v,c)}),{mutationMode:I}=nt(),B=h??I,j=$==="create",H=$==="edit",O=$==="clone";(0,bi.default)((O||H)&&!!e&&!r,`[useForm]: action: "${$}", resource: "${L}", id: ${R} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let W=yn({redirectFromProps:n,action:$,redirectOptions:S.redirect}),Q=gr({resource:L,id:R??"",queryOptions:{enabled:R!==void 0&&(H||O),...p},liveMode:l,onLiveEvent:f,liveParams:u,meta:{...U,...m},metaData:{...U,...m},dataProviderName:g}),{isFetching:V}=Q,we=yr({mutationOptions:b}),{mutate:Ae,isLoading:it}=we,lt=Ha({mutationOptions:x}),{mutate:ht,isLoading:bt}=lt,{setWarnWhen:xe}=Er(),Je=io(),Me=j||O?{formLoading:V||it,mutationResult:we,onFinish:async ne=>{xe(!1);let De=ye=>{Je({redirect:W,resource:T,id:ye,meta:A(v,c)})};return B!=="pessimistic"&&setTimeout(()=>{De()}),new Promise((ye,ke)=>{if(B!=="pessimistic"&&ye(),!!T)return Ae({values:ne,resource:L??T.name,successNotification:i,errorNotification:d,meta:{...U,...s},metaData:{...U,...s},dataProviderName:g,invalidates:C},{onSuccess:(Se,$e,Ie)=>{var qe;a&&a(Se,ne,Ie);let Et=(qe=Se==null?void 0:Se.data)==null?void 0:qe.id;De(Et),ye(Se)},onError:(Se,$e,Ie)=>{if(o)return o(Se,ne,Ie);ke()}})})}}:{formLoading:V||bt,mutationResult:lt,onFinish:async ne=>{if(xe(!1),!T)return;let De={id:R??"",values:ne,resource:L??T.name,mutationMode:B,undoableTimeout:y,successNotification:i,errorNotification:d,meta:{...U,...s},metaData:{...U,...s},dataProviderName:g,invalidates:C},ye=()=>{Je({redirect:W,resource:T,id:R,meta:A(v,c)})};return B!=="pessimistic"&&setTimeout(()=>{ye()}),new Promise((ke,Se)=>(B!=="pessimistic"&&ke(),setTimeout(()=>{ht(De,{onSuccess:($e,Ie,qe)=>{a&&a($e,ne,qe),B==="pessimistic"&&ye(),ke($e)},onError:($e,Ie,qe)=>{if(o)return o($e,ne,qe);Se()}})})))}},{elapsedTime:It}=oe({isLoading:Me.mutationResult.isLoading||Q.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{...Me,queryResult:Q,id:R,setId:M,redirect:(ne,De)=>{Je({redirect:ne!==void 0?ne:H?"list":"edit",resource:T,id:De??R,meta:A(v,c)})},overtime:{elapsedTime:It}}},Pi=P("react"),io=()=>{let{show:e,edit:t,list:r,create:a}=Te();return(0,Pi.useCallback)(({redirect:o,resource:n,id:i,meta:d={}})=>{if(o&&n)return n.show&&o==="show"&&i?e(n,i,void 0,d):n.edit&&o==="edit"&&i?t(n,i,void 0,d):n.create&&o==="create"?a(n,void 0,d):r(n,"push",d)},[])},sa=N(P("react")),Ce=()=>{let e=(0,sa.useContext)(pt);return sa.default.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])()},ua=N(P("react")),lo=()=>{let e=(0,ua.useContext)(pt);return ua.default.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()},Te=()=>{let{resources:e}=_(),t=ae(),{useHistory:r}=ge(),a=r(),o=Fe(),n=Ce(),i=lo(),d=(l,f="push")=>{t==="legacy"?a[f](l):n({to:l,type:f})},v=(l,f={})=>{var u;if(t==="legacy"){let y=typeof l=="string"?ie(l,e,!0)??{name:l,route:l}:l,g=me(y,e,!0).find(C=>C.action==="create");return g?be(g.route,y==null?void 0:y.meta,o,f):""}else{let y=typeof l=="string"?ie(l,e)??{name:l}:l,g=(u=me(y,e).find(C=>C.action==="create"))==null?void 0:u.route;return g?n({to:be(g,y==null?void 0:y.meta,o,f),type:"path"}):""}},c=(l,f,u={})=>{var y;let g=encodeURIComponent(f);if(t==="legacy"){let C=typeof l=="string"?ie(l,e,!0)??{name:l,route:l}:l,p=me(C,e,!0).find(b=>b.action==="edit");return p?be(p.route,C==null?void 0:C.meta,o,{...u,id:g}):""}else{let C=typeof l=="string"?ie(l,e)??{name:l}:l,p=(y=me(C,e).find(b=>b.action==="edit"))==null?void 0:y.route;return p?n({to:be(p,C==null?void 0:C.meta,o,{...u,id:g}),type:"path"}):""}},m=(l,f,u={})=>{var y;let g=encodeURIComponent(f);if(t==="legacy"){let C=typeof l=="string"?ie(l,e,!0)??{name:l,route:l}:l,p=me(C,e,!0).find(b=>b.action==="clone");return p?be(p.route,C==null?void 0:C.meta,o,{...u,id:g}):""}else{let C=typeof l=="string"?ie(l,e)??{name:l}:l,p=(y=me(C,e).find(b=>b.action==="clone"))==null?void 0:y.route;return p?n({to:be(p,C==null?void 0:C.meta,o,{...u,id:g}),type:"path"}):""}},s=(l,f,u={})=>{var y;let g=encodeURIComponent(f);if(t==="legacy"){let C=typeof l=="string"?ie(l,e,!0)??{name:l,route:l}:l,p=me(C,e,!0).find(b=>b.action==="show");return p?be(p.route,C==null?void 0:C.meta,o,{...u,id:g}):""}else{let C=typeof l=="string"?ie(l,e)??{name:l}:l,p=(y=me(C,e).find(b=>b.action==="show"))==null?void 0:y.route;return p?n({to:be(p,C==null?void 0:C.meta,o,{...u,id:g}),type:"path"}):""}},h=(l,f={})=>{var u;if(t==="legacy"){let y=typeof l=="string"?ie(l,e,!0)??{name:l,route:l}:l,g=me(y,e,!0).find(C=>C.action==="list");return g?be(g.route,y==null?void 0:y.meta,o,f):""}else{let y=typeof l=="string"?ie(l,e)??{name:l}:l,g=(u=me(y,e).find(C=>C.action==="list"))==null?void 0:u.route;return g?n({to:be(g,y==null?void 0:y.meta,o,f),type:"path"}):""}};return{create:(l,f="push",u={})=>{d(v(l,u),f)},createUrl:v,edit:(l,f,u="push",y={})=>{d(c(l,f,y),u)},editUrl:c,clone:(l,f,u="push",y={})=>{d(m(l,f,y),u)},cloneUrl:m,show:(l,f,u="push",y={})=>{d(s(l,f,y),u)},showUrl:s,list:(l,f="push",u={})=>{d(h(l,u),f)},listUrl:h,push:(l,...f)=>{t==="legacy"?a.push(l,...f):n({to:l,type:"push"})},replace:(l,...f)=>{t==="legacy"?a.replace(l,...f):n({to:l,type:"replace"})},goBack:()=>{t==="legacy"?a.goBack():i()}}},da=N(P("react")),Ci=N(P("warn-once")),Ti=({resource:e,id:t,successNotification:r,errorNotification:a,meta:o,metaData:n,liveMode:i,onLiveEvent:d,dataProviderName:v,queryOptions:c,overtimeOptions:m}={})=>{let{resource:s,id:h,identifier:l}=_(e),{identifier:f}=_(),u=ee(),y=(()=>e&&e!==f?t:t??h)(),[g,C]=(0,da.useState)(y);da.default.useEffect(()=>{C(y)},[y]);let p=u({resource:s,meta:A(o,n)});(0,Ci.default)(!!e&&!t,`[useShow]: resource: "${l}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let b=gr({resource:l,id:g??"",queryOptions:{enabled:g!==void 0,...c},successNotification:r,errorNotification:a,meta:p,metaData:p,liveMode:i,onLiveEvent:d,dataProviderName:v}),{elapsedTime:x}=oe({isLoading:b.isFetching,interval:m==null?void 0:m.interval,onInterval:m==null?void 0:m.onInterval});return{queryResult:b,showId:g,setShowId:C,overtime:{elapsedTime:x}}},wt=P("react"),wi=P("papaparse"),xi=N(P("lodash/chunk")),Di=({resourceName:e,resource:t,mapData:r=m=>m,paparseOptions:a,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:n,meta:i,metaData:d,onProgress:v,dataProviderName:c}={})=>{let[m,s]=(0,wt.useState)(0),[h,l]=(0,wt.useState)(0),[f,u]=(0,wt.useState)(!1),{resource:y,identifier:g}=_(t??e),C=ee(),p=Va(),b=yr(),x=C({resource:y,meta:A(i,d)}),E;o===1?E=b:E=p;let S=()=>{l(0),s(0),u(!1)},F=D=>{let q={succeeded:D.filter(L=>L.type==="success"),errored:D.filter(L=>L.type==="error")};n==null||n(q),u(!1)};(0,wt.useEffect)(()=>{v==null||v({totalAmount:h,processedAmount:m})},[h,m]);let T=({file:D})=>(S(),new Promise(q=>{u(!0),(0,wi.parse)(D,{complete:async({data:L})=>{let k=La(L,r);if(l(k.length),o===1){let w=k.map(M=>async()=>({response:await b.mutateAsync({resource:g??"",values:M,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:x,metaData:x}),value:M})),R=await Wr(w,({response:M,value:$})=>(s(U=>U+1),{response:[M.data],type:"success",request:[$]}),(M,$)=>({response:[M],type:"error",request:[k[$]]}));q(R)}else{let w=(0,xi.default)(k,o),R=w.map($=>async()=>({response:await p.mutateAsync({resource:g??"",values:$,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:x,metaData:x}),value:$,currentBatchLength:$.length})),M=await Wr(R,({response:$,currentBatchLength:U,value:I})=>(s(B=>B+U),{response:$.data,type:"success",request:I}),($,U)=>({response:[$],type:"error",request:w[U]}));q(M)}},...a})}).then(q=>(F(q),q)));return{inputProps:{type:"file",accept:".csv",onChange:D=>{D.target.files&&D.target.files.length>0&&T({file:D.target.files[0]})}},mutationResult:E,isLoading:f,handleChange:T}},Xt=P("react"),Si=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Xt.useState)(e),a=(0,Xt.useCallback)(()=>r(!0),[t]),o=(0,Xt.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},Li=N(P("react")),Pr=()=>{let e=ae(),{resource:t,resources:r}=_(),a=Fe();return Li.default.useCallback(({resource:o,action:n,meta:i})=>{var d;let v=o||t;if(!v)return;let c=(d=me(v,r,e==="legacy").find(m=>m.action===n))==null?void 0:d.route;return c?be(c,v==null?void 0:v.meta,a,i):void 0},[r,t,a])},Fi=({resource:e,action:t,meta:r,legacy:a})=>Pr()({resource:e,action:t,meta:r,legacy:a}),ca=N(P("react")),At=()=>{let e=(0,ca.useContext)(pt);return e!=null&&e.Link?e.Link:({to:t,...r})=>ca.default.createElement("a",{href:t,...r})},qi=P("react"),so=N(P("react")),Oe={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ri=so.default.createContext(Oe),Cr=Ri,Mi=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i})=>so.default.createElement(Cr.Provider,{value:{useHistory:t??Oe.useHistory,useLocation:r??Oe.useLocation,useParams:a??Oe.useParams,Prompt:o??Oe.Prompt,Link:n??Oe.Link,routes:i??Oe.routes}},e),ge=()=>{let e=(0,qi.useContext)(Cr),{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i}=e??Oe;return{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i}},ki=P("@tanstack/react-query"),$i=P("react"),uo=N(P("react")),gt=uo.default.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}),Ni=({can:e,children:t,options:r})=>uo.default.createElement(gt.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t),co=e=>{let{icon:t,list:r,edit:a,create:o,show:n,clone:i,children:d,meta:v,options:c,...m}=e,{icon:s,...h}=v??{},{icon:l,...f}=c??{};return{...m,...v?{meta:h}:{},...c?{options:f}:{}}},mo=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,$i.useContext)(gt),{resource:n,...i}=r??{},d=co(n??{}),v=(0,ki.useQuery)(["useCan",{action:e,resource:t,params:{...i,resource:d},enabled:a==null?void 0:a.enabled}],()=>(o==null?void 0:o({action:e,resource:t,params:i}))??Promise.resolve({can:!0}),{enabled:typeof o<"u",...a,retry:!1});return typeof o>"u"?{data:{can:!0}}:v},Ai=P("react"),Oi=()=>{let{can:e}=(0,Ai.useContext)(gt);return{can:e}},Xe=P("react"),Qi=N(P("lodash/uniqBy")),Ui=N(P("lodash/debounce")),xt=N(P("lodash/get")),Bi=e=>{let[t,r]=(0,Xe.useState)([]),[a,o]=(0,Xe.useState)([]),[n,i]=(0,Xe.useState)([]),{resource:d,sort:v,sorters:c,filters:m=[],optionLabel:s="title",optionValue:h="id",debounce:l=300,successNotification:f,errorNotification:u,defaultValueQueryOptions:y,queryOptions:g,fetchSize:C,pagination:p,hasPagination:b=!1,liveMode:x,defaultValue:E=[],onLiveEvent:S,onSearch:F,liveParams:T,meta:D,metaData:q,dataProviderName:L,overtimeOptions:k}=e,{resource:w,identifier:R}=_(d),M=ee()({resource:w,meta:A(D,q)}),$=Array.isArray(E)?E:[E],U=(0,Xe.useCallback)(Q=>{i(Q.data.map(V=>({label:(0,xt.default)(V,s),value:(0,xt.default)(V,h)})))},[s,h]),I=y??g,B=Ia({resource:R,ids:$,queryOptions:{...I,enabled:$.length>0&&((I==null?void 0:I.enabled)??!0),onSuccess:Q=>{var V;U(Q),(V=I==null?void 0:I.onSuccess)==null||V.call(I,Q)}},meta:M,metaData:M,liveMode:"off",dataProviderName:L}),j=(0,Xe.useCallback)(Q=>{o(Q.data.map(V=>({label:(0,xt.default)(V,s),value:(0,xt.default)(V,h)})))},[s,h]),H=fr({resource:R,sorters:A(c,v),filters:m.concat(t),pagination:{current:p==null?void 0:p.current,pageSize:(p==null?void 0:p.pageSize)??C,mode:p==null?void 0:p.mode},hasPagination:b,queryOptions:{...g,onSuccess:Q=>{var V;j(Q),(V=g==null?void 0:g.onSuccess)==null||V.call(g,Q)}},successNotification:f,errorNotification:u,meta:M,metaData:M,liveMode:x,liveParams:T,onLiveEvent:S,dataProviderName:L}),O=Q=>{if(F){r(F(Q));return}if(Q)r([{field:s,operator:"contains",value:Q}]);else{r([]);return}},{elapsedTime:W}=oe({isLoading:H.isFetching||B.isFetching,interval:k==null?void 0:k.interval,onInterval:k==null?void 0:k.onInterval});return{queryResult:H,defaultValueQueryResult:B,options:(0,Xe.useMemo)(()=>(0,Qi.default)([...a,...n],"value"),[a,n]),onSearch:(0,Ui.default)(O,l),overtime:{elapsedTime:W}}},ze=N(P("react")),ma=N(P("qs")),Dt=N(P("lodash/differenceWith")),St=N(P("lodash/isEqual")),Ii=N(P("warn-once")),va=[],pa=[];function Wi({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:o,permanentSorter:n=pa,defaultSetFilterBehavior:i,initialFilter:d,permanentFilter:v=va,filters:c,sorters:m,syncWithLocation:s,resource:h,successNotification:l,errorNotification:f,queryOptions:u,liveMode:y,onLiveEvent:g,liveParams:C,meta:p,metaData:b,dataProviderName:x,overtimeOptions:E}={}){var S,F,T,D,q;let{syncWithLocation:L}=no(),k=s??L,w=to(y),R=ae(),{useLocation:M}=ge(),{search:$,pathname:U}=M(),I=ee(),B=Fe(),j=((c==null?void 0:c.mode)||"server")==="server",H=((m==null?void 0:m.mode)||"server")==="server",O=r===!1?"off":"server",W=((a==null?void 0:a.mode)??O)!=="off",Q=A(a==null?void 0:a.current,e),V=A(a==null?void 0:a.pageSize,t),we=A(p,b),{parsedCurrent:Ae,parsedPageSize:it,parsedSorter:lt,parsedFilters:ht}=vr($??"?"),bt=A(c==null?void 0:c.initial,d),xe=A(c==null?void 0:c.permanent,v)??va,Je=A(m==null?void 0:m.initial,o),Me=A(m==null?void 0:m.permanent,n)??pa,It=A(c==null?void 0:c.defaultBehavior,i)??"merge",ne,De,ye,ke;k?(ne=((S=B==null?void 0:B.params)==null?void 0:S.current)||Ae||Q||1,De=((F=B==null?void 0:B.params)==null?void 0:F.pageSize)||it||V||10,ye=((T=B==null?void 0:B.params)==null?void 0:T.sorters)||(lt.length?lt:Je),ke=((D=B==null?void 0:B.params)==null?void 0:D.filters)||(ht.length?ht:bt)):(ne=Q||1,De=V||10,ye=Je,ke=bt);let{replace:Se}=Te(),$e=Ce(),{resource:Ie,identifier:qe}=_(h),Et=I({resource:Ie,meta:we});ze.default.useEffect(()=>{(0,Ii.default)(typeof qe>"u","useTable: `resource` is not defined.")},[qe]);let[We,Dr]=(0,ze.useState)(lr(Me,ye??[])),[st,Pt]=(0,ze.useState)(ir(xe,ke??[])),[ut,Sr]=(0,ze.useState)(ne),[He,Lr]=(0,ze.useState)(De),Eo=({pagination:{current:X,pageSize:he},sorter:Ct,filters:Tt})=>{if(R==="new")return $e({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...W?{current:X,pageSize:he}:{},sorters:Ct,filters:Tt,...Fr()}})??"";{let dt=ma.default.parse($==null?void 0:$.substring(1)),Do=or({pagination:{pageSize:he,current:X},sorters:We??Ct,filters:Tt,...dt});return`${U??""}?${Do??""}`}};(0,ze.useEffect)(()=>{$===""&&(Sr(ne),Lr(De),Dr(lr(Me,ye??[])),Pt(ir(xe,ke??[])))},[$]);let Fr=()=>{if(R==="new"){let{sorters:X,filters:he,pageSize:Ct,current:Tt,...dt}=(B==null?void 0:B.params)??{};return dt}else{let{sorter:X,filters:he,pageSize:Ct,current:Tt,...dt}=ma.default.parse($,{ignoreQueryPrefix:!0});return dt}};(0,ze.useEffect)(()=>{if(k){let X=Fr();if(R==="new")$e({type:"replace",options:{keepQuery:!0},query:{...W?{pageSize:He,current:ut}:{},sorters:(0,Dt.default)(We,Me,St.default),filters:(0,Dt.default)(st,xe,St.default)}});else{let he=or({...W?{pagination:{pageSize:He,current:ut}}:{},sorters:(0,Dt.default)(We,Me,St.default),filters:(0,Dt.default)(st,xe,St.default),...X});return Se==null?void 0:Se(`${U}?${he}`,void 0,{shallow:!0})}}},[k,ut,He,We,st]);let Wt=fr({resource:qe,hasPagination:r,pagination:{current:ut,pageSize:He,mode:a==null?void 0:a.mode},filters:j?ct(xe,st):void 0,sorters:H?nr(Me,We):void 0,queryOptions:u,successNotification:l,errorNotification:f,meta:Et,metaData:Et,liveMode:w,liveParams:C,onLiveEvent:g,dataProviderName:x}),Po=X=>{Pt(he=>ct(xe,X,he))},Co=X=>{Pt(ct(xe,X))},To=X=>{Pt(he=>ct(xe,X(he)))},wo=(X,he=It)=>{typeof X=="function"?To(X):he==="replace"?Co(X):Po(X)},qr=X=>{Dr(()=>nr(Me,X))},{elapsedTime:xo}=oe({isLoading:Wt.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{tableQueryResult:Wt,sorters:We,setSorters:qr,sorter:We,setSorter:qr,filters:st,setFilters:wo,current:ut,setCurrent:Sr,pageSize:He,setPageSize:Lr,pageCount:He?Math.ceil((((q=Wt.data)==null?void 0:q.total)??0)/He):1,createLinkForSyncWithLocation:Eo,overtime:{elapsedTime:xo}}}var fa=P("react"),er=P("@tanstack/react-query"),vo=N(P("react")),Ot=vo.default.createContext({}),Hi=({create:e,get:t,update:r,children:a})=>vo.default.createElement(Ot.Provider,{value:{create:e,get:t,update:r}},a),Ge=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,er.useQueryClient)(),a=(0,fa.useContext)(Ot),o=re(),{resources:n}=(0,fa.useContext)(vt),{data:i,refetch:d,isLoading:v}=Ta({v3LegacyAuthProviderCompatible:!!(o!=null&&o.isLegacy),queryOptions:{enabled:!!a}}),c=(0,er.useMutation)(async s=>{var h,l,f,u,y;let g=ie(s.resource,n),C=A((h=g==null?void 0:g.meta)==null?void 0:h.audit,(l=g==null?void 0:g.options)==null?void 0:l.audit,(u=(f=g==null?void 0:g.options)==null?void 0:f.auditLog)==null?void 0:u.permissions);if(C&&!ln(C,s.action))return;let p;return v&&(p=await d()),await((y=a.create)==null?void 0:y.call(a,{...s,author:i??(p==null?void 0:p.data)}))},e),m=(0,er.useMutation)(async s=>{var h;return await((h=a.update)==null?void 0:h.call(a,s))},{onSuccess:s=>{if(s!=null&&s.resource){let h=Pe(s==null?void 0:s.resource);r.invalidateQueries(h.logList())}},...t});return{log:c,rename:m}},Vi=P("react"),zi=P("@tanstack/react-query"),ji=({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:n})=>{let{get:i}=(0,Vi.useContext)(Ot),d=Pe(e,void 0,o);return(0,zi.useQuery)(d.logList(r),()=>(i==null?void 0:i({resource:e,action:t,author:a,meta:r,metaData:o}))??Promise.resolve([]),{enabled:typeof i<"u",...n,retry:!1})},Ki=P("react"),_i=P("@tanstack/react-query"),Ye=()=>{let{resources:e}=_(),t=(0,_i.useQueryClient)();return(0,Ki.useCallback)(({resource:r,dataProviderName:a,invalidates:o,id:n})=>{if(o===!1)return;let i=Pe(r,z(r,a,e));o.forEach(d=>{switch(d){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(n||""));break;default:break}})},[])},Zi=P("react"),Gi=N(P("warn-once")),Yi=({meta:e={}}={})=>{let t=ae(),{i18nProvider:r}=(0,Zi.useContext)(Ze),a=Fe(),o=Y(),{resources:n,resource:i,action:d}=_(),v=[];if(!(i!=null&&i.name))return{breadcrumbs:v};let c=m=>{var s,h,l,f,u,y;let g=typeof m=="string"?ie(m,n,t==="legacy")??{name:m}:m;if(g){let C=A((s=g==null?void 0:g.meta)==null?void 0:s.parent,g==null?void 0:g.parentName);C&&c(C);let p=me(g,n,t==="legacy").find(E=>E.action==="list"),b=(h=p==null?void 0:p.resource)!=null&&h.list?p==null?void 0:p.route:void 0,x=b?t==="legacy"?b:be(b,g==null?void 0:g.meta,a,e):void 0;v.push({label:A((l=g.meta)==null?void 0:l.label,(f=g.options)==null?void 0:f.label)??o(`${g.name}.${g.name}`,Lt(g.name)),href:x,icon:A((u=g.meta)==null?void 0:u.icon,(y=g.options)==null?void 0:y.icon,g.icon)})}};if(c(i),d&&d!=="list"){let m=`actions.${d}`,s=o(m);typeof r<"u"&&s===m?((0,Gi.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${d}" action. Please add "actions.${d}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),v.push({label:o(`buttons.${d}`,Lt(d))})):v.push({label:o(m,Lt(d))})}return{breadcrumbs:v}},tr=N(P("react")),qt=(e,t,r=!1)=>{let a=[],o=Qe(e,t);for(;o;)a.push(o),o=Qe(o,t);return a.reverse(),`/${[...a,e].map(n=>Ne((r?n.route:void 0)??n.identifier??n.name)).join("/").replace(/^\//,"")}`},Ji=(e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(o=>{let n=[],i=Qe(o,e);for(;i;)n.push(i),i=Qe(i,e);n.reverse();let d=r;n.forEach(c=>{let m=(t?c.route:void 0)??c.identifier??c.name;d.children[m]||(d.children[m]={item:c,children:{}}),d=d.children[m]});let v=(t?o.route:void 0)??o.identifier??o.name;d.children[v]||(d.children[v]={item:o,children:{}})});let a=o=>{let n=[];return Object.keys(o.children).forEach(i=>{let d=qt(o.children[i].item,e,t),v={...o.children[i].item,key:d,children:a(o.children[i])};n.push(v)}),n};return a(r)},ga=e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),Xi=({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=Y(),a=Pr(),o=ae(),{resource:n,resources:i}=_(),{pathname:d}=Fe(),{useLocation:v}=ge(),{pathname:c}=v(),m=`/${((o==="legacy"?ga(c):d?ga(d):void 0)??"").replace(/^\//,"")}`,s=n?qt(n,i,o==="legacy"):m??"",h=tr.default.useMemo(()=>{if(!n)return[];let u=Qe(n,i),y=[qt(n,i)];for(;u;)y.push(qt(u,i)),u=Qe(u,i);return y},[]),l=tr.default.useCallback(u=>{var y,g,C,p,b,x;if((((y=u==null?void 0:u.meta)==null?void 0:y.hide)??((g=u==null?void 0:u.options)==null?void 0:g.hide))||!(u!=null&&u.list)&&u.children.length===0)return;let E=u.list?a({resource:u,action:"list",legacy:o==="legacy",meta:e}):void 0;if(!(t&&E&&E.match(/(\/|^):(.+?)(\/|$){1}/)))return{...u,route:E,icon:A((C=u.meta)==null?void 0:C.icon,(p=u.options)==null?void 0:p.icon,u.icon),label:A((b=u==null?void 0:u.meta)==null?void 0:b.label,(x=u==null?void 0:u.options)==null?void 0:x.label)??r(`${u.name}.${u.name}`,kt(u.name,"plural"))}},[o,e,r,t]),f=tr.default.useMemo(()=>{let u=Ji(i,o==="legacy"),y=g=>g.flatMap(C=>{let p=y(C.children),b=l({...C,children:p});return b?[b]:[]});return y(u)},[i,o,l]);return{defaultOpenKeys:h,selectedKey:s,menuItems:f}},ee=()=>{let{params:e}=Fe();return({resource:t,meta:r}={})=>{let{meta:a}=co(t??{}),{filters:o,sorters:n,current:i,pageSize:d,...v}=e??{};return{...a,...v,...r}}},el=()=>{let[e,t]=(0,Ve.useState)(),r=Y(),{push:a}=Te(),o=Ce(),n=ae(),{resource:i,action:d}=_();return(0,Ve.useEffect)(()=>{i&&d&&t(r("pages.error.info",{action:d,resource:i.name},`You may have forgotten to add the "${d}" component to "${i.name}" resource.`))},[i,d]),Ve.default.createElement(Ve.default.Fragment,null,Ve.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Ve.default.createElement("p",null,e),Ve.default.createElement("button",{onClick:()=>{n==="legacy"?a("/"):o({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},te=N(P("react")),po=()=>{let[e,t]=(0,te.useState)(""),[r,a]=(0,te.useState)(""),o=Y(),n=re(),{mutate:i}=dr({v3LegacyAuthProviderCompatible:!!(n!=null&&n.isLegacy)});return te.default.createElement(te.default.Fragment,null,te.default.createElement("h1",null,o("pages.login.title","Sign in your account")),te.default.createElement("form",{onSubmit:d=>{d.preventDefault(),i({username:e,password:r})}},te.default.createElement("table",null,te.default.createElement("tbody",null,te.default.createElement("tr",null,te.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),te.default.createElement("td",null,te.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:d=>t(d.target.value)}))),te.default.createElement("tr",null,te.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),te.default.createElement("td",null,te.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:d=>a(d.target.value)}))))),te.default.createElement("br",null),te.default.createElement("input",{type:"submit",value:"login"})))},et=N(P("react")),Z=N(P("react")),tl=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:n,renderContent:i,formProps:d,title:v=void 0})=>{let c=ae(),m=At(),{Link:s}=ge(),h=c==="legacy"?s:m,[l,f]=(0,Z.useState)(""),[u,y]=(0,Z.useState)(""),[g,C]=(0,Z.useState)(!1),p=Y(),b=re(),{mutate:x}=dr({v3LegacyAuthProviderCompatible:!!(b!=null&&b.isLegacy)}),E=(T,D)=>Z.default.createElement(h,{to:T},D),S=()=>e?e.map(T=>Z.default.createElement("div",{key:T.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Z.default.createElement("button",{onClick:()=>x({providerName:T.name}),style:{display:"flex",alignItems:"center"}},T==null?void 0:T.icon,T.label??Z.default.createElement("label",null,T.label)))):null,F=Z.default.createElement("div",{...o},Z.default.createElement("h1",{style:{textAlign:"center"}},p("pages.login.title","Sign in to your account")),S(),Z.default.createElement("hr",null),Z.default.createElement("form",{onSubmit:T=>{T.preventDefault(),x({email:l,password:u,remember:g})},...d},Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Z.default.createElement("label",{htmlFor:"email-input"},p("pages.login.fields.email","Email")),Z.default.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:l,onChange:T=>f(T.target.value)}),Z.default.createElement("label",{htmlFor:"password-input"},p("pages.login.fields.password","Password")),Z.default.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:u,onChange:T=>y(T.target.value)}),a??Z.default.createElement(Z.default.Fragment,null,Z.default.createElement("label",{htmlFor:"remember-me-input"},p("pages.login.buttons.rememberMe","Remember me"),Z.default.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:g,value:g.toString(),onChange:()=>{C(!g)}}))),Z.default.createElement("br",null),r??E("/forgot-password",p("pages.login.buttons.forgotPassword","Forgot password?")),Z.default.createElement("input",{type:"submit",value:p("pages.login.signin","Sign in")}),t??Z.default.createElement("span",null,p("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",E("/register",p("pages.login.register","Sign up"))))));return Z.default.createElement("div",{...n},i?i(F,v):F)},J=N(P("react")),rl=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:n,title:i=void 0})=>{let d=ae(),v=At(),{Link:c}=ge(),m=d==="legacy"?c:v,[s,h]=(0,J.useState)(""),[l,f]=(0,J.useState)(""),u=Y(),y=re(),{mutate:g,isLoading:C}=wa({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),p=(E,S)=>J.default.createElement(m,{to:E},S),b=()=>e?e.map(E=>J.default.createElement("div",{key:E.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},J.default.createElement("button",{onClick:()=>g({providerName:E.name}),style:{display:"flex",alignItems:"center"}},E==null?void 0:E.icon,E.label??J.default.createElement("label",null,E.label)))):null,x=J.default.createElement("div",{...a},J.default.createElement("h1",{style:{textAlign:"center"}},u("pages.register.title","Sign up for your account")),b(),J.default.createElement("hr",null),J.default.createElement("form",{onSubmit:E=>{E.preventDefault(),g({email:s,password:l})},...n},J.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},J.default.createElement("label",{htmlFor:"email-input"},u("pages.register.fields.email","Email")),J.default.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:s,onChange:E=>h(E.target.value)}),J.default.createElement("label",{htmlFor:"password-input"},u("pages.register.fields.password","Password")),J.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:l,onChange:E=>f(E.target.value)}),J.default.createElement("input",{type:"submit",value:u("pages.register.buttons.submit","Sign up"),disabled:C}),t??J.default.createElement(J.default.Fragment,null,J.default.createElement("span",null,u("pages.login.buttons.haveAccount","Have an account?")," ",p("/login",u("pages.login.signin","Sign in")))))));return J.default.createElement("div",{...r},o?o(x,i):x)},de=N(P("react")),al=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o,title:n=void 0})=>{let i=Y(),d=ae(),v=At(),{Link:c}=ge(),m=d==="legacy"?c:v,[s,h]=(0,de.useState)(""),{mutate:l,isLoading:f}=xa(),u=(g,C)=>de.default.createElement(m,{to:g},C),y=de.default.createElement("div",{...r},de.default.createElement("h1",{style:{textAlign:"center"}},i("pages.forgotPassword.title","Forgot your password?")),de.default.createElement("hr",null),de.default.createElement("form",{onSubmit:g=>{g.preventDefault(),l({email:s})},...o},de.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},de.default.createElement("label",{htmlFor:"email-input"},i("pages.forgotPassword.fields.email","Email")),de.default.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:s,onChange:g=>h(g.target.value)}),de.default.createElement("input",{type:"submit",disabled:f,value:i("pages.forgotPassword.buttons.submit","Send reset instructions")}),de.default.createElement("br",null),e??de.default.createElement("span",null,i("pages.register.buttons.haveAccount","Have an account? ")," ",u("/login",i("pages.login.signin","Sign in"))))));return de.default.createElement("div",{...t},a?a(y,n):y)},ce=N(P("react")),ol=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a,title:o=void 0})=>{let n=Y(),i=re(),{mutate:d,isLoading:v}=Da({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)}),[c,m]=(0,ce.useState)(""),[s,h]=(0,ce.useState)(""),l=ce.default.createElement("div",{...t},ce.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),ce.default.createElement("hr",null),ce.default.createElement("form",{onSubmit:f=>{f.preventDefault(),d({password:c,confirmPassword:s})},...a},ce.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ce.default.createElement("label",{htmlFor:"password-input"},n("pages.updatePassword.fields.password","New Password")),ce.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:c,onChange:f=>m(f.target.value)}),ce.default.createElement("label",{htmlFor:"confirm-password-input"},n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ce.default.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:s,onChange:f=>h(f.target.value)}),ce.default.createElement("input",{type:"submit",disabled:v,value:n("pages.updatePassword.buttons.submit","Update")}))));return ce.default.createElement("div",{...e},r?r(l,o):l)},nl=e=>{let{type:t}=e;return et.default.createElement(et.default.Fragment,null,(()=>{switch(t){case"register":return et.default.createElement(rl,{...e});case"forgotPassword":return et.default.createElement(al,{...e});case"updatePassword":return et.default.createElement(ol,{...e});default:return et.default.createElement(tl,{...e})}})())},se=N(P("react")),fo=()=>se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,"Welcome on board"),se.default.createElement("p",null,"Your configuration is completed."),se.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",se.default.createElement("code",null,"`resources`")," property of ",se.default.createElement("code",null,"`<Refine>`")),se.default.createElement("div",{style:{display:"flex",gap:8}},se.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Documentation")),se.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Examples")),se.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Community")))),K=N(P("react")),il=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:K.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:K.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),K.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:K.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),K.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:K.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],ll=()=>{let e=Vr("(max-width: 1010px)"),t=Vr("(max-width: 650px)"),r=()=>t?"1, 280px":e?"2, 280px":"4, 208px",a=()=>t?"32px":e?"40px":"48px",o=()=>t?"16px":e?"20px":"24px";return K.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},K.default.createElement("div",{style:{height:"89px"}}),K.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},K.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),K.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),K.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},K.default.createElement("h1",{style:{fontSize:a(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),K.default.createElement("h4",{style:{fontSize:o(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),K.default.createElement("div",{style:{height:"64px"}}),K.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},il.map(n=>K.default.createElement(sl,{key:`welcome-page-${n.title}`,card:n}))),K.default.createElement("div",{style:{height:"64px"}}))},sl=({card:e})=>{let{title:t,description:r,icon:a,link:o}=e,[n,i]=(0,K.useState)(!1);return K.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},K.default.createElement("div",{style:{display:"flex",alignItems:"center"}},K.default.createElement("a",{onPointerEnter:()=>i(!0),onPointerLeave:()=>i(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:o},a,K.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),K.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...n&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},K.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),K.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))},G=N(P("react")),rr=P("@tanstack/react-query"),ul=P("@tanstack/react-query-devtools"),dl=P("react"),je=P("react"),cl="4.24.0",ml=()=>{let e=Sa(),t=(0,je.useContext)(Ot),r=(0,je.useContext)(mt),a=(0,je.useContext)(Cr),o=(0,je.useContext)(hr),{i18nProvider:n}=(0,je.useContext)(Ze),i=(0,je.useContext)(br),d=(0,je.useContext)(gt),{resources:v}=_(),c=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),s=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,h=!!o,l=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),f=!!i.close||!!i.open,u=!!d.can;return{providers:{auth:e,auditLog:c,live:m,router:s,data:h,i18n:l,notification:f,accessControl:u},version:cl,resourceCount:v.length}},vl=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},pl=()=>{let e=ml();return(0,dl.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${vl(e)}`},[]),null},fl=e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},ya=N(P("react")),gl=e=>{let t=ya.default.useRef(!1);ya.default.useEffect(()=>{t.current===!1&&e&&fl(e)&&(t.current=!0)},[e])},yl=({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:o,notificationProvider:n,accessControlProvider:i,auditLogProvider:d,resources:v,DashboardPage:c,ReadyPage:m,LoginPage:s,catchAll:h,children:l,liveProvider:f,i18nProvider:u,Title:y,Layout:g,Sider:C,Header:p,Footer:b,OffLayoutArea:x,onLiveEvent:E,options:S})=>{let{optionsWithDefaults:F,disableTelemetryWithDefault:T,reactQueryWithDefaults:D}=gn({options:S}),q=_a(()=>{var w;return D.clientConfig instanceof rr.QueryClient?D.clientConfig:new rr.QueryClient({...D.clientConfig,defaultOptions:{...D.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(w=D.clientConfig.defaultOptions)==null?void 0:w.queries}}})},[D.clientConfig]),L=G.default.useMemo(()=>typeof n=="function"?n:()=>n??{},[n])();if(gl(o),a&&!o&&(v??[]).length===0)return m?G.default.createElement(m,null):G.default.createElement(fo,null);let{RouterComponent:k=G.default.Fragment}=o?{}:a??{};return G.default.createElement(rr.QueryClientProvider,{client:q},G.default.createElement(ni,{...L},G.default.createElement(Io,{...e??{},isProvided:!!e},G.default.createElement(Wo,{...t??{},isProvided:!!t},G.default.createElement(Bn,{...r},G.default.createElement(Vn,{liveProvider:f},G.default.createElement(Yn,{value:a&&!o?"legacy":"new"},G.default.createElement(Xn,{router:o},G.default.createElement(Mi,{...a},G.default.createElement(Gn,{resources:v??[]},G.default.createElement(li,{i18nProvider:u},G.default.createElement(Ni,{...i??{}},G.default.createElement(Hi,{...d??{}},G.default.createElement(Dn,null,G.default.createElement(fn,{mutationMode:F.mutationMode,warnWhenUnsavedChanges:F.warnWhenUnsavedChanges,syncWithLocation:F.syncWithLocation,Title:y,undoableTimeout:F.undoableTimeout,catchAll:h,DashboardPage:c,LoginPage:s,Layout:g,Sider:C,Footer:b,Header:p,OffLayoutArea:x,hasDashboard:!!c,liveMode:F.liveMode,onLiveEvent:E,options:F},G.default.createElement(ci,null,G.default.createElement(k,null,l,!T&&G.default.createElement(pl,null),G.default.createElement(yo,null))))))))))))))))),D.devtoolConfig===!1?null:G.default.createElement(ul.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...D.devtoolConfig}))},ha=P("react"),go=({notification:e})=>{let t=Y(),{notificationDispatch:r}=ot(),{open:a}=Be(),[o,n]=(0,ha.useState)(),i=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Zt(e.seconds)},`You have ${Zt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Zt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let d=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);n(d)}};return(0,ha.useEffect)(()=>{i()},[e]),null},Rt=N(P("react")),hl=({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:n,OffLayoutArea:i})=>{let{Layout:d,Footer:v,Header:c,Sider:m,Title:s,OffLayoutArea:h}=Nt();return Rt.default.createElement(t??d,{Sider:r??m,Header:a??c,Footer:n??v,Title:o??s,OffLayoutArea:i??h},e,Rt.default.createElement(bl,null))},bl=()=>{let{Prompt:e}=ge(),t=Y(),{warnWhen:r,setWarnWhen:a}=Er(),o=n=>(n.preventDefault(),n.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),n.returnValue);return(0,Rt.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),Rt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},ve=N(P("react")),El=()=>{let e=Ce(),[t,r]=ve.default.useState(void 0);return ve.default.useEffect(()=>{t&&e(t)},[t]),ve.default.useCallback(a=>{t||r(a)},[t])};function Pl({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:o}){var n;let i=re(),d=ae(),v=!!(i!=null&&i.isProvided),c=!!(i!=null&&i.isLegacy),m=d==="legacy",s=Fe(),h=Ce(),l=El(),{replace:f}=Te(),{useLocation:u}=ge(),y=u(),{isLoading:g,isFetching:C,isSuccess:p,data:{authenticated:b,redirectTo:x}={},refetch:E}=cr({v3LegacyAuthProviderCompatible:c});ve.default.useEffect(()=>{E()},[r,a]);let S=ve.default.useRef({status:g?"initial":"pending",content:o??null});C?S.current.status="pending":C||(S.current.status="settled");let F=v?c?p:b:!0;if(S.current.status==="settled")if(F)S.current.content=ve.default.createElement(ve.default.Fragment,null,r??null);else if(typeof a<"u")S.current.content=ve.default.createElement(ve.default.Fragment,null,a);else{let T=`${m?y==null?void 0:y.pathname:s.pathname}`.replace(/(\?.*|#.*)$/,""),D=c?typeof e=="string"?e:"/login":typeof e=="string"?e:x;if(D)if(m){let q=t?`?to=${encodeURIComponent(T)}`:"";f(`${D}${q}`)}else l({to:D,query:t?{to:(n=s.params)!=null&&n.to?s.params.to:h({to:T,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return v?ve.default.createElement(ve.default.Fragment,null,S.current.content):ve.default.createElement(ve.default.Fragment,null,r??null)}var Cl=P("react"),yo=()=>{let{useLocation:e}=ge(),{checkAuth:t}=Ee(),r=e();return(0,Cl.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},tt=N(P("react")),Tl=({resource:e,action:t,params:r,fallback:a,children:o,...n})=>{let{resource:i,id:d,action:v}=_(e),{identifier:c}=_(),m=(()=>{let h=(r==null?void 0:r.id)??d;return e&&e!==c?r==null?void 0:r.id:h})(),{data:s}=mo({resource:e??(i==null?void 0:i.name),action:t??v??"",params:r??{id:m,resource:i}});return s!=null&&s.can?tt.default.isValidElement(o)?tt.default.cloneElement(o,n):tt.default.createElement(tt.default.Fragment,null,o):(s==null?void 0:s.can)===!1?tt.default.createElement(tt.default.Fragment,null,a??null):null},Ke=N(P("react")),wl=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],xl=()=>((0,Ke.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),wl.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),Ke.default.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},Ke.default.createElement("div",{style:{width:"200px"}}),Ke.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},Ke.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},Ke.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),Ke.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going.")))))});var wr=P("react"),bo=P("react-hook-form"),Qt=Ht(Tr()),yt=({refineCoreProps:e,warnWhenUnsavedChanges:t,...r}={})=>{let{warnWhenUnsavedChanges:a,setWarnWhen:o}=(0,Qt.useWarnAboutChange)(),n=t??a,i=(0,Qt.useForm)({...e}),{queryResult:d,onFinish:v,formLoading:c}=i,m=(0,bo.useForm)({...r}),{watch:s,setValue:h,getValues:l,handleSubmit:f}=m;(0,wr.useEffect)(()=>{var b;let C=(b=d==null?void 0:d.data)==null?void 0:b.data;if(!C)return;let p=Object.keys(l());Object.entries(C).forEach(([x,E])=>{let S=x;p.includes(S)&&h(S,E)})},[d==null?void 0:d.data,h,l]),(0,wr.useEffect)(()=>{let C=s((p,{type:b})=>{b==="change"&&u(p)});return()=>C.unsubscribe()},[s]);let u=C=>(n&&o(!0),C),y=(C,p)=>async b=>(o(!1),f(C,p)(b));return{...m,handleSubmit:y,refineCore:i,saveButtonProps:{disabled:c,onClick:C=>{y(v,()=>!1)(C)}}}};var Ut=P("react");var Dl=({stepsProps:e,...t}={})=>{let{defaultStep:r=0,isBackValidate:a=!1}=e??{},[o,n]=(0,Ut.useState)(r),i=yt({...t}),{trigger:d,getValues:v,setValue:c,formState:{dirtyFields:m},refineCore:{queryResult:s}}=i;(0,Ut.useEffect)(()=>{var y;let f=(y=s==null?void 0:s.data)==null?void 0:y.data;if(!f)return;let u=Object.keys(v());Object.entries(f).forEach(([g,C])=>{let p=g;u.includes(p)&&(m[p]||c(p,C))})},[s==null?void 0:s.data,o,c,v]);let h=f=>{let u=f;f<0&&(u=0),n(u)};return{...i,steps:{currentStep:o,gotoStep:async f=>{if(f===o)return;if(f<o&&!a){h(f);return}await d()&&h(f)}}}};var xr=P("react"),ue=Ht(Tr());var Bt=Ht(P("react")),Sl=({modalProps:e,refineCoreProps:t,syncWithLocation:r,...a}={})=>{var B,j;let[o,n]=Bt.default.useState(!1),i=(0,ue.useTranslate)(),{resource:d,action:v}=t??{},{resource:c,action:m,identifier:s}=(0,ue.useResource)(d),h=(0,ue.useParsed)(),l=(0,ue.useGo)(),f=v??m??"",u=!(typeof r=="object"&&(r==null?void 0:r.syncId)===!1),y=typeof r=="object"&&"key"in r?r.key:c&&f&&r?`modal-${s}-${f}`:void 0,{defaultVisible:g=!1,autoSubmitClose:C=!0,autoResetForm:p=!0}=e??{},b=yt({refineCoreProps:t,...a}),{reset:x,refineCore:{onFinish:E,id:S,setId:F},saveButtonProps:T,handleSubmit:D}=b,{visible:q,show:L,close:k}=(0,ue.useModal)({defaultVisible:g});Bt.default.useEffect(()=>{var H,O,W,Q;if(o===!1&&y){let V=(O=(H=h==null?void 0:h.params)==null?void 0:H[y])==null?void 0:O.open;if(typeof V=="boolean"?V&&L():typeof V=="string"&&V==="true"&&L(),u){let we=(Q=(W=h==null?void 0:h.params)==null?void 0:W[y])==null?void 0:Q.id;we&&(F==null||F(we))}n(!0)}},[y,h,u,F]),Bt.default.useEffect(()=>{var H;o===!0&&(q&&y?l({query:{[y]:{...(H=h==null?void 0:h.params)==null?void 0:H[y],open:!0,...u&&S&&{id:S}}},options:{keepQuery:!0},type:"replace"}):y&&!q&&l({query:{[y]:void 0},options:{keepQuery:!0},type:"replace"}))},[S,q,L,y,u]);let w=async H=>{await E(H),C&&k(),p&&x()},{warnWhen:R,setWarnWhen:M}=(0,ue.useWarnAboutChange)(),$=(0,xr.useCallback)(()=>{if(R)if(window.confirm(i("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes.")))M(!1);else return;F==null||F(void 0),k()},[R]),U=(0,xr.useCallback)(H=>{typeof H<"u"&&(F==null||F(H)),(!(f==="edit"||f==="clone")||(typeof H<"u"||typeof S<"u"))&&L()},[S]),I=i(`${s}.titles.${v}`,void 0,`${(0,ue.userFriendlyResourceName)(`${v} ${((B=c==null?void 0:c.meta)==null?void 0:B.label)??((j=c==null?void 0:c.options)==null?void 0:j.label)??(c==null?void 0:c.label)??s}`,"singular")}`);return{modal:{submit:w,close:$,show:U,visible:q,title:I},...b,saveButtonProps:{...T,onClick:H=>D(w)(H)}}};})();
//# sourceMappingURL=index.js.map